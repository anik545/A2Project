<p style="font-size:14pt;font-family:sans-serif"><strong>./config.py</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #408080; font-style: italic"># CSRF form protection</span>
WTF_CSRF_ENABLED <span style="color: #666666">=</span> <span style="color: #008000">False</span>
<span style="color: #408080; font-style: italic"># Database connection</span>
SQLALCHEMY_DATABASE_URI <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;sqlite:///database.db&#39;</span>
<span style="color: #408080; font-style: italic"># Secret key for encryption</span>
SECRET_KEY <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;A0Zr98j/3yX R~XHH!jmN]LWX/,?RT&#39;</span>

<span style="color: #408080; font-style: italic"># Email settings</span>
MAIL_SERVER <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;smtp.googlemail.com&#39;</span>
MAIL_PORT <span style="color: #666666">=</span> <span style="color: #666666">465</span>
MAIL_USE_TLS <span style="color: #666666">=</span> <span style="color: #008000">False</span>
MAIL_USE_SSL <span style="color: #666666">=</span> <span style="color: #008000">True</span>
MAIL_USERNAME <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;testapp545545&#39;</span>
MAIL_PASSWORD <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;January28&#39;</span>
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./run.py</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">os</span>
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">app</span> <span style="color: #008000; font-weight: bold">import</span> app

<span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">__name__</span> <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;__main__&quot;</span>:
    port <span style="color: #666666">=</span> <span style="color: #008000">int</span>(os<span style="color: #666666">.</span>environ<span style="color: #666666">.</span>get(<span style="color: #BA2121">&quot;PORT&quot;</span>, <span style="color: #666666">5000</span>))
    app<span style="color: #666666">.</span>debug <span style="color: #666666">=</span> <span style="color: #008000">True</span>
    app<span style="color: #666666">.</span>run(host<span style="color: #666666">=</span><span style="color: #BA2121">&#39;0.0.0.0&#39;</span>, port<span style="color: #666666">=</span>port)
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/__init__.py</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">flask</span> <span style="color: #008000; font-weight: bold">import</span> Flask
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">flask_login</span> <span style="color: #008000; font-weight: bold">import</span> LoginManager
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">flask_sqlalchemy</span> <span style="color: #008000; font-weight: bold">import</span> SQLAlchemy


<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">flask_mail</span> <span style="color: #008000; font-weight: bold">import</span> Mail

<span style="color: #408080; font-style: italic"># Create app and initialize flask</span>
app <span style="color: #666666">=</span> Flask(<span style="color: #19177C">__name__</span>)

<span style="color: #408080; font-style: italic">#load configuration options from config.py</span>
app<span style="color: #666666">.</span>config<span style="color: #666666">.</span>from_object(<span style="color: #BA2121">&#39;config&#39;</span>)

<span style="color: #408080; font-style: italic"># Initialize flask-login and set up login manage</span>
login_manager <span style="color: #666666">=</span> LoginManager()
login_manager<span style="color: #666666">.</span>init_app(app)
<span style="color: #408080; font-style: italic"># The view which flask login redirects to if user is not logged in and trys to access restricted view</span>
login_manager<span style="color: #666666">.</span>login_view <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;user.login&#39;</span>

<span style="color: #408080; font-style: italic"># Initialize database with sqlalchemy</span>
db <span style="color: #666666">=</span> SQLAlchemy(app)

<span style="color: #408080; font-style: italic"># Initialize flask-mail</span>
mail <span style="color: #666666">=</span> Mail(app)

<span style="color: #408080; font-style: italic"># Import and register all blueprints</span>
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">.routes.matrix</span> <span style="color: #008000; font-weight: bold">import</span> matrix_blueprint
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">.routes.questions</span> <span style="color: #008000; font-weight: bold">import</span> questions_blueprint
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">.routes.loci</span> <span style="color: #008000; font-weight: bold">import</span> loci_blueprint
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">.routes.user</span> <span style="color: #008000; font-weight: bold">import</span> user

<span style="color: #408080; font-style: italic"># Blueprints used to break up larger app into smaller modules</span>
app<span style="color: #666666">.</span>register_blueprint(matrix_blueprint)
app<span style="color: #666666">.</span>register_blueprint(loci_blueprint)
app<span style="color: #666666">.</span>register_blueprint(questions_blueprint)
app<span style="color: #666666">.</span>register_blueprint(user)

<span style="color: #408080; font-style: italic"># Import all other views and database models</span>
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">app</span> <span style="color: #008000; font-weight: bold">import</span> models, views
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/forms.py</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">flask_wtf</span> <span style="color: #008000; font-weight: bold">import</span> FlaskForm
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">wtforms</span> <span style="color: #008000; font-weight: bold">import</span> (BooleanField, PasswordField, SelectMultipleField,
                     SubmitField, TextField, validators, widgets)
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">wtforms.fields.html5</span> <span style="color: #008000; font-weight: bold">import</span> EmailField

<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">.pyscripts.question_dict</span> <span style="color: #008000; font-weight: bold">import</span> QUESTIONS


<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">RegisterForm</span>(FlaskForm):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Form to register a new user (student only)&quot;&quot;&quot;</span>

    fname <span style="color: #666666">=</span> TextField(<span style="color: #BA2121">&#39;First Name&#39;</span>, [validators<span style="color: #666666">.</span>Required()])
    lname <span style="color: #666666">=</span> TextField(<span style="color: #BA2121">&#39;Last Name&#39;</span>, [validators<span style="color: #666666">.</span>Required()])
    password <span style="color: #666666">=</span> PasswordField(<span style="color: #BA2121">&#39;Password&#39;</span>, [validators<span style="color: #666666">.</span>Required()])
    confirm_password <span style="color: #666666">=</span> PasswordField(<span style="color: #BA2121">&#39;Confirm Password&#39;</span>, [validators<span style="color: #666666">.</span>Required(
    ), validators<span style="color: #666666">.</span>EqualTo(<span style="color: #BA2121">&#39;password&#39;</span>, message<span style="color: #666666">=</span><span style="color: #BA2121">&#39;Passwords do not match&#39;</span>)])
    email <span style="color: #666666">=</span> EmailField(<span style="color: #BA2121">&#39;Email Address&#39;</span>, [
                       validators<span style="color: #666666">.</span>DataRequired(), validators<span style="color: #666666">.</span>Email()])


<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">LoginForm</span>(FlaskForm):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Form for a user to log in&quot;&quot;&quot;</span>

    email <span style="color: #666666">=</span> TextField(<span style="color: #BA2121">&#39;Username&#39;</span>, [validators<span style="color: #666666">.</span>Required()])
    password <span style="color: #666666">=</span> PasswordField(<span style="color: #BA2121">&#39;Password&#39;</span>, [validators<span style="color: #666666">.</span>Required()])
    remember <span style="color: #666666">=</span> BooleanField(<span style="color: #BA2121">&#39;Remember&#39;</span>)


<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">RequestPasswordChangeForm</span>(FlaskForm):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Form to request password change email to be sent&quot;&quot;&quot;</span>

    email <span style="color: #666666">=</span> TextField(<span style="color: #BA2121">&#39;Email&#39;</span>, [validators<span style="color: #666666">.</span>Required(), validators<span style="color: #666666">.</span>Email()])


<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">ChangePasswordForm</span>(FlaskForm):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Form for changing password (coming from email)&quot;&quot;&quot;</span>

    password <span style="color: #666666">=</span> PasswordField(<span style="color: #BA2121">&#39;Password&#39;</span>, [validators<span style="color: #666666">.</span>Required()])
    confirm_password <span style="color: #666666">=</span> PasswordField(<span style="color: #BA2121">&#39;Confirm&#39;</span>, [validators<span style="color: #666666">.</span>Required(
    ), validators<span style="color: #666666">.</span>EqualTo(<span style="color: #BA2121">&#39;password&#39;</span>, message<span style="color: #666666">=</span><span style="color: #BA2121">&#39;Passwords do not match&#39;</span>)])


<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">TeacherLinkForm</span>(FlaskForm):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Form for students account page to link to teachers&quot;&quot;&quot;</span>

    link_code <span style="color: #666666">=</span> TextField(<span style="color: #BA2121">&#39;Link Code&#39;</span>, [validators<span style="color: #666666">.</span>Required()])
    link_submit <span style="color: #666666">=</span> SubmitField(<span style="color: #BA2121">&#39;Go&#39;</span>)


<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">MultiCheckboxField</span>(SelectMultipleField):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Field for SetTaskForm (multiple select with checkboxes)&quot;&quot;&quot;</span>
    widget <span style="color: #666666">=</span> widgets<span style="color: #666666">.</span>ListWidget(prefix_label<span style="color: #666666">=</span><span style="color: #008000">False</span>)
    option_widget <span style="color: #666666">=</span> widgets<span style="color: #666666">.</span>CheckboxInput()


<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">SetTaskForm</span>(FlaskForm):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Form for teachers account page to set students tasks&quot;&quot;&quot;</span>
    student_select <span style="color: #666666">=</span> MultiCheckboxField(<span style="color: #BA2121">&#39;Students&#39;</span>,
                                        [validators<span style="color: #666666">.</span>Required()], <span style="color: #008000">coerce</span><span style="color: #666666">=</span><span style="color: #008000">int</span>)
    task_select <span style="color: #666666">=</span> MultiCheckboxField(<span style="color: #BA2121">&#39;Tasks&#39;</span>,[validators<span style="color: #666666">.</span>Required()], <span style="color: #008000">coerce</span><span style="color: #666666">=</span><span style="color: #008000">int</span>, choices<span style="color: #666666">=</span>[(q[<span style="color: #BA2121">&#39;id&#39;</span>], q[<span style="color: #BA2121">&#39;topic&#39;</span>] <span style="color: #666666">+</span> <span style="color: #BA2121">&#39;  &#39;</span> <span style="color: #666666">+</span> q[<span style="color: #BA2121">&#39;name&#39;</span>]) <span style="color: #008000; font-weight: bold">for</span> q <span style="color: #AA22FF; font-weight: bold">in</span> QUESTIONS])
    set_submit <span style="color: #666666">=</span> SubmitField(<span style="color: #BA2121">&#39;Go&#39;</span>)

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>, selection_choices):
        <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Override init so form can be initialized with custom choices.&quot;&quot;&quot;</span>
        <span style="color: #008000">super</span>(SetTaskForm, <span style="color: #008000">self</span>)<span style="color: #666666">.</span><span style="color: #0000FF">__init__</span>()
        <span style="color: #008000">self</span><span style="color: #666666">.</span>student_select<span style="color: #666666">.</span>choices <span style="color: #666666">=</span> selection_choices


<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">ChangeDetailsForm</span>(FlaskForm):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Form for teacher and student account page for changing name(s), email.&quot;&quot;&quot;</span>

    fname <span style="color: #666666">=</span> TextField(<span style="color: #BA2121">&#39;First Name&#39;</span>, [validators<span style="color: #666666">.</span>Required()])
    lname <span style="color: #666666">=</span> TextField(<span style="color: #BA2121">&#39;Last Name&#39;</span>, [validators<span style="color: #666666">.</span>Required()])
    email <span style="color: #666666">=</span> EmailField(<span style="color: #BA2121">&#39;Email Address&#39;</span>,
                       [validators<span style="color: #666666">.</span>DataRequired(), validators<span style="color: #666666">.</span>Email()])
    password <span style="color: #666666">=</span> PasswordField(<span style="color: #BA2121">&#39;Password&#39;</span>, [validators<span style="color: #666666">.</span>Required()])
    change_submit <span style="color: #666666">=</span> SubmitField(<span style="color: #BA2121">&#39;Go&#39;</span>)


<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">ChangePasswordForm1</span>(FlaskForm):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Form for changing password from account page.&quot;&quot;&quot;</span>

    old_password <span style="color: #666666">=</span> PasswordField(<span style="color: #BA2121">&#39;Old Password&#39;</span>, [validators<span style="color: #666666">.</span>Required()])
    password <span style="color: #666666">=</span> PasswordField(<span style="color: #BA2121">&#39;New Password&#39;</span>, [validators<span style="color: #666666">.</span>Required()])
    confirm_password <span style="color: #666666">=</span> PasswordField(<span style="color: #BA2121">&#39;Confirm New Password&#39;</span>, [validators<span style="color: #666666">.</span>Required(), validators<span style="color: #666666">.</span>EqualTo(<span style="color: #BA2121">&#39;password&#39;</span>, message<span style="color: #666666">=</span><span style="color: #BA2121">&#39;Passwords do not match&#39;</span>)])
    pw_submit <span style="color: #666666">=</span> SubmitField(<span style="color: #BA2121">&#39;Go&#39;</span>)
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/models.py</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">app</span> <span style="color: #008000; font-weight: bold">import</span> db
<span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">datetime</span>
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">werkzeug.security</span> <span style="color: #008000; font-weight: bold">import</span> generate_password_hash, check_password_hash
<span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">random</span>
<span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">string</span>


<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">User</span>(db<span style="color: #666666">.</span>Model):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;User class for flask-login and storing user data&quot;&quot;&quot;</span>
    user_id <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(<span style="color: #BA2121">&#39;user_id&#39;</span>, db<span style="color: #666666">.</span>Integer, primary_key<span style="color: #666666">=</span><span style="color: #008000">True</span>)
    fname <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(db<span style="color: #666666">.</span>String(<span style="color: #666666">80</span>), unique<span style="color: #666666">=</span><span style="color: #008000">False</span>)
    lname <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(db<span style="color: #666666">.</span>String(<span style="color: #666666">80</span>), unique<span style="color: #666666">=</span><span style="color: #008000">False</span>)
    email <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(db<span style="color: #666666">.</span>String(<span style="color: #666666">120</span>), unique<span style="color: #666666">=</span><span style="color: #008000">True</span>)
    password <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(db<span style="color: #666666">.</span>String(<span style="color: #666666">120</span>), unique<span style="color: #666666">=</span><span style="color: #008000">False</span>)
    authenticated <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(db<span style="color: #666666">.</span>Boolean, default<span style="color: #666666">=</span><span style="color: #008000">False</span>)
    confirmed <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(db<span style="color: #666666">.</span>Boolean)
    role <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(db<span style="color: #666666">.</span>String(<span style="color: #666666">50</span>))
    <span style="color: #408080; font-style: italic"># One to many (one user - teachers and students - has many graphs)</span>
    graphs <span style="color: #666666">=</span> db<span style="color: #666666">.</span>relationship(<span style="color: #BA2121">&#39;Graph&#39;</span>, backref<span style="color: #666666">=</span><span style="color: #BA2121">&quot;user&quot;</span>,
                             cascade<span style="color: #666666">=</span><span style="color: #BA2121">&quot;all, delete-orphan&quot;</span>, lazy<span style="color: #666666">=</span><span style="color: #BA2121">&quot;dynamic&quot;</span>)

    __mapper_args__ <span style="color: #666666">=</span> {
        <span style="color: #BA2121">&#39;polymorphic_identity&#39;</span>: <span style="color: #BA2121">&#39;user&#39;</span>,
        <span style="color: #BA2121">&#39;polymorphic_on&#39;</span>: role
    }

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>, fname, lname, email, password, role,
                 auth<span style="color: #666666">=</span><span style="color: #008000">False</span>, conf<span style="color: #666666">=</span><span style="color: #008000">False</span>):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>fname <span style="color: #666666">=</span> fname
        <span style="color: #008000">self</span><span style="color: #666666">.</span>lname <span style="color: #666666">=</span> lname
        <span style="color: #008000">self</span><span style="color: #666666">.</span>email <span style="color: #666666">=</span> email
        <span style="color: #008000">self</span><span style="color: #666666">.</span>role <span style="color: #666666">=</span> role
        <span style="color: #008000">self</span><span style="color: #666666">.</span>password <span style="color: #666666">=</span> generate_password_hash(password)
        <span style="color: #008000">self</span><span style="color: #666666">.</span>authenticated <span style="color: #666666">=</span> auth
        <span style="color: #008000">self</span><span style="color: #666666">.</span>confirmed <span style="color: #666666">=</span> conf

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">check_pw</span>(<span style="color: #008000">self</span>, password):
        <span style="color: #008000; font-weight: bold">return</span> check_password_hash(<span style="color: #008000">self</span><span style="color: #666666">.</span>password, password)

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">is_authenticated</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>authenticated

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">is_active</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">True</span>

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">is_anonymous</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">False</span>

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">get_id</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>email


<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Teacher</span>(User):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Teacher model inheriting from User.&quot;&quot;&quot;</span>

    __tablename__ <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;teacher&#39;</span>
    teacher_id <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(db<span style="color: #666666">.</span>Integer, primary_key<span style="color: #666666">=</span><span style="color: #008000">True</span>)
    user_id <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(db<span style="color: #666666">.</span>Integer, db<span style="color: #666666">.</span>ForeignKey(<span style="color: #BA2121">&#39;user.user_id&#39;</span>))
    code <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(db<span style="color: #666666">.</span>String(<span style="color: #666666">7</span>))
    <span style="color: #408080; font-style: italic"># Many to many</span>
    students <span style="color: #666666">=</span> db<span style="color: #666666">.</span>relationship(<span style="color: #BA2121">&#39;Student&#39;</span>, secondary<span style="color: #666666">=</span><span style="color: #BA2121">&#39;links&#39;</span>,
                               backref<span style="color: #666666">=</span>db<span style="color: #666666">.</span>backref(<span style="color: #BA2121">&#39;teachers&#39;</span>, lazy<span style="color: #666666">=</span><span style="color: #BA2121">&#39;dynamic&#39;</span>),
                               lazy<span style="color: #666666">=</span><span style="color: #BA2121">&#39;dynamic&#39;</span>)
    <span style="color: #408080; font-style: italic"># One to many (One teacher sets many tasks)</span>
    tasks <span style="color: #666666">=</span> db<span style="color: #666666">.</span>relationship(<span style="color: #BA2121">&#39;Task&#39;</span>, backref<span style="color: #666666">=</span><span style="color: #BA2121">&quot;teacher&quot;</span>,
                            cascade<span style="color: #666666">=</span><span style="color: #BA2121">&quot;all, delete-orphan&quot;</span>, lazy<span style="color: #666666">=</span><span style="color: #BA2121">&quot;dynamic&quot;</span>)

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>, fname, lname, email, password, role):
        <span style="color: #008000">super</span>()<span style="color: #666666">.</span><span style="color: #0000FF">__init__</span>(fname, lname, email, password, role)
        <span style="color: #408080; font-style: italic">#Create random 7 character code</span>
        <span style="color: #008000">self</span><span style="color: #666666">.</span>code <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;&#39;</span><span style="color: #666666">.</span>join(random<span style="color: #666666">.</span>choice(string<span style="color: #666666">.</span>ascii_letters)
                            <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #666666">7</span>))

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">add_student</span>(<span style="color: #008000">self</span>, student):
        <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return none id student already added, else add student to teacher</span>
<span style="color: #BA2121; font-style: italic">            and return new teacher object&quot;&quot;&quot;</span>

        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>has_student(student):
            <span style="color: #008000">self</span><span style="color: #666666">.</span>students<span style="color: #666666">.</span>append(student)
            <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span>

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">remove_student</span>(<span style="color: #008000">self</span>, student):
        <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return none is student already removed, else remove student and</span>
<span style="color: #BA2121; font-style: italic">            return new teacher object&quot;&quot;&quot;</span>
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>has_student(student):
            <span style="color: #008000">self</span><span style="color: #666666">.</span>students<span style="color: #666666">.</span>remove(student)
            <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span>

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">has_student</span>(<span style="color: #008000">self</span>, student):
        <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot; Check if teacher already has student by performing query with student id&quot;&quot;&quot;</span>
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>students<span style="color: #666666">.</span>filter(links<span style="color: #666666">.</span>c<span style="color: #666666">.</span>student_id <span style="color: #666666">==</span> student<span style="color: #666666">.</span>student_id)<span style="color: #666666">.</span>count() <span style="color: #666666">&gt;</span> <span style="color: #666666">0</span>

    __mapper_args__ <span style="color: #666666">=</span> {
        <span style="color: #BA2121">&#39;polymorphic_identity&#39;</span>: <span style="color: #BA2121">&#39;teacher&#39;</span>,
    }


<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Student</span>(User):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Student model inheriting from User.&quot;&quot;&quot;</span>

    __tablename__ <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;student&#39;</span>
    student_id <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(db<span style="color: #666666">.</span>Integer, primary_key<span style="color: #666666">=</span><span style="color: #008000">True</span>)
    user_id <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(db<span style="color: #666666">.</span>Integer, db<span style="color: #666666">.</span>ForeignKey(<span style="color: #BA2121">&#39;user.user_id&#39;</span>))
    marks <span style="color: #666666">=</span> db<span style="color: #666666">.</span>relationship(<span style="color: #BA2121">&#39;Mark&#39;</span>, backref<span style="color: #666666">=</span><span style="color: #BA2121">&quot;student&quot;</span>,
                            cascade<span style="color: #666666">=</span><span style="color: #BA2121">&quot;all, delete-orphan&quot;</span>, lazy<span style="color: #666666">=</span><span style="color: #BA2121">&quot;dynamic&quot;</span>)
    tasks <span style="color: #666666">=</span> db<span style="color: #666666">.</span>relationship(<span style="color: #BA2121">&#39;Task&#39;</span>, backref<span style="color: #666666">=</span><span style="color: #BA2121">&quot;student&quot;</span>,
                            cascade<span style="color: #666666">=</span><span style="color: #BA2121">&quot;all, delete-orphan&quot;</span>, lazy<span style="color: #666666">=</span><span style="color: #BA2121">&quot;dynamic&quot;</span>)

    __mapper_args__ <span style="color: #666666">=</span> {
        <span style="color: #BA2121">&#39;polymorphic_identity&#39;</span>: <span style="color: #BA2121">&#39;student&#39;</span>,
    }

<span style="color: #408080; font-style: italic"># Many-to-many intermediate table, linking teacher and student id</span>
links <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Table(<span style="color: #BA2121">&#39;links&#39;</span>,
                 db<span style="color: #666666">.</span>Column(<span style="color: #BA2121">&#39;teacher_id&#39;</span>, db<span style="color: #666666">.</span>Integer,
                           db<span style="color: #666666">.</span>ForeignKey(<span style="color: #BA2121">&#39;teacher.teacher_id&#39;</span>)),
                 db<span style="color: #666666">.</span>Column(<span style="color: #BA2121">&#39;student_id&#39;</span>, db<span style="color: #666666">.</span>Integer,
                           db<span style="color: #666666">.</span>ForeignKey(<span style="color: #BA2121">&#39;student.student_id&#39;</span>))
                 )


<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Mark</span>(db<span style="color: #666666">.</span>Model):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Mark model.&quot;&quot;&quot;</span>

    mark_id <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(<span style="color: #BA2121">&#39;mark_id&#39;</span>, db<span style="color: #666666">.</span>Integer, primary_key<span style="color: #666666">=</span><span style="color: #008000">True</span>)
    score <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(db<span style="color: #666666">.</span>Integer)
    out_of <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(db<span style="color: #666666">.</span>Integer)
    date <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(db<span style="color: #666666">.</span>DateTime)
    <span style="color: #408080; font-style: italic"># The id for the type of question (dictionary stored in QUESTION_DICT.py)</span>
    question_id <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(db<span style="color: #666666">.</span>Integer)
    <span style="color: #408080; font-style: italic"># Many to one (many marks to each student)</span>
    student_id <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(<span style="color: #BA2121">&#39;student_id&#39;</span>, db<span style="color: #666666">.</span>Integer,
                           db<span style="color: #666666">.</span>ForeignKey(<span style="color: #BA2121">&#39;student.student_id&#39;</span>))
    <span style="color: #408080; font-style: italic"># One to one</span>
    <span style="color: #408080; font-style: italic"># When a task is completed, a mark (id) is linked to it which is the mark the</span>
    <span style="color: #408080; font-style: italic"># student got on that task</span>
    task <span style="color: #666666">=</span> db<span style="color: #666666">.</span>relationship(<span style="color: #BA2121">&#39;Task&#39;</span>, uselist<span style="color: #666666">=</span><span style="color: #008000">False</span>, back_populates<span style="color: #666666">=</span><span style="color: #BA2121">&#39;mark&#39;</span>)

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>, score, out_of, q_id, student_id):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>score <span style="color: #666666">=</span> score
        <span style="color: #008000">self</span><span style="color: #666666">.</span>out_of <span style="color: #666666">=</span> out_of
        <span style="color: #008000">self</span><span style="color: #666666">.</span>question_id <span style="color: #666666">=</span> q_id
        <span style="color: #008000">self</span><span style="color: #666666">.</span>student_id <span style="color: #666666">=</span> student_id
        <span style="color: #008000">self</span><span style="color: #666666">.</span>date <span style="color: #666666">=</span> datetime<span style="color: #666666">.</span>date<span style="color: #666666">.</span>today()


<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Task</span>(db<span style="color: #666666">.</span>Model):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Model for task which is set by a teacher.&quot;&quot;&quot;</span>

    task_id <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(<span style="color: #BA2121">&#39;task_id&#39;</span>, db<span style="color: #666666">.</span>Integer, primary_key<span style="color: #666666">=</span><span style="color: #008000">True</span>)
    completed <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(db<span style="color: #666666">.</span>Boolean)
    question_id <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(db<span style="color: #666666">.</span>Integer)
    student_id <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(<span style="color: #BA2121">&#39;student_id&#39;</span>, db<span style="color: #666666">.</span>Integer,
                           db<span style="color: #666666">.</span>ForeignKey(<span style="color: #BA2121">&#39;student.student_id&#39;</span>))
    teacher_id <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(<span style="color: #BA2121">&#39;teacher_id&#39;</span>, db<span style="color: #666666">.</span>Integer,
                           db<span style="color: #666666">.</span>ForeignKey(<span style="color: #BA2121">&#39;teacher.teacher_id&#39;</span>))
    mark_id <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(<span style="color: #BA2121">&#39;mark_id&#39;</span>, db<span style="color: #666666">.</span>Integer, db<span style="color: #666666">.</span>ForeignKey(<span style="color: #BA2121">&#39;mark.mark_id&#39;</span>))
    <span style="color: #408080; font-style: italic"># One to one</span>
    <span style="color: #408080; font-style: italic"># When a task is completed, a mark (id) is linked to it which is the mark the</span>
    <span style="color: #408080; font-style: italic"># student got on that task</span>
    mark <span style="color: #666666">=</span> db<span style="color: #666666">.</span>relationship(<span style="color: #BA2121">&#39;Mark&#39;</span>, back_populates<span style="color: #666666">=</span><span style="color: #BA2121">&#39;task&#39;</span>)

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>, q_id, student_id, teacher_id):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>question_id <span style="color: #666666">=</span> q_id
        <span style="color: #008000">self</span><span style="color: #666666">.</span>student_id <span style="color: #666666">=</span> student_id
        <span style="color: #008000">self</span><span style="color: #666666">.</span>teacher_id <span style="color: #666666">=</span> teacher_id
        <span style="color: #008000">self</span><span style="color: #666666">.</span>completed <span style="color: #666666">=</span> <span style="color: #008000">False</span>


<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Graph</span>(db<span style="color: #666666">.</span>Model):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Model for graph from loci plotter.&quot;&quot;&quot;</span>

    graph_id <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(<span style="color: #BA2121">&#39;graph_id&#39;</span>, db<span style="color: #666666">.</span>Integer, primary_key<span style="color: #666666">=</span><span style="color: #008000">True</span>)
    title <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(db<span style="color: #666666">.</span>String,nullable<span style="color: #666666">=</span><span style="color: #008000">False</span>)
    <span style="color: #408080; font-style: italic"># Description is not necessary, so nullable is true</span>
    description <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(db<span style="color: #666666">.</span>String, nullable<span style="color: #666666">=</span><span style="color: #008000">True</span>)
    <span style="color: #408080; font-style: italic"># Graph data from desmos, very large string</span>
    desmosdata <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(db<span style="color: #666666">.</span>String)
    <span style="color: #408080; font-style: italic"># HTML for expressions table</span>
    exprlist <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(db<span style="color: #666666">.</span>String)
    date <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(db<span style="color: #666666">.</span>DateTime)
    <span style="color: #408080; font-style: italic"># Screenshot image data</span>
    image_url <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(db<span style="color: #666666">.</span>String)
    user_id <span style="color: #666666">=</span> db<span style="color: #666666">.</span>Column(<span style="color: #BA2121">&#39;user_id&#39;</span>, db<span style="color: #666666">.</span>Integer, db<span style="color: #666666">.</span>ForeignKey(<span style="color: #BA2121">&#39;user.user_id&#39;</span>))

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>, desmosdata, exprlist, user_id, title, desc, image_url):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>desmosdata <span style="color: #666666">=</span> desmosdata
        <span style="color: #008000">self</span><span style="color: #666666">.</span>exprlist <span style="color: #666666">=</span> exprlist
        <span style="color: #008000">self</span><span style="color: #666666">.</span>user_id <span style="color: #666666">=</span> user_id
        <span style="color: #008000">self</span><span style="color: #666666">.</span>title <span style="color: #666666">=</span> title
        <span style="color: #008000">self</span><span style="color: #666666">.</span>description <span style="color: #666666">=</span> desc
        <span style="color: #008000">self</span><span style="color: #666666">.</span>image_url <span style="color: #666666">=</span> image_url
        <span style="color: #008000">self</span><span style="color: #666666">.</span>date <span style="color: #666666">=</span> datetime<span style="color: #666666">.</span>date<span style="color: #666666">.</span>today()
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/views.py</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">flask</span> <span style="color: #008000; font-weight: bold">import</span> render_template

<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">app</span> <span style="color: #008000; font-weight: bold">import</span> app, login_manager
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">app.models</span> <span style="color: #008000; font-weight: bold">import</span> User


<span style="color: #AA22FF">@login_manager.user_loader</span>
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">user_loader</span>(email):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return user object for Flask-Login.&quot;&quot;&quot;</span>
    <span style="color: #008000; font-weight: bold">return</span> User<span style="color: #666666">.</span>query<span style="color: #666666">.</span>filter_by(email<span style="color: #666666">=</span>email)<span style="color: #666666">.</span>first()


<span style="color: #AA22FF">@app.route</span>(<span style="color: #BA2121">&#39;/&#39;</span>)
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">main</span>():
    <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;index.html&#39;</span>)


<span style="color: #AA22FF">@app.route</span>(<span style="color: #BA2121">&#39;/help&#39;</span>)
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">help</span>():
    <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;help.html&#39;</span>)


<span style="color: #AA22FF">@app.route</span>(<span style="color: #BA2121">&#39;/ttt&#39;</span>)
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">ttt</span>():
    <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;ttt.html&#39;</span>)


<span style="color: #AA22FF">@app.route</span>(<span style="color: #BA2121">&#39;/cttt&#39;</span>)
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">cttt</span>():
    <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;cttt.html&#39;</span>)
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/pyscripts/__init__.py</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">.</span> <span style="color: #008000; font-weight: bold">import</span> <span style="color: #666666">*</span>
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/pyscripts/base_question.py</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">BaseQuestion</span>(<span style="color: #008000">object</span>):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Base question which matrix and complex question inherit from.&quot;&quot;&quot;</span>

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>, question, answer, q_type):
        <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Constructor for simple question object.&quot;&quot;&quot;</span>
        <span style="color: #008000">self</span><span style="color: #666666">.</span>question <span style="color: #666666">=</span> question
        <span style="color: #008000">self</span><span style="color: #666666">.</span>answer <span style="color: #666666">=</span> answer
        <span style="color: #008000">self</span><span style="color: #666666">.</span>question_type <span style="color: #666666">=</span> q_type

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">get_q</span>(<span style="color: #008000">self</span>):
        <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return question as string.&quot;&quot;&quot;</span>
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">str</span>(<span style="color: #008000">self</span><span style="color: #666666">.</span>question)

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">get_answer</span>(<span style="color: #008000">self</span>):
        <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return answer.&quot;&quot;&quot;</span>
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>answer
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/pyscripts/complex_loci.py</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">sympy</span> <span style="color: #008000; font-weight: bold">import</span> symbols, re, im, sqrt, atan, sympify, latex

<span style="color: #408080; font-style: italic"># TODO instead of subbing Abs(), find sqrt(re(x)+im(x)) instead.</span>


<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">parse_mod</span>(inner):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Convert expression inside modulus to x-y equation.&quot;&quot;&quot;</span>
    <span style="color: #408080; font-style: italic"># Set up sympy variables and convert inner expression to sympy object</span>
    x, y <span style="color: #666666">=</span> symbols(<span style="color: #BA2121">&#39;x y&#39;</span>, real<span style="color: #666666">=</span><span style="color: #008000">True</span>)
    locs <span style="color: #666666">=</span> {<span style="color: #BA2121">&#39;x&#39;</span>: x, <span style="color: #BA2121">&#39;y&#39;</span>: y}
    in_eq <span style="color: #666666">=</span> sympify(inner, locs)
    <span style="color: #408080; font-style: italic"># Return string version of formula with real and imaginary parts substituted</span>
    <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">str</span>(sqrt(im(in_eq)<span style="color: #666666">**2</span> <span style="color: #666666">+</span> re(in_eq)<span style="color: #666666">**2</span>))


<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">parse_arg</span>(inner):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Convert expression inside arument function to x-y equation.&quot;&quot;&quot;</span>
    <span style="color: #408080; font-style: italic"># Set up sympy variables and convert inner expression to sympy object</span>
    x, y <span style="color: #666666">=</span> symbols(<span style="color: #BA2121">&#39;x y&#39;</span>, real<span style="color: #666666">=</span><span style="color: #008000">True</span>)
    locs <span style="color: #666666">=</span> {<span style="color: #BA2121">&#39;x&#39;</span>: x, <span style="color: #BA2121">&#39;y&#39;</span>: y}
    in_eq <span style="color: #666666">=</span> sympify(inner, locs)
    <span style="color: #408080; font-style: italic"># Return string version of formula with real and imaginary parts substituted</span>
    <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">str</span>(<span style="color: #666666">2</span> <span style="color: #666666">*</span> atan((sqrt(re(in_eq)<span style="color: #666666">**2</span> <span style="color: #666666">+</span> im(in_eq)<span style="color: #666666">**2</span>) <span style="color: #666666">-</span> re(in_eq)) <span style="color: #666666">/</span> im(in_eq)))


<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">parse</span>(eq):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return string of manipulated equation.&quot;&quot;&quot;</span>
    eq <span style="color: #666666">=</span> eq<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39;z&#39;</span>, <span style="color: #BA2121">&#39;Z&#39;</span>)<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39;^&#39;</span>, <span style="color: #BA2121">&#39;**&#39;</span>)
    <span style="color: #408080; font-style: italic"># Make the string a list for easier manipulation</span>
    eq_list <span style="color: #666666">=</span> <span style="color: #008000">list</span>(eq)
    <span style="color: #408080; font-style: italic"># Sympy recognises uppercase I as sqrt(-1)</span>
    <span style="color: #408080; font-style: italic"># Any isolated i&#39;s (not within another word like pi) should be converted to uppercase</span>
    eq_list <span style="color: #666666">=</span> [<span style="color: #BA2121">&#39;I&#39;</span> <span style="color: #008000; font-weight: bold">if</span> ch <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;i&#39;</span> <span style="color: #AA22FF; font-weight: bold">and</span> eq_list[n <span style="color: #666666">-</span> <span style="color: #666666">1</span>]
               <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #AA22FF; font-weight: bold">in</span> [<span style="color: #BA2121">&#39;p&#39;</span>, <span style="color: #BA2121">&#39;P&#39;</span>, <span style="color: #BA2121">&#39;s&#39;</span>, <span style="color: #BA2121">&#39;S&#39;</span>] <span style="color: #008000; font-weight: bold">else</span> ch <span style="color: #008000; font-weight: bold">for</span> n, ch <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">enumerate</span>(eq_list)]
    nums <span style="color: #666666">=</span> [<span style="color: #BA2121">&#39;1&#39;</span>, <span style="color: #BA2121">&#39;2&#39;</span>, <span style="color: #BA2121">&#39;3&#39;</span>, <span style="color: #BA2121">&#39;4&#39;</span>, <span style="color: #BA2121">&#39;5&#39;</span>, <span style="color: #BA2121">&#39;6&#39;</span>, <span style="color: #BA2121">&#39;7&#39;</span>, <span style="color: #BA2121">&#39;8&#39;</span>, <span style="color: #BA2121">&#39;9&#39;</span>, <span style="color: #BA2121">&#39;0&#39;</span>]
    <span style="color: #408080; font-style: italic"># Insert a * after a number and before a letter, bracket or modulus sign</span>
    <span style="color: #408080; font-style: italic"># Allows users enter 2z to mean 2 * z</span>
    <span style="color: #008000; font-weight: bold">for</span> n, ch <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">enumerate</span>(eq_list):
        <span style="color: #008000; font-weight: bold">if</span> (ch <span style="color: #AA22FF; font-weight: bold">in</span> [<span style="color: #BA2121">&#39;Z&#39;</span>, <span style="color: #BA2121">&#39;I&#39;</span>, <span style="color: #BA2121">&#39;A&#39;</span>, <span style="color: #BA2121">&#39;a&#39;</span>, <span style="color: #BA2121">&#39;p&#39;</span>, <span style="color: #BA2121">&#39;P&#39;</span>, <span style="color: #BA2121">&#39;(&#39;</span>]) <span style="color: #AA22FF; font-weight: bold">and</span> (eq_list[n <span style="color: #666666">-</span> <span style="color: #666666">1</span>] <span style="color: #AA22FF; font-weight: bold">in</span> nums) <span style="color: #AA22FF; font-weight: bold">and</span> n <span style="color: #666666">&gt;</span> <span style="color: #666666">0</span>:
            eq_list<span style="color: #666666">.</span>insert(n, <span style="color: #BA2121">&#39;*&#39;</span>)
    <span style="color: #408080; font-style: italic"># Convert back into string</span>
    eq <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;&#39;</span><span style="color: #666666">.</span>join(eq_list)
    <span style="color: #408080; font-style: italic"># Substitute z for x+yi</span>
    eq <span style="color: #666666">=</span> eq<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39;Z&#39;</span>, <span style="color: #BA2121">&#39;(x+y*I)&#39;</span>)

    <span style="color: #408080; font-style: italic"># While there are still modulus lines</span>
    <span style="color: #008000; font-weight: bold">while</span> <span style="color: #BA2121">&#39;|&#39;</span> <span style="color: #AA22FF; font-weight: bold">in</span> eq:
        <span style="color: #408080; font-style: italic"># Find first modulus line</span>
        a <span style="color: #666666">=</span> eq<span style="color: #666666">.</span>find(<span style="color: #BA2121">&#39;|&#39;</span>)
        <span style="color: #408080; font-style: italic"># Find matching line</span>
        b <span style="color: #666666">=</span> eq<span style="color: #666666">.</span>find(<span style="color: #BA2121">&#39;|&#39;</span>, a<span style="color: #666666">+1</span>)
        <span style="color: #408080; font-style: italic"># Parse everything between modulus lines according to formula</span>
        eq <span style="color: #666666">=</span> eq[:a] <span style="color: #666666">+</span> parse_mod(eq[a <span style="color: #666666">+</span> <span style="color: #666666">1</span>:b]) <span style="color: #666666">+</span> eq[b <span style="color: #666666">+</span> <span style="color: #666666">1</span>:]

    <span style="color: #408080; font-style: italic"># While there is still an argument funcion in the equation</span>
    <span style="color: #008000; font-weight: bold">while</span> <span style="color: #BA2121">&#39;arg(&#39;</span> <span style="color: #AA22FF; font-weight: bold">in</span> eq:
        <span style="color: #408080; font-style: italic"># Find occurence of function</span>
        <span style="color: #408080; font-style: italic"># a is the index of the start of the inner expression</span>
        <span style="color: #408080; font-style: italic"># Also initialise b to this value</span>
        a, b <span style="color: #666666">=</span> eq<span style="color: #666666">.</span>find(<span style="color: #BA2121">&#39;arg(&#39;</span>) <span style="color: #666666">+</span> <span style="color: #666666">4</span>, eq<span style="color: #666666">.</span>find(<span style="color: #BA2121">&#39;arg(&#39;</span>) <span style="color: #666666">+</span> <span style="color: #666666">4</span>
        <span style="color: #408080; font-style: italic"># Find correct enclosing bracket</span>
        found <span style="color: #666666">=</span> <span style="color: #666666">0</span>
        <span style="color: #008000; font-weight: bold">while</span> found <span style="color: #666666">&gt;=</span> <span style="color: #666666">0</span>:
            <span style="color: #408080; font-style: italic"># Add 1 if open bracket, subtract 1 if close bracket</span>
            found <span style="color: #666666">+=</span> <span style="color: #666666">1</span> <span style="color: #008000; font-weight: bold">if</span> eq[b] <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;(&#39;</span> <span style="color: #008000; font-weight: bold">else</span> <span style="color: #666666">0</span>
            found <span style="color: #666666">-=</span> <span style="color: #666666">1</span> <span style="color: #008000; font-weight: bold">if</span> eq[b] <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;)&#39;</span> <span style="color: #008000; font-weight: bold">else</span> <span style="color: #666666">0</span>
            <span style="color: #408080; font-style: italic"># Increment counter</span>
            b <span style="color: #666666">+=</span> <span style="color: #666666">1</span>
            <span style="color: #408080; font-style: italic"># When found is less than 0, then the correct close bracket is found</span>
        <span style="color: #408080; font-style: italic"># Parse everything between modulus lines according to formula</span>
        eq <span style="color: #666666">=</span> eq[:a <span style="color: #666666">-</span> <span style="color: #666666">4</span>] <span style="color: #666666">+</span> parse_arg(eq[a:b <span style="color: #666666">-</span> <span style="color: #666666">1</span>]) <span style="color: #666666">+</span> eq[b:]
    <span style="color: #008000; font-weight: bold">return</span> eq

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">parse_inequality</span>(eq):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return type of (in)equality as string&quot;&quot;&quot;</span>
    <span style="color: #008000; font-weight: bold">if</span> <span style="color: #BA2121">&#39;&lt;=&#39;</span> <span style="color: #AA22FF; font-weight: bold">in</span> eq:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #BA2121">&#39;&lt;=&#39;</span>
    <span style="color: #008000; font-weight: bold">elif</span> <span style="color: #BA2121">&#39;&gt;=&#39;</span> <span style="color: #AA22FF; font-weight: bold">in</span> eq:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #BA2121">&#39;&gt;=&#39;</span>
    <span style="color: #008000; font-weight: bold">elif</span> <span style="color: #BA2121">&#39;&gt;&#39;</span> <span style="color: #AA22FF; font-weight: bold">in</span> eq:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #BA2121">&#39;&gt;&#39;</span>
    <span style="color: #008000; font-weight: bold">elif</span> <span style="color: #BA2121">&#39;&lt;&#39;</span> <span style="color: #AA22FF; font-weight: bold">in</span> eq:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #BA2121">&#39;&lt;&#39;</span>
    <span style="color: #008000; font-weight: bold">else</span>:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #BA2121">&#39;=&#39;</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">get_implicit</span>(eq, latx<span style="color: #666666">=</span><span style="color: #008000">False</span>):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return implicit equation in x and y&quot;&quot;&quot;</span>
    <span style="color: #408080; font-style: italic"># Get the type of (in)equality the expression is</span>
    op <span style="color: #666666">=</span> parse_inequality(eq)
    <span style="color: #408080; font-style: italic"># Split it up depending on the type of expression</span>
    lhs, rhs <span style="color: #666666">=</span> eq<span style="color: #666666">.</span>split(op)

    <span style="color: #408080; font-style: italic"># Set up symbols</span>
    x, y <span style="color: #666666">=</span> symbols(<span style="color: #BA2121">&#39;x y&#39;</span>, real<span style="color: #666666">=</span><span style="color: #008000">True</span>)
    locs <span style="color: #666666">=</span> {<span style="color: #BA2121">&#39;x&#39;</span>: x, <span style="color: #BA2121">&#39;y&#39;</span>: y}
    <span style="color: #408080; font-style: italic"># Parse both the left and right hand side</span>
    <span style="color: #408080; font-style: italic"># Convert to sympy objects based on set up variables</span>
    lhs <span style="color: #666666">=</span> parse(lhs)
    lhs <span style="color: #666666">=</span> sympify(lhs, <span style="color: #008000">locals</span><span style="color: #666666">=</span>locs)

    rhs <span style="color: #666666">=</span> parse(rhs)
    rhs <span style="color: #666666">=</span> sympify(rhs, <span style="color: #008000">locals</span><span style="color: #666666">=</span>locs)

    <span style="color: #408080; font-style: italic"># Put equation in the form f(x,y)=0 and simplify</span>
    eq <span style="color: #666666">=</span> lhs <span style="color: #666666">-</span> rhs
    eq <span style="color: #666666">=</span> eq<span style="color: #666666">.</span>simplify()
    <span style="color: #008000; font-weight: bold">if</span> latx:
        <span style="color: #408080; font-style: italic"># Convert to format desmos understands (latex)</span>
        <span style="color: #008000; font-weight: bold">return</span> ((latex(eq)) <span style="color: #666666">+</span> <span style="color: #BA2121">&#39; &#39;</span> <span style="color: #666666">+</span> op <span style="color: #666666">+</span> <span style="color: #BA2121">&#39; 0&#39;</span>)<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39;atan&#39;</span>, <span style="color: #BA2121">&#39;arctan&#39;</span>)
    <span style="color: #008000; font-weight: bold">else</span>:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">str</span>(eq) <span style="color: #666666">+</span> op <span style="color: #666666">+</span> <span style="color: #BA2121">&#39;0&#39;</span>


<span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">__name__</span> <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;__main__&#39;</span>:
    <span style="color: #008000; font-weight: bold">print</span>(parse(<span style="color: #BA2121">&#39;arg(z+1)-arg(z-1)&#39;</span>))
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/pyscripts/complex_questions.py</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">sympy</span> <span style="color: #008000; font-weight: bold">import</span> im, re
<span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">random</span>
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">cmath</span> <span style="color: #008000; font-weight: bold">import</span> phase
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">app.pyscripts.base_question</span> <span style="color: #008000; font-weight: bold">import</span> BaseQuestion


<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">ComplexQuestion</span>(BaseQuestion):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Class for creating matrix questions, inherits from BaseQuestion.&quot;&quot;&quot;</span>

    <span style="color: #AA22FF">@staticmethod</span>
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">get_question</span>(q_type):
        <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return a question object given a question type.&quot;&quot;&quot;</span>
        <span style="color: #008000; font-weight: bold">if</span> q_type <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;add_sub&#39;</span>:
            question, answer <span style="color: #666666">=</span> add_sub_question()
        <span style="color: #008000; font-weight: bold">elif</span> q_type <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;mult&#39;</span>:
            question, answer <span style="color: #666666">=</span> mult_question()
        <span style="color: #008000; font-weight: bold">elif</span> q_type <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;div&#39;</span>:
            question, answer <span style="color: #666666">=</span> div_question()
        <span style="color: #008000; font-weight: bold">elif</span> q_type <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;mod_arg&#39;</span>:
            question, answer <span style="color: #666666">=</span> mod_arg_question()
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #008000; font-weight: bold">raise</span> <span style="color: #D2413A; font-weight: bold">ValueError</span>
        <span style="color: #008000; font-weight: bold">return</span> ComplexQuestion(question, answer, q_type)

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">is_mod_arg</span>(<span style="color: #008000">self</span>):
        <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return true if the object is a modulus argument question.&quot;&quot;&quot;</span>
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>question_type <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;mod_arg&#39;</span>:
            <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">True</span>
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">False</span>


<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">add_sub_question</span>():
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return random question and answer pair for addition and subtraction.&quot;&quot;&quot;</span>
    <span style="color: #408080; font-style: italic"># Generate 2 random complex numbers</span>
    a <span style="color: #666666">=</span> random<span style="color: #666666">.</span>randint(<span style="color: #666666">1</span>, <span style="color: #666666">10</span>) <span style="color: #666666">+</span> random<span style="color: #666666">.</span>randint(<span style="color: #666666">1</span>, <span style="color: #666666">10</span>) <span style="color: #666666">*</span> <span style="color: #666666">1j</span>
    b <span style="color: #666666">=</span> random<span style="color: #666666">.</span>randint(<span style="color: #666666">1</span>, <span style="color: #666666">10</span>) <span style="color: #666666">+</span> random<span style="color: #666666">.</span>randint(<span style="color: #666666">1</span>, <span style="color: #666666">10</span>) <span style="color: #666666">*</span> <span style="color: #666666">1j</span>
    <span style="color: #408080; font-style: italic"># Choose random operatot</span>
    rand_op <span style="color: #666666">=</span> random<span style="color: #666666">.</span>choice([<span style="color: #BA2121">&#39;+&#39;</span>, <span style="color: #BA2121">&#39;-&#39;</span>])
    <span style="color: #408080; font-style: italic"># Calculate answer and create question based on which opertor was chosen</span>
    <span style="color: #008000; font-weight: bold">if</span> rand_op <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;+&#39;</span>:
        answer <span style="color: #666666">=</span> a<span style="color: #666666">+</span>b
        question <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;Calculate  `&quot;</span> <span style="color: #666666">+</span> <span style="color: #008000">str</span>(a)<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39;j&#39;</span>, <span style="color: #BA2121">&#39;i&#39;</span>) <span style="color: #666666">+</span> <span style="color: #BA2121">&quot;` + `&quot;</span><span style="color: #666666">+</span><span style="color: #008000">str</span>(b)<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39;j&#39;</span>, <span style="color: #BA2121">&#39;i&#39;</span>) <span style="color: #666666">+</span> <span style="color: #BA2121">&quot;`&quot;</span>
    <span style="color: #008000; font-weight: bold">else</span>:
        answer <span style="color: #666666">=</span> a<span style="color: #666666">-</span>b
        question <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;Calculate  `&quot;</span> <span style="color: #666666">+</span> <span style="color: #008000">str</span>(a)<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39;j&#39;</span>, <span style="color: #BA2121">&#39;i&#39;</span>) <span style="color: #666666">+</span> <span style="color: #BA2121">&quot;` - `&quot;</span><span style="color: #666666">+</span><span style="color: #008000">str</span>(b)<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39;j&#39;</span>, <span style="color: #BA2121">&#39;i&#39;</span>) <span style="color: #666666">+</span> <span style="color: #BA2121">&quot;`&quot;</span>
    <span style="color: #008000; font-weight: bold">return</span> (question, answer)


<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">mult_question</span>():
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return random question and answer pair for multiplication.&quot;&quot;&quot;</span>
    <span style="color: #408080; font-style: italic"># Generate 2 random complex numbers</span>
    a <span style="color: #666666">=</span> random<span style="color: #666666">.</span>randint(<span style="color: #666666">1</span>, <span style="color: #666666">10</span>) <span style="color: #666666">+</span> random<span style="color: #666666">.</span>randint(<span style="color: #666666">1</span>, <span style="color: #666666">10</span>) <span style="color: #666666">*</span> <span style="color: #666666">1j</span>
    b <span style="color: #666666">=</span> random<span style="color: #666666">.</span>randint(<span style="color: #666666">1</span>, <span style="color: #666666">10</span>) <span style="color: #666666">+</span> random<span style="color: #666666">.</span>randint(<span style="color: #666666">1</span>, <span style="color: #666666">10</span>) <span style="color: #666666">*</span> <span style="color: #666666">1j</span>
    <span style="color: #408080; font-style: italic"># Calculate answer and generate question with the random numbers</span>
    answer <span style="color: #666666">=</span> a <span style="color: #666666">*</span> b
    question <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;Calculate  `&quot;</span> <span style="color: #666666">+</span> <span style="color: #008000">str</span>(a)<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39;j&#39;</span>, <span style="color: #BA2121">&#39;i&#39;</span>) <span style="color: #666666">+</span> <span style="color: #BA2121">&quot;` * `&quot;</span><span style="color: #666666">+</span><span style="color: #008000">str</span>(b)<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39;j&#39;</span>, <span style="color: #BA2121">&#39;i&#39;</span>) <span style="color: #666666">+</span> <span style="color: #BA2121">&quot;`&quot;</span>
    <span style="color: #008000; font-weight: bold">return</span> (question, answer)


<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">div_question</span>():
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return random question and answer pair for division.&quot;&quot;&quot;</span>
    <span style="color: #408080; font-style: italic"># Generate 2 random complex numbers</span>
    a <span style="color: #666666">=</span> random<span style="color: #666666">.</span>randint(<span style="color: #666666">1</span>, <span style="color: #666666">10</span>) <span style="color: #666666">+</span> random<span style="color: #666666">.</span>randint(<span style="color: #666666">1</span>, <span style="color: #666666">10</span>) <span style="color: #666666">*</span> <span style="color: #666666">1j</span>
    b <span style="color: #666666">=</span> random<span style="color: #666666">.</span>randint(<span style="color: #666666">1</span>, <span style="color: #666666">10</span>) <span style="color: #666666">+</span> random<span style="color: #666666">.</span>randint(<span style="color: #666666">1</span>, <span style="color: #666666">10</span>) <span style="color: #666666">*</span> <span style="color: #666666">1j</span>
    <span style="color: #408080; font-style: italic"># Calculate answer and generate question with the random numbers</span>
    ans <span style="color: #666666">=</span> a <span style="color: #666666">/</span> b
    <span style="color: #408080; font-style: italic"># Round both parts to 2 dp</span>
    answer <span style="color: #666666">=</span> <span style="color: #008000">round</span>(im(ans), <span style="color: #666666">2</span>) <span style="color: #666666">*</span> <span style="color: #666666">1j</span> <span style="color: #666666">+</span> <span style="color: #008000">round</span>(re(ans), <span style="color: #666666">2</span>)
    question <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;Calculate `&quot;</span> <span style="color: #666666">+</span> <span style="color: #008000">str</span>(a)<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39;j&#39;</span>, <span style="color: #BA2121">&#39;i&#39;</span>) <span style="color: #666666">+</span> <span style="color: #BA2121">&quot; / &quot;</span><span style="color: #666666">+</span><span style="color: #008000">str</span>(b)<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39;j&#39;</span>, <span style="color: #BA2121">&#39;i&#39;</span>) <span style="color: #666666">+</span> <span style="color: #BA2121">&quot;` (2 decimal places)&quot;</span>
    <span style="color: #008000; font-weight: bold">return</span> (question, answer)


<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">mod_arg_question</span>():
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return random question and answer pair for modulus and argument.&quot;&quot;&quot;</span>
    <span style="color: #408080; font-style: italic"># Generate 2 random complex numbers</span>
    a <span style="color: #666666">=</span> random<span style="color: #666666">.</span>randint(<span style="color: #666666">1</span>, <span style="color: #666666">10</span>)<span style="color: #666666">+</span>random<span style="color: #666666">.</span>randint(<span style="color: #666666">1</span>, <span style="color: #666666">10</span>) <span style="color: #666666">*</span> <span style="color: #666666">1j</span>
    <span style="color: #408080; font-style: italic"># Calculate answer and generate question with the random numbers</span>
    mod <span style="color: #666666">=</span> <span style="color: #008000">round</span>(<span style="color: #008000">abs</span>(a), <span style="color: #666666">2</span>)   <span style="color: #408080; font-style: italic"># Round both to two dp</span>
    arg <span style="color: #666666">=</span> <span style="color: #008000">round</span>(phase(a), <span style="color: #666666">2</span>)
    answer <span style="color: #666666">=</span> (mod, arg)
    question <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;Find, to two decimal places, the modulus and argument of  `&#39;</span><span style="color: #666666">+</span><span style="color: #008000">str</span>(a)<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39;j&#39;</span>, <span style="color: #BA2121">&#39;i&#39;</span>)<span style="color: #666666">+</span><span style="color: #BA2121">&#39;`&#39;</span>
    <span style="color: #008000; font-weight: bold">return</span> (question, answer)
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/pyscripts/matrices.py</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">fractions</span>


<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">MatrixError</span>(<span style="color: #D2413A; font-weight: bold">Exception</span>):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;An exception class for Matrix.&quot;&quot;&quot;</span>

    <span style="color: #008000; font-weight: bold">pass</span>


<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Matrix</span>(<span style="color: #008000">object</span>):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Class for matrix operations.&quot;&quot;&quot;</span>

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>, rows):
        <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return Matrix object given 2D list.&quot;&quot;&quot;</span>
        <span style="color: #008000">self</span><span style="color: #666666">.</span>y <span style="color: #666666">=</span> <span style="color: #008000">len</span>(rows)
        <span style="color: #008000">self</span><span style="color: #666666">.</span>x <span style="color: #666666">=</span> <span style="color: #008000">len</span>(rows[<span style="color: #666666">0</span>])
        <span style="color: #008000; font-weight: bold">for</span> row <span style="color: #AA22FF; font-weight: bold">in</span> rows:
            <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">len</span>(row) <span style="color: #666666">!=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>x:
                <span style="color: #408080; font-style: italic"># All rows have to be the same row for a valid matrix</span>
                <span style="color: #008000; font-weight: bold">raise</span> MatrixError
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #008000">self</span><span style="color: #666666">.</span>rows <span style="color: #666666">=</span> [<span style="color: #008000">list</span>(row) <span style="color: #008000; font-weight: bold">for</span> row <span style="color: #AA22FF; font-weight: bold">in</span> rows]

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__add__</span>(<span style="color: #008000">self</span>, other):
        <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Override add operator to add matrix objects.&quot;&quot;&quot;</span>
        <span style="color: #408080; font-style: italic"># Can only add matrices to matrices</span>
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">type</span>(other) <span style="color: #666666">!=</span> Matrix:
            <span style="color: #008000; font-weight: bold">raise</span> <span style="color: #D2413A; font-weight: bold">TypeError</span>
        <span style="color: #408080; font-style: italic"># Both matrices have to be the same size to add</span>
        <span style="color: #008000; font-weight: bold">elif</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>get_dimensions() <span style="color: #666666">!=</span> other<span style="color: #666666">.</span>get_dimensions():
            <span style="color: #008000; font-weight: bold">raise</span> MatrixError
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #408080; font-style: italic"># Create empty result list</span>
            result <span style="color: #666666">=</span> []
            <span style="color: #008000; font-weight: bold">for</span> y <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">self</span><span style="color: #666666">.</span>y):
                <span style="color: #408080; font-style: italic"># Add empty row to result list</span>
                result<span style="color: #666666">.</span>append([])
                <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">self</span><span style="color: #666666">.</span>x):
                    <span style="color: #408080; font-style: italic"># Add values and add to row</span>
                    result[y]<span style="color: #666666">.</span>append(<span style="color: #008000">self</span><span style="color: #666666">.</span>rows[y][x] <span style="color: #666666">+</span> other<span style="color: #666666">.</span>rows[y][x])
            <span style="color: #008000; font-weight: bold">return</span> Matrix(result)

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__sub__</span>(<span style="color: #008000">self</span>, other):
        <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Override subtract operator to subtract matrix objects.&quot;&quot;&quot;</span>
        <span style="color: #408080; font-style: italic"># Can only subtract matrices from matrices</span>
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">type</span>(other) <span style="color: #666666">!=</span> Matrix:
            <span style="color: #008000; font-weight: bold">raise</span> <span style="color: #D2413A; font-weight: bold">TypeError</span>
        <span style="color: #408080; font-style: italic"># Both matrices have to be the same size to subtract</span>
        <span style="color: #008000; font-weight: bold">elif</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>get_dimensions() <span style="color: #666666">!=</span> other<span style="color: #666666">.</span>get_dimensions():
            <span style="color: #008000; font-weight: bold">raise</span> MatrixError
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #408080; font-style: italic"># Create empty result list</span>
            result <span style="color: #666666">=</span> []
            <span style="color: #008000; font-weight: bold">for</span> y <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">self</span><span style="color: #666666">.</span>y):
                <span style="color: #408080; font-style: italic"># Add empty row to result list</span>
                result<span style="color: #666666">.</span>append([])
                <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">self</span><span style="color: #666666">.</span>x):
                    <span style="color: #408080; font-style: italic"># Subtract values and add to row</span>
                    result[y]<span style="color: #666666">.</span>append(<span style="color: #008000">self</span><span style="color: #666666">.</span>rows[y][x] <span style="color: #666666">-</span> other<span style="color: #666666">.</span>rows[y][x])
            <span style="color: #008000; font-weight: bold">return</span> Matrix(result)

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__mul__</span>(<span style="color: #008000">self</span>, other):
        <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Override multiply operator to multiply matrix objects.&quot;&quot;&quot;</span>
        <span style="color: #408080; font-style: italic"># Can only multiply a matrix by an integer, float or another matrix</span>
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">type</span>(other) <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #AA22FF; font-weight: bold">in</span> [Matrix, <span style="color: #008000">int</span>, <span style="color: #008000">float</span>]:
            <span style="color: #008000; font-weight: bold">raise</span> <span style="color: #D2413A; font-weight: bold">TypeError</span>
        <span style="color: #408080; font-style: italic"># Can only multiply by another matrix if width of one is height of other</span>
        <span style="color: #008000; font-weight: bold">elif</span> <span style="color: #008000">type</span>(other) <span style="color: #666666">==</span> Matrix <span style="color: #AA22FF; font-weight: bold">and</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>get_dimensions()[<span style="color: #666666">1</span>] <span style="color: #666666">!=</span> other<span style="color: #666666">.</span>get_dimensions()[<span style="color: #666666">0</span>]:
            <span style="color: #008000; font-weight: bold">raise</span> MatrixError
        <span style="color: #408080; font-style: italic"># If multiplying by a int or float, multiply each element in matrix by the int or float</span>
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">type</span>(other) <span style="color: #666666">==</span> <span style="color: #008000">int</span> <span style="color: #AA22FF; font-weight: bold">or</span> <span style="color: #008000">type</span>(other) <span style="color: #666666">==</span> <span style="color: #008000">float</span>:
            result <span style="color: #666666">=</span> [[<span style="color: #666666">0</span> <span style="color: #008000; font-weight: bold">for</span> y <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">self</span><span style="color: #666666">.</span>get_dimensions()[<span style="color: #666666">1</span>])]
                      <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">self</span><span style="color: #666666">.</span>get_dimensions()[<span style="color: #666666">0</span>])]
            <span style="color: #008000; font-weight: bold">for</span> y <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">self</span><span style="color: #666666">.</span>y):
                <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">self</span><span style="color: #666666">.</span>x):
                    result[y][x] <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>rows[y][x] <span style="color: #666666">*</span> other
        <span style="color: #408080; font-style: italic"># If multiplying by another matrix, more complex</span>
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #408080; font-style: italic"># Empty result 2-d array with zeroes with correct dimensions</span>
            result <span style="color: #666666">=</span> [[<span style="color: #666666">0</span> <span style="color: #008000; font-weight: bold">for</span> y <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(other<span style="color: #666666">.</span>get_dimensions()[<span style="color: #666666">1</span>])]
                      <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">self</span><span style="color: #666666">.</span>get_dimensions()[<span style="color: #666666">0</span>])]
            <span style="color: #408080; font-style: italic"># Get data from 2 matrix objects</span>
            a <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>rows
            b <span style="color: #666666">=</span> other<span style="color: #666666">.</span>rows
            <span style="color: #008000; font-weight: bold">for</span> row <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">len</span>(a)):
                <span style="color: #008000; font-weight: bold">for</span> column <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">len</span>(b[<span style="color: #666666">0</span>])):
                    tot <span style="color: #666666">=</span> <span style="color: #666666">0</span>
                    <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">len</span>(a[<span style="color: #666666">0</span>])):
                        tot <span style="color: #666666">+=</span> a[row][x] <span style="color: #666666">*</span> b[x][column]
                    result[row][column] <span style="color: #666666">=</span> tot
        <span style="color: #008000; font-weight: bold">return</span> Matrix(result)

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">tostr</span>(<span style="color: #008000">self</span>):
        <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return Matrix with all elements converted to strings.&quot;&quot;&quot;</span>
        rows <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>rows
        <span style="color: #008000; font-weight: bold">return</span> Matrix(
            [[<span style="color: #008000">str</span>(rows[y][x]) <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">self</span><span style="color: #666666">.</span>x)] <span style="color: #008000; font-weight: bold">for</span> y <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">self</span><span style="color: #666666">.</span>y)]
                )

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">get_dimensions</span>(<span style="color: #008000">self</span>):
        <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return dimensions of the matrix as a tuple.&quot;&quot;&quot;</span>
        <span style="color: #008000; font-weight: bold">return</span> (<span style="color: #008000">self</span><span style="color: #666666">.</span>y, <span style="color: #008000">self</span><span style="color: #666666">.</span>x)

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">get_rows</span>(<span style="color: #008000">self</span>):
        <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Get matrix data.&quot;&quot;&quot;</span>
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>rows

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">transpose</span>(<span style="color: #008000">self</span>):
        <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Returned transposed matrix object.&quot;&quot;&quot;</span>
        rows <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>rows
        <span style="color: #408080; font-style: italic"># List comprehension to flip matrix</span>
        <span style="color: #008000; font-weight: bold">return</span> Matrix(
            [[rows[x][y] <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">self</span><span style="color: #666666">.</span>x)] <span style="color: #008000; font-weight: bold">for</span> y <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">self</span><span style="color: #666666">.</span>y)]
                )

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">determinant</span>(<span style="color: #008000">self</span>):
        <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return determinant of matrix as a float or int.&quot;&quot;&quot;</span>
        rows <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>rows
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>x <span style="color: #666666">!=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>y:
            <span style="color: #008000; font-weight: bold">raise</span> MatrixError
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>x <span style="color: #666666">==</span> <span style="color: #666666">2</span>:
            <span style="color: #408080; font-style: italic"># For a 2x2 matrix [[a,b],[c,d]], the determinant is a*d-b*c</span>
            det <span style="color: #666666">=</span> ((rows[<span style="color: #666666">0</span>][<span style="color: #666666">0</span>]) <span style="color: #666666">*</span> (rows[<span style="color: #666666">1</span>][<span style="color: #666666">1</span>])) <span style="color: #666666">-</span> (rows[<span style="color: #666666">0</span>][<span style="color: #666666">1</span>] <span style="color: #666666">*</span> rows[<span style="color: #666666">1</span>][<span style="color: #666666">0</span>])
            <span style="color: #008000; font-weight: bold">return</span> det
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #408080; font-style: italic"># For larger matrices</span>
            <span style="color: #408080; font-style: italic"># Get the top row of the matrix</span>
            top_row <span style="color: #666666">=</span> rows[<span style="color: #666666">0</span>]
            <span style="color: #408080; font-style: italic"># Initialize det variable</span>
            det <span style="color: #666666">=</span> <span style="color: #666666">0</span>
            <span style="color: #408080; font-style: italic"># Loop over each item in the top row</span>
            <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">len</span>(top_row)):
                <span style="color: #408080; font-style: italic"># Find the inner matrix</span>
                <span style="color: #408080; font-style: italic"># (the matrix got when you delete the row and column the item is in)</span>
                inner_mat <span style="color: #666666">=</span> [[b <span style="color: #008000; font-weight: bold">for</span> a, b <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">enumerate</span>(
                    i) <span style="color: #008000; font-weight: bold">if</span> a <span style="color: #666666">!=</span> x] <span style="color: #008000; font-weight: bold">for</span> i <span style="color: #AA22FF; font-weight: bold">in</span> rows[<span style="color: #666666">1</span>:]]
                inner_mat <span style="color: #666666">=</span> Matrix(inner_mat)
                <span style="color: #408080; font-style: italic"># Find the determinant of the inner matrix</span>
                <span style="color: #408080; font-style: italic"># Multiply by the value in the row</span>
                <span style="color: #408080; font-style: italic"># Add or subtract depending on where in the row it is</span>
                det <span style="color: #666666">+=</span> (<span style="color: #666666">-1</span>)<span style="color: #666666">**</span>x <span style="color: #666666">*</span> top_row[x] <span style="color: #666666">*</span> inner_mat<span style="color: #666666">.</span>determinant()
            <span style="color: #008000; font-weight: bold">return</span> det

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">display</span>(<span style="color: #008000">self</span>):
        <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Print Matrix.&quot;&quot;&quot;</span>
        <span style="color: #008000; font-weight: bold">for</span> row <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>rows:
            <span style="color: #008000; font-weight: bold">for</span> value <span style="color: #AA22FF; font-weight: bold">in</span> row:
                <span style="color: #008000; font-weight: bold">print</span>(value, end<span style="color: #666666">=</span><span style="color: #BA2121">&quot; &quot;</span>)
            <span style="color: #008000; font-weight: bold">print</span>(<span style="color: #BA2121">&#39;</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&#39;</span>, end<span style="color: #666666">=</span><span style="color: #BA2121">&#39;&#39;</span>)

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">triangle</span>(<span style="color: #008000">self</span>):
        <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return Matrix in triangle form.&quot;&quot;&quot;</span>
        n <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>x
        rows <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>rows
        <span style="color: #408080; font-style: italic"># Loop from 0 to width-1</span>
        <span style="color: #008000; font-weight: bold">for</span> i <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(n <span style="color: #666666">-</span> <span style="color: #666666">1</span>):
            <span style="color: #008000; font-weight: bold">if</span> rows[i][i] <span style="color: #666666">==</span> <span style="color: #666666">0</span>:
                <span style="color: #008000; font-weight: bold">for</span> j <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(i <span style="color: #666666">+</span> <span style="color: #666666">1</span>, n):
                    <span style="color: #008000; font-weight: bold">if</span> rows[j][i] <span style="color: #666666">==</span> <span style="color: #666666">0</span>:
                        <span style="color: #408080; font-style: italic"># If all elements in the column are 0, do not swap rows</span>
                        <span style="color: #008000; font-weight: bold">continue</span>
                    <span style="color: #008000; font-weight: bold">else</span>:
                        <span style="color: #408080; font-style: italic"># Swap rows numbered j and i</span>
                        rows[j], rows[i] <span style="color: #666666">=</span> rows[i], rows[j]
            <span style="color: #008000; font-weight: bold">else</span>:
                <span style="color: #008000; font-weight: bold">for</span> k <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(i <span style="color: #666666">+</span> <span style="color: #666666">1</span>, n):
                    <span style="color: #408080; font-style: italic"># Get ratio between item in row i and row k (under i)</span>
                    ratio <span style="color: #666666">=</span> fractions<span style="color: #666666">.</span>Fraction(rows[k][i], rows[i][i])
                    <span style="color: #008000; font-weight: bold">for</span> r <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(i, n, <span style="color: #666666">1</span>):
                        <span style="color: #408080; font-style: italic"># Subtract this row from row above * the ratio</span>
                        <span style="color: #408080; font-style: italic"># Means there is a 0 in first column(s)</span>
                        rows[k][r] <span style="color: #666666">-=</span> ratio <span style="color: #666666">*</span> rows[i][r]
        <span style="color: #008000; font-weight: bold">return</span> Matrix(rows)

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">cofactors</span>(<span style="color: #008000">self</span>):
        <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return cofactor matrix object.&quot;&quot;&quot;</span>
        co_mat <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>rows
        <span style="color: #008000; font-weight: bold">for</span> y <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">len</span>(co_mat)):
            <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">len</span>(co_mat[<span style="color: #666666">0</span>])):
                inner_mat <span style="color: #666666">=</span> [[b <span style="color: #008000; font-weight: bold">for</span> a, b <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">enumerate</span>(
                    j) <span style="color: #008000; font-weight: bold">if</span> a <span style="color: #666666">!=</span> x] <span style="color: #008000; font-weight: bold">for</span> i, j <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">enumerate</span>(co_mat) <span style="color: #008000; font-weight: bold">if</span> i <span style="color: #666666">!=</span> y]
                inner_mat <span style="color: #666666">=</span> Matrix(inner_mat)
                co_mat[y][x] <span style="color: #666666">=</span> (<span style="color: #666666">-1</span>) <span style="color: #666666">**</span> (x <span style="color: #666666">+</span> y) <span style="color: #666666">*</span> inner_mat<span style="color: #666666">.</span>determinant()
        <span style="color: #008000; font-weight: bold">return</span> Matrix(co_mat)

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">adjoint</span>(<span style="color: #008000">self</span>):
        <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return adjoint of matrix.&quot;&quot;&quot;</span>
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>cofactors()<span style="color: #666666">.</span>transpose()

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">inverse</span>(<span style="color: #008000">self</span>):
        <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return inverse of matrix.&quot;&quot;&quot;</span>
        <span style="color: #408080; font-style: italic"># Can only find inverse of a square matrix</span>
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>x <span style="color: #666666">!=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>y:
            <span style="color: #008000; font-weight: bold">raise</span> MatrixError
        det <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>determinant()
        <span style="color: #408080; font-style: italic"># Can only find inverse if determinant is not 0</span>
        <span style="color: #008000; font-weight: bold">if</span> det <span style="color: #666666">==</span> <span style="color: #666666">0</span>:
            <span style="color: #008000; font-weight: bold">raise</span> MatrixError
        <span style="color: #408080; font-style: italic"># Find the transpose of the cofactor matrix (the adjoint)</span>
        c_t <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>adjoint()<span style="color: #666666">.</span>get_rows()
        <span style="color: #408080; font-style: italic"># Divide every item in c_t by the determinant</span>
        <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">len</span>(c_t)):
            <span style="color: #008000; font-weight: bold">for</span> y <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">len</span>(c_t[<span style="color: #666666">0</span>])):
                c_t[x][y] <span style="color: #666666">=</span> fractions<span style="color: #666666">.</span>Fraction(c_t[x][y] <span style="color: #666666">/</span> det)<span style="color: #666666">.</span>limit_denominator()
        <span style="color: #008000; font-weight: bold">return</span> Matrix(c_t)
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/pyscripts/matrix_questions.py</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">app.pyscripts.matrices</span> <span style="color: #008000; font-weight: bold">import</span> Matrix
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">app.pyscripts.base_question</span> <span style="color: #008000; font-weight: bold">import</span> BaseQuestion
<span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">random</span>


<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">MatrixQuestion</span>(BaseQuestion):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Class for creating matrix questions, inherits from BaseQuestion.&quot;&quot;&quot;</span>

    <span style="color: #AA22FF">@staticmethod</span>
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">get_question</span>(q_type):
        <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return matrix question object given question type.&quot;&quot;&quot;</span>
        <span style="color: #008000; font-weight: bold">if</span> q_type <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;add_sub&#39;</span>:
            question, answer <span style="color: #666666">=</span> add_sub_question()
        <span style="color: #008000; font-weight: bold">elif</span> q_type <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;mult&#39;</span>:
            question, answer <span style="color: #666666">=</span> mult_question()
        <span style="color: #008000; font-weight: bold">elif</span> q_type <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;inv&#39;</span>:
            question, answer <span style="color: #666666">=</span> inv_question()
        <span style="color: #008000; font-weight: bold">elif</span> q_type <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;det&#39;</span>:
            question, answer <span style="color: #666666">=</span> det_question()
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #008000; font-weight: bold">raise</span> <span style="color: #D2413A; font-weight: bold">ValueError</span>
        <span style="color: #008000; font-weight: bold">return</span> MatrixQuestion(question, answer, q_type)

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">get_answer</span>(<span style="color: #008000">self</span>):
        <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Override get_answer as matrix type answers need to also call get_rows.&quot;&quot;&quot;</span>
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>question_type <span style="color: #666666">!=</span> <span style="color: #BA2121">&#39;det&#39;</span>:
            <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>answer<span style="color: #666666">.</span>get_rows()
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>answer

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">is_mat_ans</span>(<span style="color: #008000">self</span>):
        <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return True if answer is a matrix.&quot;&quot;&quot;</span>
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">type</span>(<span style="color: #008000">self</span><span style="color: #666666">.</span>answer) <span style="color: #666666">!=</span> Matrix:
            <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">False</span>
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">True</span>

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">get_ans_dim</span>(<span style="color: #008000">self</span>):
        <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return dimensions if answer is a matrix, otherwise return 0.&quot;&quot;&quot;</span>
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">type</span>(<span style="color: #008000">self</span><span style="color: #666666">.</span>answer) <span style="color: #666666">==</span> Matrix:
            <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>answer<span style="color: #666666">.</span>get_dimensions()
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>


<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">mult_question</span>():
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return random question and answer pair for multiplication.&quot;&quot;&quot;</span>
    <span style="color: #408080; font-style: italic"># Choose a random size for first matrix</span>
    y1 <span style="color: #666666">=</span> random<span style="color: #666666">.</span>randint(<span style="color: #666666">1</span>, <span style="color: #666666">2</span>)
    x1 <span style="color: #666666">=</span> random<span style="color: #666666">.</span>randint(<span style="color: #666666">2</span>, <span style="color: #666666">3</span>)
    <span style="color: #408080; font-style: italic"># Set height of second to width of first</span>
    y2 <span style="color: #666666">=</span> x1
    <span style="color: #408080; font-style: italic"># Set random width of second matrix</span>
    x2 <span style="color: #666666">=</span> random<span style="color: #666666">.</span>randint(<span style="color: #666666">1</span>, <span style="color: #666666">2</span>)
    <span style="color: #408080; font-style: italic"># Populate both matrices with random numbers (between 0 and 10)</span>
    m1 <span style="color: #666666">=</span> [[random<span style="color: #666666">.</span>randint(<span style="color: #666666">1</span>, <span style="color: #666666">10</span>) <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(x1)] <span style="color: #008000; font-weight: bold">for</span> y <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(y1)]
    m2 <span style="color: #666666">=</span> [[random<span style="color: #666666">.</span>randint(<span style="color: #666666">1</span>, <span style="color: #666666">10</span>) <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(x2)] <span style="color: #008000; font-weight: bold">for</span> y <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(y2)]
    <span style="color: #408080; font-style: italic"># Create matrix objects from the 2D lists</span>
    mat1 <span style="color: #666666">=</span> Matrix(m1)
    mat2 <span style="color: #666666">=</span> Matrix(m2)
    <span style="color: #408080; font-style: italic"># Calculate answer and generate question</span>
    question <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;Calculate `&#39;</span> <span style="color: #666666">+</span> <span style="color: #008000">str</span>(m1) <span style="color: #666666">+</span> <span style="color: #BA2121">&#39;` X `&#39;</span> <span style="color: #666666">+</span> <span style="color: #008000">str</span>(m2)<span style="color: #666666">+</span><span style="color: #BA2121">&#39;`&#39;</span>
    answer <span style="color: #666666">=</span> (mat1 <span style="color: #666666">*</span> mat2)
    <span style="color: #008000; font-weight: bold">return</span> (question, answer)


<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">add_sub_question</span>():
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return random question and answer pair for addition and subtraction.&quot;&quot;&quot;</span>
    x, y <span style="color: #666666">=</span> random<span style="color: #666666">.</span>randint(<span style="color: #666666">2</span>, <span style="color: #666666">3</span>), random<span style="color: #666666">.</span>randint(<span style="color: #666666">2</span>, <span style="color: #666666">3</span>)
    m1 <span style="color: #666666">=</span> Matrix(
        [[random<span style="color: #666666">.</span>randint(<span style="color: #666666">1</span>, <span style="color: #666666">10</span>) <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(x)] <span style="color: #008000; font-weight: bold">for</span> y <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(y)]
            )
    m2 <span style="color: #666666">=</span> Matrix(
        [[random<span style="color: #666666">.</span>randint(<span style="color: #666666">1</span>, <span style="color: #666666">10</span>) <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(x)] <span style="color: #008000; font-weight: bold">for</span> y <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(y)]
            )
    rand_op <span style="color: #666666">=</span> random<span style="color: #666666">.</span>choice([<span style="color: #BA2121">&#39;+&#39;</span>, <span style="color: #BA2121">&#39;-&#39;</span>])
    <span style="color: #408080; font-style: italic"># Calculate answer and create question based on which opertor was chosen</span>
    <span style="color: #008000; font-weight: bold">if</span> rand_op <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;+&#39;</span>:
        answer <span style="color: #666666">=</span> m1 <span style="color: #666666">+</span> m2
        question <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;Calculate `&#39;</span><span style="color: #666666">+</span><span style="color: #008000">str</span>(m1<span style="color: #666666">.</span>get_rows())<span style="color: #666666">+</span><span style="color: #BA2121">&#39; + &#39;</span><span style="color: #666666">+</span><span style="color: #008000">str</span>(m2<span style="color: #666666">.</span>get_rows())<span style="color: #666666">+</span><span style="color: #BA2121">&#39;`&#39;</span>
    <span style="color: #008000; font-weight: bold">else</span>:
        answer <span style="color: #666666">=</span> m1 <span style="color: #666666">-</span> m2
        question <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;Calculate `&#39;</span> <span style="color: #666666">+</span> <span style="color: #008000">str</span>(m1<span style="color: #666666">.</span>get_rows())<span style="color: #666666">+</span><span style="color: #BA2121">&#39; - &#39;</span><span style="color: #666666">+</span><span style="color: #008000">str</span>(m2<span style="color: #666666">.</span>get_rows()) <span style="color: #666666">+</span> <span style="color: #BA2121">&#39;`&#39;</span>
    <span style="color: #008000; font-weight: bold">return</span> (question, answer)


<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">det_question</span>():
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return random question and answer pair for finding the determinant.&quot;&quot;&quot;</span>
    <span style="color: #408080; font-style: italic"># Generate randomly 3x3 matrix</span>
    mat <span style="color: #666666">=</span> Matrix(
        [[random<span style="color: #666666">.</span>randint(<span style="color: #666666">1</span>, <span style="color: #666666">10</span>) <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #666666">3</span>)] <span style="color: #008000; font-weight: bold">for</span> y <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #666666">3</span>)]
            )
    <span style="color: #408080; font-style: italic"># Calculate answer and generate question</span>
    answer <span style="color: #666666">=</span> mat<span style="color: #666666">.</span>determinant()
    question <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;Find the Determinant of `&#39;</span><span style="color: #666666">+</span><span style="color: #008000">str</span>(mat<span style="color: #666666">.</span>get_rows())<span style="color: #666666">+</span><span style="color: #BA2121">&#39;`&#39;</span>
    <span style="color: #008000; font-weight: bold">return</span> (question, answer)


<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">inv_question</span>():
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return random question and answer pair for finding the inverse.&quot;&quot;&quot;</span>
    <span style="color: #408080; font-style: italic"># Generate random matrices until one with an inverse is found</span>
    <span style="color: #008000; font-weight: bold">while</span> <span style="color: #008000">True</span>:
        <span style="color: #408080; font-style: italic"># Create random 3x3 matrix</span>
        mat <span style="color: #666666">=</span> Matrix(
            [[random<span style="color: #666666">.</span>randint(<span style="color: #666666">1</span>, <span style="color: #666666">10</span>) <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #666666">3</span>)] <span style="color: #008000; font-weight: bold">for</span> y <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #666666">3</span>)]
            )
        <span style="color: #008000; font-weight: bold">if</span> mat<span style="color: #666666">.</span>determinant() <span style="color: #666666">!=</span> <span style="color: #666666">0</span>:
            <span style="color: #408080; font-style: italic"># If Matrix with valid inverse is created, break</span>
            <span style="color: #008000; font-weight: bold">break</span>
    <span style="color: #408080; font-style: italic"># Calculate answer and generate question</span>
    question <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;Find the Inverse of `&#39;</span><span style="color: #666666">+</span><span style="color: #008000">str</span>(mat<span style="color: #666666">.</span>get_rows())<span style="color: #666666">+</span><span style="color: #BA2121">&#39;`&#39;</span>
    answer <span style="color: #666666">=</span> mat<span style="color: #666666">.</span>inverse()<span style="color: #666666">.</span>tostr()
    <span style="color: #008000; font-weight: bold">return</span> (question, answer)

<span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">__name__</span> <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;__main__&#39;</span>:
    q <span style="color: #666666">=</span> MatrixQuestion<span style="color: #666666">.</span>get_question(<span style="color: #BA2121">&#39;inv&#39;</span>)
    <span style="color: #008000; font-weight: bold">print</span>(q<span style="color: #666666">.</span>get_q())
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/pyscripts/question_dict.py</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>QUESTIONS <span style="color: #666666">=</span> [
    {<span style="color: #BA2121">&#39;id&#39;</span>: <span style="color: #666666">0</span>, <span style="color: #BA2121">&quot;name&quot;</span>: <span style="color: #BA2121">&#39;Addition and Subtraction&#39;</span>, <span style="color: #BA2121">&quot;topic&quot;</span>: <span style="color: #BA2121">&#39;Matrix&#39;</span>, <span style="color: #BA2121">&quot;q_type&quot;</span>: <span style="color: #BA2121">&quot;add_sub&quot;</span>},
    {<span style="color: #BA2121">&#39;id&#39;</span>: <span style="color: #666666">1</span>, <span style="color: #BA2121">&quot;name&quot;</span>: <span style="color: #BA2121">&#39;Multiplication&#39;</span>, <span style="color: #BA2121">&quot;topic&quot;</span>: <span style="color: #BA2121">&#39;Matrix&#39;</span>, <span style="color: #BA2121">&quot;q_type&quot;</span>: <span style="color: #BA2121">&quot;mult&quot;</span>},
    {<span style="color: #BA2121">&#39;id&#39;</span>: <span style="color: #666666">2</span>, <span style="color: #BA2121">&#39;name&#39;</span>: <span style="color: #BA2121">&#39;Determinant&#39;</span>, <span style="color: #BA2121">&quot;topic&quot;</span>: <span style="color: #BA2121">&#39;Matrix&#39;</span>, <span style="color: #BA2121">&quot;q_type&quot;</span>: <span style="color: #BA2121">&quot;det&quot;</span>},
    {<span style="color: #BA2121">&#39;id&#39;</span>: <span style="color: #666666">3</span>, <span style="color: #BA2121">&#39;name&#39;</span>: <span style="color: #BA2121">&#39;Inverse&#39;</span>, <span style="color: #BA2121">&quot;topic&quot;</span>: <span style="color: #BA2121">&#39;Matrix&#39;</span>, <span style="color: #BA2121">&quot;q_type&quot;</span>: <span style="color: #BA2121">&quot;inv&quot;</span>},
    {<span style="color: #BA2121">&#39;id&#39;</span>: <span style="color: #666666">4</span>, <span style="color: #BA2121">&#39;name&#39;</span>: <span style="color: #BA2121">&#39;Addition and Subtraction&#39;</span>, <span style="color: #BA2121">&quot;topic&quot;</span>: <span style="color: #BA2121">&#39;Complex&#39;</span>, <span style="color: #BA2121">&quot;q_type&quot;</span>:  <span style="color: #BA2121">&quot;add_sub&quot;</span>},
    {<span style="color: #BA2121">&#39;id&#39;</span>: <span style="color: #666666">5</span>, <span style="color: #BA2121">&#39;name&#39;</span>: <span style="color: #BA2121">&#39;Multiplication&#39;</span>, <span style="color: #BA2121">&quot;topic&quot;</span>: <span style="color: #BA2121">&#39;Complex&#39;</span>, <span style="color: #BA2121">&quot;q_type&quot;</span>: <span style="color: #BA2121">&quot;mult&quot;</span>},
    {<span style="color: #BA2121">&#39;id&#39;</span>: <span style="color: #666666">6</span>, <span style="color: #BA2121">&quot;name&quot;</span>: <span style="color: #BA2121">&#39;Division&#39;</span>, <span style="color: #BA2121">&quot;topic&quot;</span>: <span style="color: #BA2121">&#39;Complex&#39;</span>, <span style="color: #BA2121">&quot;q_type&quot;</span>: <span style="color: #BA2121">&quot;div&quot;</span>},
    {<span style="color: #BA2121">&#39;id&#39;</span>: <span style="color: #666666">7</span>, <span style="color: #BA2121">&quot;name&quot;</span>: <span style="color: #BA2121">&#39;Argument and Modulus&#39;</span>, <span style="color: #BA2121">&quot;topic&quot;</span>: <span style="color: #BA2121">&#39;Complex&#39;</span>, <span style="color: #BA2121">&quot;q_type&quot;</span>: <span style="color: #BA2121">&quot;mod_arg&quot;</span>},
    ]

MATRIX_QUESTIONS <span style="color: #666666">=</span> {
    <span style="color: #BA2121">&quot;add_sub&quot;</span>: <span style="color: #666666">0</span>,
    <span style="color: #BA2121">&quot;mult&quot;</span>: <span style="color: #666666">1</span>,
    <span style="color: #BA2121">&quot;det&quot;</span>: <span style="color: #666666">2</span>,
    <span style="color: #BA2121">&quot;inv&quot;</span>: <span style="color: #666666">3</span>
}

COMPLEX_QUESTIONS <span style="color: #666666">=</span> {
    <span style="color: #BA2121">&quot;add_sub&quot;</span>: <span style="color: #666666">4</span>,
    <span style="color: #BA2121">&quot;mult&quot;</span>: <span style="color: #666666">5</span>,
    <span style="color: #BA2121">&quot;div&quot;</span>: <span style="color: #666666">6</span>,
    <span style="color: #BA2121">&quot;mod_arg&quot;</span>: <span style="color: #666666">7</span>
}
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/routes/__init__.py</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">.</span> <span style="color: #008000; font-weight: bold">import</span> <span style="color: #666666">*</span>
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/routes/loci.py</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">flask</span> <span style="color: #008000; font-weight: bold">import</span> render_template, request, jsonify, abort, Blueprint
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">flask_login</span> <span style="color: #008000; font-weight: bold">import</span> login_required, current_user
<span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">json</span>
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">..pyscripts.complex_loci</span> <span style="color: #008000; font-weight: bold">import</span> get_implicit

<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">..models</span> <span style="color: #008000; font-weight: bold">import</span> Graph, User
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">app</span> <span style="color: #008000; font-weight: bold">import</span> db

<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">sympy</span> <span style="color: #008000; font-weight: bold">import</span> sympify, re, im
<span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">html</span>
<span style="color: #408080; font-style: italic"># Initialise blueprint</span>
loci_blueprint <span style="color: #666666">=</span> Blueprint(<span style="color: #BA2121">&#39;loci&#39;</span>, <span style="color: #19177C">__name__</span>, template_folder<span style="color: #666666">=</span><span style="color: #BA2121">&#39;templates&#39;</span>)


<span style="color: #AA22FF">@loci_blueprint.route</span>(<span style="color: #BA2121">&#39;/loci-plotter&#39;</span>)
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">loci</span>():
    <span style="color: #008000; font-weight: bold">if</span> current_user<span style="color: #666666">.</span>is_authenticated:
        <span style="color: #408080; font-style: italic"># If user is logged in, load and send saved graph data</span>
        user <span style="color: #666666">=</span> User<span style="color: #666666">.</span>query<span style="color: #666666">.</span>get(current_user<span style="color: #666666">.</span>user_id)
        user_graphs <span style="color: #666666">=</span> user<span style="color: #666666">.</span>graphs<span style="color: #666666">.</span>all()
    <span style="color: #008000; font-weight: bold">else</span>:
        user_graphs <span style="color: #666666">=</span> <span style="color: #008000">None</span>
    <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;loci.html&#39;</span>, user_graphs<span style="color: #666666">=</span>user_graphs)


<span style="color: #AA22FF">@loci_blueprint.route</span>(<span style="color: #BA2121">&#39;/_plot&#39;</span>)
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">plot</span>():
    <span style="color: #408080; font-style: italic"># Get input equation</span>
    eq <span style="color: #666666">=</span> request<span style="color: #666666">.</span>args<span style="color: #666666">.</span>get(<span style="color: #BA2121">&#39;eq&#39;</span>, <span style="color: #666666">0</span>, <span style="color: #008000">type</span><span style="color: #666666">=</span><span style="color: #008000">str</span>)
    <span style="color: #008000; font-weight: bold">try</span>:
        <span style="color: #408080; font-style: italic"># Modify equation with function in complex_loci.py</span>
        line <span style="color: #666666">=</span> get_implicit(eq, latx<span style="color: #666666">=</span><span style="color: #008000">True</span>)
        <span style="color: #008000; font-weight: bold">print</span>(line)
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #BA2121">&#39; i &#39;</span> <span style="color: #AA22FF; font-weight: bold">in</span> line:
            <span style="color: #408080; font-style: italic"># A separated i means that there is a complex number in the output</span>
            <span style="color: #408080; font-style: italic"># This means the input equation was invalid</span>
            <span style="color: #008000; font-weight: bold">raise</span> <span style="color: #D2413A; font-weight: bold">TypeError</span>
        <span style="color: #008000; font-weight: bold">return</span> jsonify(result<span style="color: #666666">=</span>line, eq<span style="color: #666666">=</span>html<span style="color: #666666">.</span>escape(eq))
    <span style="color: #008000; font-weight: bold">except</span> <span style="color: #D2413A; font-weight: bold">Exception</span> <span style="color: #008000; font-weight: bold">as</span> e:
        <span style="color: #008000; font-weight: bold">print</span>(e)
        <span style="color: #408080; font-style: italic"># Abort if there is an error (causes error message on client-side)</span>
        abort(<span style="color: #666666">500</span>)


<span style="color: #AA22FF">@loci_blueprint.route</span>(<span style="color: #BA2121">&#39;/_addgraph&#39;</span>, methods<span style="color: #666666">=</span>[<span style="color: #BA2121">&#39;GET&#39;</span>, <span style="color: #BA2121">&#39;POST&#39;</span>])
<span style="color: #AA22FF">@login_required</span>
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">addgraph</span>():
    <span style="color: #008000; font-weight: bold">if</span> request<span style="color: #666666">.</span>method <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;POST&#39;</span>:
        <span style="color: #408080; font-style: italic"># POST request means user is saving a graph</span>
        <span style="color: #008000; font-weight: bold">try</span>:
            <span style="color: #408080; font-style: italic"># Get data from form</span>
            data1 <span style="color: #666666">=</span> request<span style="color: #666666">.</span>form<span style="color: #666666">.</span>get(<span style="color: #BA2121">&#39;desmosdata&#39;</span>, <span style="color: #008000">None</span>)
            data2 <span style="color: #666666">=</span> request<span style="color: #666666">.</span>form<span style="color: #666666">.</span>get(<span style="color: #BA2121">&#39;exprlist&#39;</span>, <span style="color: #008000">None</span>)
            title <span style="color: #666666">=</span> request<span style="color: #666666">.</span>form<span style="color: #666666">.</span>get(<span style="color: #BA2121">&#39;title&#39;</span>, <span style="color: #BA2121">&quot;&quot;</span>)
            desc <span style="color: #666666">=</span> request<span style="color: #666666">.</span>form<span style="color: #666666">.</span>get(<span style="color: #BA2121">&#39;description&#39;</span>, <span style="color: #BA2121">&quot;&quot;</span>)
            image_url <span style="color: #666666">=</span> request<span style="color: #666666">.</span>form<span style="color: #666666">.</span>get(<span style="color: #BA2121">&#39;image&#39;</span>, <span style="color: #BA2121">&quot;&quot;</span>)
            user_id <span style="color: #666666">=</span> current_user<span style="color: #666666">.</span>user_id

            exists <span style="color: #666666">=</span> Graph<span style="color: #666666">.</span>query<span style="color: #666666">.</span>filter_by(
                title<span style="color: #666666">=</span>title, user_id<span style="color: #666666">=</span>user_id)<span style="color: #666666">.</span>first()
            <span style="color: #008000; font-weight: bold">if</span> title<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39; &#39;</span>, <span style="color: #BA2121">&#39;&#39;</span>) <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;&#39;</span>:
                <span style="color: #008000; font-weight: bold">return</span> jsonify(status<span style="color: #666666">=</span><span style="color: #BA2121">&quot;error&quot;</span>, error<span style="color: #666666">=</span><span style="color: #BA2121">&quot;Please enter a title&quot;</span>)
            <span style="color: #008000; font-weight: bold">if</span> exists:
                <span style="color: #408080; font-style: italic"># Prevent same graph getting saved more than once</span>
                <span style="color: #008000; font-weight: bold">return</span> jsonify(status<span style="color: #666666">=</span><span style="color: #BA2121">&quot;error&quot;</span>, error<span style="color: #666666">=</span><span style="color: #BA2121">&quot;Graph already exists&quot;</span>)
            <span style="color: #008000; font-weight: bold">else</span>:
                <span style="color: #408080; font-style: italic"># Add graph data to database and link to current user</span>
                g <span style="color: #666666">=</span> Graph(data1, data2, user_id, title, desc, image_url)
                db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>add(g)
                db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>commit()
                graph_id <span style="color: #666666">=</span> g<span style="color: #666666">.</span>graph_id  <span style="color: #408080; font-style: italic"># has to be after commit</span>
                <span style="color: #008000; font-weight: bold">return</span> jsonify(<span style="color: #008000">id</span><span style="color: #666666">=</span>graph_id, title<span style="color: #666666">=</span>title, image_url<span style="color: #666666">=</span>image_url,
                               desc<span style="color: #666666">=</span>desc, status<span style="color: #666666">=</span><span style="color: #BA2121">&quot;ok&quot;</span>, error<span style="color: #666666">=</span><span style="color: #008000">None</span>)
        <span style="color: #008000; font-weight: bold">except</span> <span style="color: #D2413A; font-weight: bold">Exception</span> <span style="color: #008000; font-weight: bold">as</span> e:
            <span style="color: #408080; font-style: italic"># Return error message and error status if there is an error</span>
            <span style="color: #408080; font-style: italic"># Causes error popup on client-side</span>
            <span style="color: #008000; font-weight: bold">return</span> jsonify(status<span style="color: #666666">=</span><span style="color: #BA2121">&quot;error&quot;</span>, error<span style="color: #666666">=</span><span style="color: #BA2121">&quot;Error saving Graph&quot;</span>)
    <span style="color: #008000; font-weight: bold">if</span> request<span style="color: #666666">.</span>method <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;GET&#39;</span>:
        <span style="color: #408080; font-style: italic"># GET request means the user is loading a graph</span>
        <span style="color: #008000; font-weight: bold">try</span>:
            graph_id <span style="color: #666666">=</span> request<span style="color: #666666">.</span>args<span style="color: #666666">.</span>get(<span style="color: #BA2121">&#39;graph_id&#39;</span>, <span style="color: #008000">None</span>)
            g <span style="color: #666666">=</span> Graph<span style="color: #666666">.</span>query<span style="color: #666666">.</span>get(graph_id)
            <span style="color: #008000; font-weight: bold">return</span> jsonify(desmosdata<span style="color: #666666">=</span>g<span style="color: #666666">.</span>desmosdata, exprlist<span style="color: #666666">=</span>g<span style="color: #666666">.</span>exprlist)
        <span style="color: #008000; font-weight: bold">except</span> <span style="color: #D2413A; font-weight: bold">Exception</span> <span style="color: #008000; font-weight: bold">as</span> e:
            <span style="color: #408080; font-style: italic"># Abort if there is an error (causes error message on client-side)</span>
            <span style="color: #008000; font-weight: bold">return</span> abort(<span style="color: #666666">500</span>)


<span style="color: #AA22FF">@loci_blueprint.route</span>(<span style="color: #BA2121">&#39;/operations-argand&#39;</span>)
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">operations</span>():
    <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;operations.html&#39;</span>)


<span style="color: #AA22FF">@loci_blueprint.route</span>(<span style="color: #BA2121">&#39;/_addcalc&#39;</span>, methods<span style="color: #666666">=</span>[<span style="color: #BA2121">&#39;GET&#39;</span>])
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">addcalc</span>():
    <span style="color: #408080; font-style: italic"># Get equation requested</span>
    eq_str <span style="color: #666666">=</span> request<span style="color: #666666">.</span>args<span style="color: #666666">.</span>get(<span style="color: #BA2121">&#39;eq&#39;</span>, <span style="color: #008000">None</span>)
    letters <span style="color: #666666">=</span> json<span style="color: #666666">.</span>loads(request<span style="color: #666666">.</span>args<span style="color: #666666">.</span>get(<span style="color: #BA2121">&#39;letters&#39;</span>, <span style="color: #008000">None</span>))
    <span style="color: #408080; font-style: italic"># Convert to sympy object</span>
    eq <span style="color: #666666">=</span> sympify(eq_str)
    <span style="color: #408080; font-style: italic"># Get all the variables in the expression</span>
    vars_ <span style="color: #666666">=</span> eq<span style="color: #666666">.</span>free_symbols
    correct_variables <span style="color: #666666">=</span> <span style="color: #008000">set</span>({<span style="color: #008000">str</span>(v) <span style="color: #008000; font-weight: bold">for</span> v <span style="color: #AA22FF; font-weight: bold">in</span> vars_})<span style="color: #666666">.</span>issubset(<span style="color: #008000">set</span>(letters ))
    <span style="color: #008000; font-weight: bold">if</span> <span style="color: #AA22FF; font-weight: bold">not</span> correct_variables:
        <span style="color: #008000; font-weight: bold">return</span> abort(<span style="color: #666666">500</span>)
    <span style="color: #408080; font-style: italic"># get real and imaginary parts of expression</span>
    real <span style="color: #666666">=</span> <span style="color: #008000">str</span>(re(eq)<span style="color: #666666">.</span>expand(<span style="color: #008000">complex</span><span style="color: #666666">=</span><span style="color: #008000">True</span>))
    imag <span style="color: #666666">=</span> <span style="color: #008000">str</span>(im(eq)<span style="color: #666666">.</span>expand(<span style="color: #008000">complex</span><span style="color: #666666">=</span><span style="color: #008000">True</span>))
    <span style="color: #408080; font-style: italic"># Loop over the variables</span>
    <span style="color: #008000; font-weight: bold">for</span> v <span style="color: #AA22FF; font-weight: bold">in</span> vars_:
        <span style="color: #408080; font-style: italic"># Replace im(variable) with variable.Y()</span>
        <span style="color: #408080; font-style: italic"># Replace re(variable) with variable.X()</span>
        <span style="color: #408080; font-style: italic"># This is how JSXGraph allows points based on other points</span>
        real <span style="color: #666666">=</span> real<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39;im(&#39;</span><span style="color: #666666">+</span><span style="color: #008000">str</span>(v)<span style="color: #666666">+</span><span style="color: #BA2121">&#39;)&#39;</span>, <span style="color: #008000">str</span>(v)<span style="color: #666666">+</span><span style="color: #BA2121">&#39;.Y()&#39;</span>)
        real <span style="color: #666666">=</span> real<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39;re(&#39;</span><span style="color: #666666">+</span><span style="color: #008000">str</span>(v)<span style="color: #666666">+</span><span style="color: #BA2121">&#39;)&#39;</span>, <span style="color: #008000">str</span>(v)<span style="color: #666666">+</span><span style="color: #BA2121">&#39;.X()&#39;</span>)
        imag <span style="color: #666666">=</span> imag<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39;im(&#39;</span><span style="color: #666666">+</span><span style="color: #008000">str</span>(v)<span style="color: #666666">+</span><span style="color: #BA2121">&#39;)&#39;</span>, <span style="color: #008000">str</span>(v)<span style="color: #666666">+</span><span style="color: #BA2121">&#39;.Y()&#39;</span>)
        imag <span style="color: #666666">=</span> imag<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39;re(&#39;</span><span style="color: #666666">+</span><span style="color: #008000">str</span>(v)<span style="color: #666666">+</span><span style="color: #BA2121">&#39;)&#39;</span>, <span style="color: #008000">str</span>(v)<span style="color: #666666">+</span><span style="color: #BA2121">&#39;.X()&#39;</span>)
    <span style="color: #408080; font-style: italic"># Relace functions for javascript</span>
    real <span style="color: #666666">=</span> real<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39;**&#39;</span>, <span style="color: #BA2121">&#39;^&#39;</span>)<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39;sin&#39;</span>, <span style="color: #BA2121">&#39;Math.sin&#39;</span>)<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39;cos&#39;</span>,  <span style="color: #BA2121">&#39;Math.cos&#39;</span>)<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39;atan2&#39;</span>, <span style="color: #BA2121">&#39;Math.atan&#39;</span>)
    imag <span style="color: #666666">=</span> imag<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39;**&#39;</span>, <span style="color: #BA2121">&#39;^&#39;</span>)<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39;sin&#39;</span>, <span style="color: #BA2121">&#39;Math.sin&#39;</span>)<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39;cos&#39;</span>,  <span style="color: #BA2121">&#39;Math.cos&#39;</span>)<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39;atan2&#39;</span>, <span style="color: #BA2121">&#39;Math.atan&#39;</span>)
    <span style="color: #408080; font-style: italic"># Return the real and imaginary parts of calculated points as JSON</span>
    <span style="color: #008000; font-weight: bold">print</span>(real,imag)
    <span style="color: #008000; font-weight: bold">return</span> jsonify(x<span style="color: #666666">=</span>real, y<span style="color: #666666">=</span>imag)
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/routes/matrix.py</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">flask</span> <span style="color: #008000; font-weight: bold">import</span> request, render_template, Blueprint
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">..pyscripts.matrices</span> <span style="color: #008000; font-weight: bold">import</span> Matrix
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">fractions</span> <span style="color: #008000; font-weight: bold">import</span> Fraction

<span style="color: #408080; font-style: italic"># Initialise blueprint</span>
matrix_blueprint <span style="color: #666666">=</span> Blueprint(<span style="color: #BA2121">&#39;matrix_blueprint&#39;</span>, <span style="color: #19177C">__name__</span>,
                             template_folder<span style="color: #666666">=</span><span style="color: #BA2121">&#39;templates&#39;</span>)


<span style="color: #AA22FF">@matrix_blueprint.route</span>(<span style="color: #BA2121">&#39;/matrix&#39;</span>, methods<span style="color: #666666">=</span>[<span style="color: #BA2121">&#39;GET&#39;</span>, <span style="color: #BA2121">&#39;POST&#39;</span>])
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">matrix</span>():
    result <span style="color: #666666">=</span> <span style="color: #008000">None</span>
    <span style="color: #408080; font-style: italic"># If the form is posted, it has been submitted</span>
    <span style="color: #008000; font-weight: bold">if</span> request<span style="color: #666666">.</span>method <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;POST&#39;</span>:
        <span style="color: #008000; font-weight: bold">try</span>:
            <span style="color: #408080; font-style: italic"># Get operator pressed (+,-,*)</span>
            <span style="color: #408080; font-style: italic"># If no operator was pressed, op = None</span>
            op <span style="color: #666666">=</span> request<span style="color: #666666">.</span>form<span style="color: #666666">.</span>get(<span style="color: #BA2121">&#39;submit&#39;</span>, <span style="color: #008000">None</span>)
            <span style="color: #408080; font-style: italic"># Get operation requested if a button under matrix A is pressed</span>
            acalc <span style="color: #666666">=</span> request<span style="color: #666666">.</span>form<span style="color: #666666">.</span>get(<span style="color: #BA2121">&#39;a-submit&#39;</span>, <span style="color: #008000">None</span>)
            <span style="color: #408080; font-style: italic"># Get operation requested if a button under matrix A is pressed</span>
            bcalc <span style="color: #666666">=</span> request<span style="color: #666666">.</span>form<span style="color: #666666">.</span>get(<span style="color: #BA2121">&#39;b-submit&#39;</span>, <span style="color: #008000">None</span>)
            <span style="color: #008000; font-weight: bold">if</span> acalc:
                <span style="color: #408080; font-style: italic"># If operation on Matrix A requested</span>
                letter <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;A&#39;</span>
                calc <span style="color: #666666">=</span> acalc
            <span style="color: #008000; font-weight: bold">elif</span> bcalc:
                <span style="color: #408080; font-style: italic"># If operation on Matrix B requested</span>
                letter <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;B&#39;</span>
                calc <span style="color: #666666">=</span> bcalc
            <span style="color: #008000; font-weight: bold">else</span>:
                <span style="color: #408080; font-style: italic"># Initialise matrix A list</span>
                mata <span style="color: #666666">=</span> []
                <span style="color: #408080; font-style: italic"># Get matrix data from form</span>
                <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #666666">3</span>):  <span style="color: #408080; font-style: italic"># TODO make a function def to get a matrix</span>
                    mata<span style="color: #666666">.</span>append([])  <span style="color: #408080; font-style: italic"># def get_mat(letter,x,y):</span>
                    <span style="color: #008000; font-weight: bold">for</span> y <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #666666">3</span>):
                        string <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;A&#39;</span> <span style="color: #666666">+</span> <span style="color: #008000">str</span>(x) <span style="color: #666666">+</span> <span style="color: #008000">str</span>(y)
                        mata[x]<span style="color: #666666">.</span>append(Fraction(request<span style="color: #666666">.</span>form[string]))
                <span style="color: #408080; font-style: italic"># Initialise matrix B list</span>
                matb <span style="color: #666666">=</span> []
                <span style="color: #408080; font-style: italic"># Get matrix data from form</span>
                <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #666666">3</span>):
                    matb<span style="color: #666666">.</span>append([])
                    <span style="color: #008000; font-weight: bold">for</span> y <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #666666">3</span>):
                        string <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;B&#39;</span> <span style="color: #666666">+</span> <span style="color: #008000">str</span>(x) <span style="color: #666666">+</span> <span style="color: #008000">str</span>(y)
                        matb[x]<span style="color: #666666">.</span>append(Fraction(request<span style="color: #666666">.</span>form[string]))
                <span style="color: #408080; font-style: italic"># Create both matric objects</span>
                a <span style="color: #666666">=</span> Matrix(mata)
                b <span style="color: #666666">=</span> Matrix(matb)
                <span style="color: #408080; font-style: italic"># Check which operator button pressed</span>
                <span style="color: #408080; font-style: italic"># Assign result to matresult depending on operator</span>
                <span style="color: #008000; font-weight: bold">if</span> op <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;X&#39;</span>:
                    matresult <span style="color: #666666">=</span> a <span style="color: #666666">*</span> b
                <span style="color: #008000; font-weight: bold">if</span> op <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;-&#39;</span>:
                    matresult <span style="color: #666666">=</span> a <span style="color: #666666">-</span> b
                <span style="color: #008000; font-weight: bold">if</span> op <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;+&#39;</span>:
                    matresult <span style="color: #666666">=</span> a <span style="color: #666666">+</span> b
                <span style="color: #408080; font-style: italic"># Convert all items in matrix to strings and return page</span>
                result <span style="color: #666666">=</span> matresult<span style="color: #666666">.</span>tostr()<span style="color: #666666">.</span>rows
                <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;matrix.html&#39;</span>, matrix_result<span style="color: #666666">=</span>result,
                                       det_result<span style="color: #666666">=</span><span style="color: #008000">None</span>, Error<span style="color: #666666">=</span><span style="color: #008000">None</span>)
            <span style="color: #408080; font-style: italic"># Initialise Matrix list</span>
            mat <span style="color: #666666">=</span> []
            <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #666666">3</span>):
                mat<span style="color: #666666">.</span>append([])
                <span style="color: #008000; font-weight: bold">for</span> y <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #666666">3</span>):
                    <span style="color: #408080; font-style: italic"># Get data from form for correct matrix</span>
                    <span style="color: #408080; font-style: italic"># Depends on whcih button was pressed</span>
                    string <span style="color: #666666">=</span> letter <span style="color: #666666">+</span> <span style="color: #008000">str</span>(x) <span style="color: #666666">+</span> <span style="color: #008000">str</span>(y)
                    mat[x]<span style="color: #666666">.</span>append(Fraction(request<span style="color: #666666">.</span>form[string]))
            <span style="color: #408080; font-style: italic"># Create matrix object based on this</span>
            m <span style="color: #666666">=</span> Matrix(mat)
            <span style="color: #408080; font-style: italic"># Calculate result depending on which button pressed</span>
            <span style="color: #408080; font-style: italic"># Return page with relevant result</span>
            <span style="color: #008000; font-weight: bold">if</span> <span style="color: #BA2121">&#39;Determinant&#39;</span> <span style="color: #AA22FF; font-weight: bold">in</span> calc:
                result <span style="color: #666666">=</span> <span style="color: #008000">str</span>(m<span style="color: #666666">.</span>determinant())
                <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;matrix.html&#39;</span>, matrix_result<span style="color: #666666">=</span><span style="color: #008000">None</span>,
                                       det_result<span style="color: #666666">=</span>result, Error<span style="color: #666666">=</span><span style="color: #008000">None</span>)
            <span style="color: #008000; font-weight: bold">elif</span> <span style="color: #BA2121">&#39;Inverse&#39;</span> <span style="color: #AA22FF; font-weight: bold">in</span> calc:
                result <span style="color: #666666">=</span> m<span style="color: #666666">.</span>inverse()<span style="color: #666666">.</span>tostr()<span style="color: #666666">.</span>rows
                <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;matrix.html&#39;</span>, matrix_result<span style="color: #666666">=</span>result,
                                       det_result<span style="color: #666666">=</span><span style="color: #008000">None</span>, Error<span style="color: #666666">=</span><span style="color: #008000">None</span>)
            <span style="color: #008000; font-weight: bold">elif</span> <span style="color: #BA2121">&#39;Transpose&#39;</span> <span style="color: #AA22FF; font-weight: bold">in</span> calc:
                result <span style="color: #666666">=</span> m<span style="color: #666666">.</span>transpose()<span style="color: #666666">.</span>tostr()<span style="color: #666666">.</span>rows
                <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;matrix.html&#39;</span>, matrix_result<span style="color: #666666">=</span>result,
                                       det_result<span style="color: #666666">=</span><span style="color: #008000">None</span>, Error<span style="color: #666666">=</span><span style="color: #008000">None</span>)
            <span style="color: #008000; font-weight: bold">elif</span> <span style="color: #BA2121">&#39;Triangle&#39;</span> <span style="color: #AA22FF; font-weight: bold">in</span> calc:
                result <span style="color: #666666">=</span> m<span style="color: #666666">.</span>triangle()<span style="color: #666666">.</span>tostr()<span style="color: #666666">.</span>rows
                <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;matrix.html&#39;</span>, matrix_result<span style="color: #666666">=</span>result,
                                       det_result<span style="color: #666666">=</span><span style="color: #008000">None</span>, Error<span style="color: #666666">=</span><span style="color: #008000">None</span>)
            <span style="color: #008000; font-weight: bold">else</span>:
                <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;matrix.html&#39;</span>, matrix_result<span style="color: #666666">=</span><span style="color: #008000">None</span>,
                                       det_result<span style="color: #666666">=</span><span style="color: #008000">None</span>, Error<span style="color: #666666">=</span><span style="color: #008000">None</span>)
        <span style="color: #008000; font-weight: bold">except</span> <span style="color: #D2413A; font-weight: bold">Exception</span> <span style="color: #008000; font-weight: bold">as</span> e:
            <span style="color: #008000; font-weight: bold">print</span>(e)
            <span style="color: #408080; font-style: italic"># If there was an error, return page with an error message</span>
            error <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;Invalid Matrix, Try again&#39;</span>
            <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;matrix.html&#39;</span>, matrix_result<span style="color: #666666">=</span><span style="color: #008000">None</span>,
                                   det_result<span style="color: #666666">=</span><span style="color: #008000">None</span>, Error<span style="color: #666666">=</span>error)
    <span style="color: #408080; font-style: italic"># Return basic page if GET request (no form submitted yet)</span>
    <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;matrix.html&#39;</span>, matrix_result<span style="color: #666666">=</span>result)
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/routes/questions.py</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">ast</span>

<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">flask</span> <span style="color: #008000; font-weight: bold">import</span> (Blueprint, abort, flash, jsonify, render_template,
                   request, session)
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">flask_login</span> <span style="color: #008000; font-weight: bold">import</span> current_user

<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">app</span> <span style="color: #008000; font-weight: bold">import</span> db

<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">..models</span> <span style="color: #008000; font-weight: bold">import</span> Mark, Student
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">..pyscripts.complex_questions</span> <span style="color: #008000; font-weight: bold">import</span> ComplexQuestion
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">..pyscripts.matrix_questions</span> <span style="color: #008000; font-weight: bold">import</span> MatrixQuestion
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">..pyscripts.question_dict</span> <span style="color: #008000; font-weight: bold">import</span> COMPLEX_QUESTIONS, MATRIX_QUESTIONS

<span style="color: #408080; font-style: italic"># Initialise Blueprint</span>
questions_blueprint <span style="color: #666666">=</span> Blueprint(<span style="color: #BA2121">&#39;questions&#39;</span>, <span style="color: #19177C">__name__</span>,
                                template_folder<span style="color: #666666">=</span><span style="color: #BA2121">&#39;templates&#39;</span>)


<span style="color: #AA22FF">@questions_blueprint.route</span>(<span style="color: #BA2121">&#39;/questions&#39;</span>)
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">questions</span>():
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Questions home page.&quot;&quot;&quot;</span>
    <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;questions/questions.html&#39;</span>)


<span style="color: #AA22FF">@questions_blueprint.route</span>(<span style="color: #BA2121">&#39;/questions/&lt;topic&gt;/&lt;q_type&gt;&#39;</span>)
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">show_questions</span>(topic, q_type):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Show page with requested question type.&quot;&quot;&quot;</span>
    q_number <span style="color: #666666">=</span> request<span style="color: #666666">.</span>args<span style="color: #666666">.</span>get(<span style="color: #BA2121">&#39;n&#39;</span>, <span style="color: #666666">10</span>)
    <span style="color: #008000; font-weight: bold">if</span> topic <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;matrix&#39;</span>:
        <span style="color: #408080; font-style: italic"># Generate question objects</span>
        questions <span style="color: #666666">=</span> [MatrixQuestion<span style="color: #666666">.</span>get_question(q_type) <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(q_number)]
        <span style="color: #408080; font-style: italic"># Get list of answers from question objects</span>
        answers <span style="color: #666666">=</span> [q<span style="color: #666666">.</span>get_answer() <span style="color: #008000; font-weight: bold">for</span> q <span style="color: #AA22FF; font-weight: bold">in</span> questions]
        <span style="color: #408080; font-style: italic"># Check whether the answers are of type matrix or not</span>
        matans <span style="color: #666666">=</span> questions[<span style="color: #666666">0</span>]<span style="color: #666666">.</span>is_mat_ans()
        <span style="color: #408080; font-style: italic"># List of question strings from question objects</span>
        <span style="color: #408080; font-style: italic"># List of answer strings from question objects</span>
        <span style="color: #408080; font-style: italic"># Save both in server side session</span>
        session[<span style="color: #BA2121">&#39;questions&#39;</span>] <span style="color: #666666">=</span> [q<span style="color: #666666">.</span>get_q() <span style="color: #008000; font-weight: bold">for</span> q <span style="color: #AA22FF; font-weight: bold">in</span> questions]
        session[<span style="color: #BA2121">&#39;answers&#39;</span>] <span style="color: #666666">=</span> [<span style="color: #008000">str</span>(q<span style="color: #666666">.</span>get_answer()) <span style="color: #008000; font-weight: bold">for</span> q <span style="color: #AA22FF; font-weight: bold">in</span> questions]
        <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;questions/mat_questions.html&#39;</span>,
                                questions<span style="color: #666666">=</span><span style="color: #008000">enumerate</span>(questions), answers<span style="color: #666666">=</span>answers,
                                mat_ans<span style="color: #666666">=</span>matans, q_type<span style="color: #666666">=</span>q_type, topic<span style="color: #666666">=</span>topic)
    <span style="color: #008000; font-weight: bold">elif</span> topic <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;complex&#39;</span>:
        questions <span style="color: #666666">=</span> [ComplexQuestion<span style="color: #666666">.</span>get_question(q_type) <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(q_number)]
        answers <span style="color: #666666">=</span> [q<span style="color: #666666">.</span>get_answer() <span style="color: #008000; font-weight: bold">for</span> q <span style="color: #AA22FF; font-weight: bold">in</span> questions]
        session[<span style="color: #BA2121">&#39;questions&#39;</span>] <span style="color: #666666">=</span> [q<span style="color: #666666">.</span>get_q() <span style="color: #008000; font-weight: bold">for</span> q <span style="color: #AA22FF; font-weight: bold">in</span> questions]
        session[<span style="color: #BA2121">&#39;answers&#39;</span>] <span style="color: #666666">=</span> [<span style="color: #008000">str</span>(q<span style="color: #666666">.</span>get_answer()) <span style="color: #008000; font-weight: bold">for</span> q <span style="color: #AA22FF; font-weight: bold">in</span> questions]
        <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;questions/complex_questions.html&#39;</span>,
                                questions<span style="color: #666666">=</span><span style="color: #008000">enumerate</span>(questions), answers<span style="color: #666666">=</span>answers,
                                q_type<span style="color: #666666">=</span>q_type, topic<span style="color: #666666">=</span>topic)
    <span style="color: #008000; font-weight: bold">else</span>:
        <span style="color: #408080; font-style: italic"># If topic is invalid, return 404 page not found</span>
        abort(<span style="color: #666666">404</span>)


<span style="color: #AA22FF">@questions_blueprint.route</span>(<span style="color: #BA2121">&#39;/questions/_answers/&lt;topic&gt;/&lt;q_type&gt;&#39;</span>)
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">answers</span>(topic, q_type):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return scores and marked questions given topic, question type and list</span>
<span style="color: #BA2121; font-style: italic">    of input answers from questions form&quot;&quot;&quot;</span>
    <span style="color: #008000; font-weight: bold">if</span> topic <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;matrix&#39;</span>:
        <span style="color: #408080; font-style: italic"># Get question_id from dictionary</span>
        question_id <span style="color: #666666">=</span> MATRIX_QUESTIONS[q_type]
        <span style="color: #408080; font-style: italic"># Get answers from session</span>
        answers <span style="color: #666666">=</span> session[<span style="color: #BA2121">&#39;answers&#39;</span>]
        <span style="color: #008000; font-weight: bold">if</span> q_type <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;det&#39;</span>:
            <span style="color: #408080; font-style: italic"># For determinant questions (non-matrix answers)</span>
            <span style="color: #408080; font-style: italic"># Get all input answers from form</span>
            inputs <span style="color: #666666">=</span> [request<span style="color: #666666">.</span>args<span style="color: #666666">.</span>get(<span style="color: #008000">str</span>(x), <span style="color: #666666">0</span>) <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #666666">10</span>)]
            <span style="color: #408080; font-style: italic"># Convert all inputs to ints</span>
            inputs <span style="color: #666666">=</span> [<span style="color: #008000">int</span>(x) <span style="color: #008000; font-weight: bold">if</span> x <span style="color: #008000; font-weight: bold">else</span> <span style="color: #666666">0</span> <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> inputs]
            <span style="color: #408080; font-style: italic"># Initialise empty scores array</span>
            scores <span style="color: #666666">=</span> []
            <span style="color: #408080; font-style: italic"># Loop over all answers</span>
            <span style="color: #008000; font-weight: bold">for</span> n, x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">enumerate</span>(answers):
                <span style="color: #408080; font-style: italic"># check corresponding input answer</span>
                <span style="color: #408080; font-style: italic"># Add one to scores array if input answer matches</span>
                <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">int</span>(x) <span style="color: #666666">==</span> inputs[n]:
                    scores<span style="color: #666666">.</span>append(<span style="color: #666666">1</span>)
                <span style="color: #008000; font-weight: bold">else</span>:
                    scores<span style="color: #666666">.</span>append(<span style="color: #666666">0</span>)
            <span style="color: #408080; font-style: italic"># Calculate percentage score</span>
            percent <span style="color: #666666">=</span> <span style="color: #008000">sum</span>(scores)<span style="color: #666666">*100//</span><span style="color: #008000">len</span>(answers)
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #408080; font-style: italic"># Convert each answer in answers list to a 2-d list</span>
            <span style="color: #408080; font-style: italic"># Also convert all elements in matrix to string</span>
            answers <span style="color: #666666">=</span> [[[<span style="color: #008000">str</span>(i) <span style="color: #008000; font-weight: bold">for</span> i <span style="color: #AA22FF; font-weight: bold">in</span> j] <span style="color: #008000; font-weight: bold">for</span> j <span style="color: #AA22FF; font-weight: bold">in</span> ast<span style="color: #666666">.</span>literal_eval(a)] <span style="color: #008000; font-weight: bold">for</span> a <span style="color: #AA22FF; font-weight: bold">in</span> answers]
            <span style="color: #408080; font-style: italic"># Initialize input answers list</span>
            inputs <span style="color: #666666">=</span> []
            <span style="color: #008000; font-weight: bold">for</span> n, a <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">enumerate</span>(answers):
                inputs<span style="color: #666666">.</span>append([])
                <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">len</span>(a)):
                    inputs[n]<span style="color: #666666">.</span>append([])
                    <span style="color: #008000; font-weight: bold">for</span> y <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">len</span>(a[<span style="color: #666666">0</span>])):
                        <span style="color: #408080; font-style: italic"># Get form input and add to matrix</span>
                        <span style="color: #408080; font-style: italic"># Add 0 if there is no form input</span>
                        i <span style="color: #666666">=</span> request<span style="color: #666666">.</span>args<span style="color: #666666">.</span>get(<span style="color: #008000">str</span>(n) <span style="color: #666666">+</span> <span style="color: #008000">str</span>(x) <span style="color: #666666">+</span> <span style="color: #008000">str</span>(y), <span style="color: #666666">0</span>)
                        <span style="color: #008000; font-weight: bold">if</span> i:
                            inputs[n][x]<span style="color: #666666">.</span>append(i)
                        <span style="color: #008000; font-weight: bold">else</span>:
                            inputs[n][x]<span style="color: #666666">.</span>append(<span style="color: #BA2121">&#39;0&#39;</span>)
            <span style="color: #408080; font-style: italic"># Initialise scores list</span>
            scores <span style="color: #666666">=</span> []
            <span style="color: #408080; font-style: italic"># Check all input answers against stored answers</span>
            <span style="color: #008000; font-weight: bold">for</span> n, x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">enumerate</span>(answers):
                <span style="color: #008000; font-weight: bold">if</span> x <span style="color: #666666">==</span> inputs[n]:
                    scores<span style="color: #666666">.</span>append(<span style="color: #666666">1</span>)
                <span style="color: #008000; font-weight: bold">else</span>:
                    scores<span style="color: #666666">.</span>append(<span style="color: #666666">0</span>)
            <span style="color: #408080; font-style: italic"># Calculate percent score</span>
            percent <span style="color: #666666">=</span> <span style="color: #008000">sum</span>(scores) <span style="color: #666666">*</span> <span style="color: #666666">100</span> <span style="color: #666666">//</span> <span style="color: #008000">len</span>(answers)
        questions <span style="color: #666666">=</span> session[<span style="color: #BA2121">&#39;questions&#39;</span>]
        <span style="color: #408080; font-style: italic"># Convert items in answers and inputs to strings</span>
        <span style="color: #408080; font-style: italic"># so they can be displayed in score page</span>
        answers <span style="color: #666666">=</span> [<span style="color: #008000">str</span>(a)<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&quot;&#39;&quot;</span>, <span style="color: #BA2121">&quot;&quot;</span>) <span style="color: #008000; font-weight: bold">for</span> a <span style="color: #AA22FF; font-weight: bold">in</span> answers]
        inputs <span style="color: #666666">=</span> [<span style="color: #008000">str</span>(i)<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&quot;&#39;&quot;</span>, <span style="color: #BA2121">&quot;&quot;</span>) <span style="color: #008000; font-weight: bold">for</span> i <span style="color: #AA22FF; font-weight: bold">in</span> inputs]

    <span style="color: #008000; font-weight: bold">elif</span> topic <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;complex&#39;</span>:
        <span style="color: #408080; font-style: italic"># Get question id (for database)</span>
        question_id <span style="color: #666666">=</span> COMPLEX_QUESTIONS[q_type]
        answers <span style="color: #666666">=</span> session[<span style="color: #BA2121">&#39;answers&#39;</span>]
        <span style="color: #008000; font-weight: bold">if</span> q_type <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;mod_arg&#39;</span>:
            <span style="color: #408080; font-style: italic"># For modulus and argument questions (non-complex answers)</span>
            <span style="color: #408080; font-style: italic"># Initialise input answer list</span>
            inputs <span style="color: #666666">=</span> []
            <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">len</span>(answers)):
                <span style="color: #408080; font-style: italic"># Get form inputs with names beginning mod and arg</span>
                <span style="color: #408080; font-style: italic"># Put into tuple (modulus,answer) and add to inputs list</span>
                inputs<span style="color: #666666">.</span>append((
                    request<span style="color: #666666">.</span>args<span style="color: #666666">.</span>get(<span style="color: #008000">str</span>(x) <span style="color: #666666">+</span> <span style="color: #BA2121">&#39;mod&#39;</span>, <span style="color: #666666">0</span>),
                    request<span style="color: #666666">.</span>args<span style="color: #666666">.</span>get(<span style="color: #008000">str</span>(x) <span style="color: #666666">+</span> <span style="color: #BA2121">&#39;arg&#39;</span>, <span style="color: #666666">0</span>)
                    ))
            <span style="color: #408080; font-style: italic"># Change answers stored in session to correct type</span>
            answers <span style="color: #666666">=</span> [(<span style="color: #008000">str</span>(i), <span style="color: #008000">str</span>(j)) <span style="color: #008000; font-weight: bold">for</span> i, j <span style="color: #AA22FF; font-weight: bold">in</span> [ast<span style="color: #666666">.</span>literal_eval(a) <span style="color: #008000; font-weight: bold">for</span> a <span style="color: #AA22FF; font-weight: bold">in</span> answers]]
            <span style="color: #408080; font-style: italic"># Initialise scores list</span>
            scores <span style="color: #666666">=</span> []
            <span style="color: #408080; font-style: italic"># Check answers, add 1 to scores if answers match else add 0</span>
            <span style="color: #008000; font-weight: bold">for</span> n, x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">enumerate</span>(answers):
                <span style="color: #008000; font-weight: bold">if</span> x <span style="color: #666666">==</span> inputs[n]:
                    scores<span style="color: #666666">.</span>append(<span style="color: #666666">1</span>)
                <span style="color: #008000; font-weight: bold">else</span>:
                    scores<span style="color: #666666">.</span>append(<span style="color: #666666">0</span>)
            <span style="color: #408080; font-style: italic"># Calculate percent score</span>
            percent <span style="color: #666666">=</span> <span style="color: #008000">sum</span>(scores) <span style="color: #666666">*</span> <span style="color: #666666">100</span> <span style="color: #666666">//</span> <span style="color: #008000">len</span>(answers)
            <span style="color: #008000; font-weight: bold">pass</span>
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #408080; font-style: italic"># Initialise input answers list</span>
            inputs <span style="color: #666666">=</span> []
            <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">len</span>(answers)):
                <span style="color: #408080; font-style: italic"># Get form inputs</span>
                <span style="color: #408080; font-style: italic"># Add string representation of complex number answer to inputs</span>
                re <span style="color: #666666">=</span> <span style="color: #008000">str</span>(request<span style="color: #666666">.</span>args<span style="color: #666666">.</span>get(<span style="color: #008000">str</span>(x)<span style="color: #666666">+</span><span style="color: #BA2121">&#39;re&#39;</span>, <span style="color: #666666">0</span>)<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39; &#39;</span>, <span style="color: #BA2121">&#39;&#39;</span>))
                im <span style="color: #666666">=</span> <span style="color: #008000">str</span>(request<span style="color: #666666">.</span>args<span style="color: #666666">.</span>get(<span style="color: #008000">str</span>(x)<span style="color: #666666">+</span><span style="color: #BA2121">&#39;im&#39;</span>, <span style="color: #666666">0</span>)<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39; &#39;</span>, <span style="color: #BA2121">&#39;&#39;</span>))
                <span style="color: #008000; font-weight: bold">if</span> <span style="color: #BA2121">&#39;-&#39;</span> <span style="color: #AA22FF; font-weight: bold">in</span> im:   <span style="color: #408080; font-style: italic"># If imaginary part is negative</span>
                    inputs<span style="color: #666666">.</span>append(re<span style="color: #666666">+</span>im<span style="color: #666666">+</span><span style="color: #BA2121">&#39;j&#39;</span>)
                <span style="color: #008000; font-weight: bold">else</span>:   <span style="color: #408080; font-style: italic"># If imaginary part is positive, use &#39;+&#39;</span>
                    inputs<span style="color: #666666">.</span>append(re<span style="color: #666666">+</span><span style="color: #BA2121">&#39;+&#39;</span><span style="color: #666666">+</span>im<span style="color: #666666">+</span><span style="color: #BA2121">&#39;j&#39;</span>)
            <span style="color: #408080; font-style: italic"># Initialise scores list</span>
            scores <span style="color: #666666">=</span> []
            <span style="color: #408080; font-style: italic"># Loop over answers</span>
            <span style="color: #008000; font-weight: bold">for</span> n, x <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">enumerate</span>(answers):
                <span style="color: #408080; font-style: italic"># Convert both input answer and stored answer to complex number</span>
                <span style="color: #408080; font-style: italic"># Check if both answers match and add 1 or 0 to scores</span>
                <span style="color: #008000; font-weight: bold">print</span>(x,inputs[n])
                <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">complex</span>(x) <span style="color: #666666">==</span> <span style="color: #008000">complex</span>(inputs[n]):
                    scores<span style="color: #666666">.</span>append(<span style="color: #666666">1</span>)
                <span style="color: #008000; font-weight: bold">else</span>:
                    scores<span style="color: #666666">.</span>append(<span style="color: #666666">0</span>)
            <span style="color: #408080; font-style: italic"># Calculate percent score</span>
            percent <span style="color: #666666">=</span> <span style="color: #008000">sum</span>(scores)<span style="color: #666666">*100//</span><span style="color: #008000">len</span>(answers)
        questions <span style="color: #666666">=</span> session[<span style="color: #BA2121">&#39;questions&#39;</span>]
    <span style="color: #008000; font-weight: bold">else</span>:
        <span style="color: #408080; font-style: italic"># If topic is not matrix or complex, return 404</span>
        abort(<span style="color: #666666">404</span>)
    <span style="color: #008000; font-weight: bold">if</span> current_user<span style="color: #666666">.</span>is_authenticated <span style="color: #AA22FF; font-weight: bold">and</span> current_user<span style="color: #666666">.</span>role <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;student&#39;</span>:
        <span style="color: #408080; font-style: italic"># Only add a mark to database if user is a logged in student</span>
        mark <span style="color: #666666">=</span> Mark(<span style="color: #008000">sum</span>(scores), <span style="color: #008000">len</span>(scores), question_id,
                    current_user<span style="color: #666666">.</span>user_id)
        db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>add(mark)
        <span style="color: #408080; font-style: italic"># Get student by user id</span>
        s <span style="color: #666666">=</span> Student<span style="color: #666666">.</span>query<span style="color: #666666">.</span>filter_by(user_id<span style="color: #666666">=</span>current_user<span style="color: #666666">.</span>user_id)<span style="color: #666666">.</span>first()
        <span style="color: #408080; font-style: italic"># Get all of the students tasks</span>
        ts <span style="color: #666666">=</span> s<span style="color: #666666">.</span>tasks<span style="color: #666666">.</span>all()
        <span style="color: #408080; font-style: italic"># Find out whether there is an active task with the same question_id</span>
        <span style="color: #408080; font-style: italic"># as the task that is being completed</span>
        task <span style="color: #666666">=</span> <span style="color: #008000">None</span>
        <span style="color: #408080; font-style: italic"># Loop over all tasks</span>
        <span style="color: #008000; font-weight: bold">for</span> t <span style="color: #AA22FF; font-weight: bold">in</span> ts:
            <span style="color: #008000; font-weight: bold">if</span> t<span style="color: #666666">.</span>question_id <span style="color: #666666">==</span> question_id <span style="color: #AA22FF; font-weight: bold">and</span> t<span style="color: #666666">.</span>completed <span style="color: #AA22FF; font-weight: bold">is</span> <span style="color: #008000">False</span>:
                task <span style="color: #666666">=</span> t
                <span style="color: #408080; font-style: italic"># Break once relevant task found</span>
                <span style="color: #008000; font-weight: bold">break</span>
        <span style="color: #408080; font-style: italic"># If there is no task, task = None</span>
        <span style="color: #408080; font-style: italic"># If there is such a task</span>
        <span style="color: #008000; font-weight: bold">if</span> task:
            <span style="color: #408080; font-style: italic"># Link task with corresponding mark</span>
            task<span style="color: #666666">.</span>mark_id <span style="color: #666666">=</span> mark<span style="color: #666666">.</span>mark_id
            <span style="color: #408080; font-style: italic"># Set task as completed</span>
            task<span style="color: #666666">.</span>completed <span style="color: #666666">=</span> <span style="color: #008000">True</span>
            <span style="color: #408080; font-style: italic"># Add to database</span>
            db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>add(task)
            flash(<span style="color: #BA2121">&#39;Task Completed!&#39;</span>)
        <span style="color: #408080; font-style: italic"># Update database with all changes</span>
        db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>commit()
    <span style="color: #408080; font-style: italic"># Return data in JSON form for javascript to display</span>
    <span style="color: #008000; font-weight: bold">return</span> jsonify(answers<span style="color: #666666">=</span>answers, inputs<span style="color: #666666">=</span>inputs, questions<span style="color: #666666">=</span>questions,
                    percent<span style="color: #666666">=</span>percent, scores<span style="color: #666666">=</span>scores)
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/routes/user.py</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">flask</span> <span style="color: #008000; font-weight: bold">import</span> (Blueprint, Flask, abort, flash, jsonify, redirect,
                   render_template, request, url_for)
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">flask_login</span> <span style="color: #008000; font-weight: bold">import</span> current_user, login_required, login_user, logout_user
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">flask_mail</span> <span style="color: #008000; font-weight: bold">import</span> Message
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">itsdangerous</span> <span style="color: #008000; font-weight: bold">import</span> URLSafeTimedSerializer
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">werkzeug.security</span> <span style="color: #008000; font-weight: bold">import</span> generate_password_hash

<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">app</span> <span style="color: #008000; font-weight: bold">import</span> app, db, mail

<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">..forms</span> <span style="color: #008000; font-weight: bold">import</span> (ChangeDetailsForm, ChangePasswordForm,
                     ChangePasswordForm1, LoginForm, RegisterForm,
                     RequestPasswordChangeForm, SetTaskForm, TeacherLinkForm)
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">..models</span> <span style="color: #008000; font-weight: bold">import</span> Student, Task, Teacher, User, Graph
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">..pyscripts.question_dict</span> <span style="color: #008000; font-weight: bold">import</span> QUESTIONS

<span style="color: #408080; font-style: italic"># Initialise blueprint</span>
user <span style="color: #666666">=</span> Blueprint(<span style="color: #BA2121">&#39;user&#39;</span>, <span style="color: #19177C">__name__</span>, template_folder<span style="color: #666666">=</span><span style="color: #BA2121">&#39;templates&#39;</span>)

<span style="color: #408080; font-style: italic"># Create serializer object -- used to create tokens for emails</span>
serializer <span style="color: #666666">=</span> URLSafeTimedSerializer(app<span style="color: #666666">.</span>config[<span style="color: #BA2121">&quot;SECRET_KEY&quot;</span>])


<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">send_email</span>(address, subject, html):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Sends email to address given the html content of email.&quot;&quot;&quot;</span>
    msg <span style="color: #666666">=</span> Message(subject, sender<span style="color: #666666">=</span><span style="color: #BA2121">&quot;testapp545545@gmail.com&quot;</span>,
                  recipients<span style="color: #666666">=</span>[address])
    msg<span style="color: #666666">.</span>html <span style="color: #666666">=</span> html
    mail<span style="color: #666666">.</span>send(msg)


<span style="color: #AA22FF">@user.route</span>(<span style="color: #BA2121">&#39;/login&#39;</span>, methods<span style="color: #666666">=</span>[<span style="color: #BA2121">&#39;GET&#39;</span>, <span style="color: #BA2121">&#39;POST&#39;</span>])
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">login</span>():
    <span style="color: #008000; font-weight: bold">if</span> current_user<span style="color: #666666">.</span>is_authenticated:
        <span style="color: #408080; font-style: italic"># already logged in user shouldnt go to login page</span>
        <span style="color: #008000; font-weight: bold">return</span> redirect(url_for(<span style="color: #BA2121">&#39;main&#39;</span>))
    loginform <span style="color: #666666">=</span> LoginForm()
    <span style="color: #008000; font-weight: bold">if</span> loginform<span style="color: #666666">.</span>validate_on_submit():
        user <span style="color: #666666">=</span> User<span style="color: #666666">.</span>query<span style="color: #666666">.</span>filter_by(email<span style="color: #666666">=</span>loginform<span style="color: #666666">.</span>email<span style="color: #666666">.</span>data<span style="color: #666666">.</span>lower())<span style="color: #666666">.</span>first()
        <span style="color: #408080; font-style: italic"># If user exists and password enters is valid</span>
        <span style="color: #008000; font-weight: bold">if</span> user <span style="color: #AA22FF; font-weight: bold">and</span> user<span style="color: #666666">.</span>check_pw(loginform<span style="color: #666666">.</span>password<span style="color: #666666">.</span>data):
            <span style="color: #408080; font-style: italic"># Login user and update database</span>
            user<span style="color: #666666">.</span>authenticated <span style="color: #666666">=</span> <span style="color: #008000">True</span>
            db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>add(user)
            db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>commit()
            login_user(user)
            <span style="color: #408080; font-style: italic"># Go back to home page</span>
            <span style="color: #008000; font-weight: bold">return</span> redirect(url_for(<span style="color: #BA2121">&#39;main&#39;</span>))
        <span style="color: #008000; font-weight: bold">else</span>:
            flash(<span style="color: #BA2121">&#39;Incorrect Credentials&#39;</span>)
    <span style="color: #408080; font-style: italic"># Return empty login page if no form submitted or errors on form validation</span>
    <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;user/login.html&#39;</span>, loginform<span style="color: #666666">=</span>loginform)


<span style="color: #AA22FF">@user.route</span>(<span style="color: #BA2121">&#39;/logout&#39;</span>)
<span style="color: #AA22FF">@login_required</span>
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">logout</span>():
    <span style="color: #408080; font-style: italic"># Load current user</span>
    user <span style="color: #666666">=</span> current_user
    <span style="color: #408080; font-style: italic"># Unauthenicate</span>
    user<span style="color: #666666">.</span>authenticated <span style="color: #666666">=</span> <span style="color: #008000">False</span>
    <span style="color: #408080; font-style: italic"># Update database</span>
    db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>add(user)
    db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>commit()
    <span style="color: #408080; font-style: italic"># Log out user and return to home page</span>
    logout_user()
    <span style="color: #008000; font-weight: bold">return</span> redirect(<span style="color: #BA2121">&#39;main&#39;</span>)


<span style="color: #AA22FF">@user.route</span>(<span style="color: #BA2121">&#39;/register&#39;</span>, methods<span style="color: #666666">=</span>[<span style="color: #BA2121">&#39;GET&#39;</span>, <span style="color: #BA2121">&#39;POST&#39;</span>])
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">register</span>():
    <span style="color: #008000; font-weight: bold">if</span> current_user<span style="color: #666666">.</span>is_authenticated:
        <span style="color: #408080; font-style: italic"># Already logged in user shouldnt go to register page</span>
        <span style="color: #008000; font-weight: bold">return</span> redirect(url_for(<span style="color: #BA2121">&#39;main&#39;</span>))
    regform <span style="color: #666666">=</span> RegisterForm()
    <span style="color: #008000; font-weight: bold">if</span> regform<span style="color: #666666">.</span>validate_on_submit():
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #AA22FF; font-weight: bold">not</span> User<span style="color: #666666">.</span>query<span style="color: #666666">.</span>filter_by(email<span style="color: #666666">=</span>regform<span style="color: #666666">.</span>email<span style="color: #666666">.</span>data<span style="color: #666666">.</span>lower())<span style="color: #666666">.</span>first():
            <span style="color: #408080; font-style: italic"># Only students have to register</span>
            <span style="color: #408080; font-style: italic"># So create student object with form data</span>
            u <span style="color: #666666">=</span> Student(regform<span style="color: #666666">.</span>fname<span style="color: #666666">.</span>data<span style="color: #666666">.</span>lower(), regform<span style="color: #666666">.</span>lname<span style="color: #666666">.</span>data<span style="color: #666666">.</span>lower(),
                        regform<span style="color: #666666">.</span>email<span style="color: #666666">.</span>data<span style="color: #666666">.</span>lower(), regform<span style="color: #666666">.</span>password<span style="color: #666666">.</span>data,
                        <span style="color: #BA2121">&#39;student&#39;</span>)
            <span style="color: #408080; font-style: italic"># Add student object to database.</span>
            db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>add(u)
            db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>commit()

            subject <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;Email Confirmation&quot;</span>
            <span style="color: #408080; font-style: italic">#Create token for confimation link</span>
            token <span style="color: #666666">=</span> serializer<span style="color: #666666">.</span>dumps(u<span style="color: #666666">.</span>email, salt<span style="color: #666666">=</span><span style="color: #BA2121">&#39;email-confirm-key&#39;</span>)
            <span style="color: #408080; font-style: italic"># Create confirmation url from token</span>
            confirm_url <span style="color: #666666">=</span> url_for(<span style="color: #BA2121">&#39;user.confirm_email&#39;</span>, token<span style="color: #666666">=</span>token, _external<span style="color: #666666">=</span><span style="color: #008000">True</span>)
            <span style="color: #408080; font-style: italic"># Render and send confirmation email</span>
            html <span style="color: #666666">=</span> render_template(<span style="color: #BA2121">&#39;emails/confirm_email.html&#39;</span>, confirm_url<span style="color: #666666">=</span>confirm_url)
            send_email(address<span style="color: #666666">=</span>u<span style="color: #666666">.</span>email, subject<span style="color: #666666">=</span>subject, html<span style="color: #666666">=</span>html)
            <span style="color: #408080; font-style: italic"># Log in the user and redirect to homepage</span>
            login_user(u)
            flash(<span style="color: #BA2121">&quot;Confirmation Email Sent&quot;</span>)
            <span style="color: #008000; font-weight: bold">return</span> redirect(url_for(<span style="color: #BA2121">&#39;main&#39;</span>))
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #408080; font-style: italic"># Cant have two users with the same email</span>
            flash(<span style="color: #BA2121">&#39;Email already exists&#39;</span>)
    <span style="color: #408080; font-style: italic"># Return signup page if GET request (no form submitted)</span>
    <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;user/signup.html&#39;</span>, regform<span style="color: #666666">=</span>regform)

<span style="color: #AA22FF">@user.route</span>(<span style="color: #BA2121">&#39;/confirm/&lt;token&gt;&#39;</span>)
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">confirm_email</span>(token):
    <span style="color: #008000; font-weight: bold">try</span>:
        <span style="color: #408080; font-style: italic"># Try to decode the token in the url with the given salt</span>
        <span style="color: #408080; font-style: italic"># Reject if token is more than an hour old</span>
        <span style="color: #408080; font-style: italic"># The token decodes to the user&#39;s email address</span>
        email <span style="color: #666666">=</span> serializer<span style="color: #666666">.</span>loads(token, salt<span style="color: #666666">=</span><span style="color: #BA2121">&quot;email-confirm-key&quot;</span>, max_age<span style="color: #666666">=86400</span>)
    <span style="color: #008000; font-weight: bold">except</span>:
        <span style="color: #408080; font-style: italic"># If the token is invalid and an error is thrown, return 404 error code</span>
        abort(<span style="color: #666666">404</span>)
    <span style="color: #408080; font-style: italic"># Get User from database based on email (from decoded token)</span>
    user <span style="color: #666666">=</span> User<span style="color: #666666">.</span>query<span style="color: #666666">.</span>filter_by(email<span style="color: #666666">=</span>email)<span style="color: #666666">.</span>first_or_404()
    <span style="color: #408080; font-style: italic"># Set confirmed status</span>
    user<span style="color: #666666">.</span>confirmed <span style="color: #666666">=</span> <span style="color: #008000">True</span>
    <span style="color: #408080; font-style: italic"># Update database</span>
    db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>add(user)
    db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>commit()
    <span style="color: #408080; font-style: italic">#Log in user and redirect to home page</span>
    login_user(user)
    flash(<span style="color: #BA2121">&#39;Email Confirmed&#39;</span>)
    <span style="color: #008000; font-weight: bold">return</span> redirect(url_for(<span style="color: #BA2121">&#39;main&#39;</span>))


<span style="color: #AA22FF">@user.route</span>(<span style="color: #BA2121">&#39;/reset&#39;</span>, methods<span style="color: #666666">=</span>[<span style="color: #BA2121">&#39;GET&#39;</span>, <span style="color: #BA2121">&#39;POST&#39;</span>])
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">reset</span>():
    <span style="color: #408080; font-style: italic">#Load form</span>
    form <span style="color: #666666">=</span> RequestPasswordChangeForm()
    <span style="color: #008000; font-weight: bold">if</span> form<span style="color: #666666">.</span>validate_on_submit():
        <span style="color: #408080; font-style: italic">#Get user from input email</span>
        user <span style="color: #666666">=</span> User<span style="color: #666666">.</span>query<span style="color: #666666">.</span>filter_by(email<span style="color: #666666">=</span>form<span style="color: #666666">.</span>email<span style="color: #666666">.</span>data)<span style="color: #666666">.</span>first()
        <span style="color: #408080; font-style: italic"># If there is no user, display error message and return to same page</span>
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #AA22FF; font-weight: bold">not</span> user:
            flash(<span style="color: #BA2121">&#39;Email address does not exist&#39;</span>)
            <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;user/reset.html&#39;</span>, form<span style="color: #666666">=</span>form)
        <span style="color: #408080; font-style: italic"># If user not confirmed, display error message and return to same page</span>
        <span style="color: #008000; font-weight: bold">elif</span> <span style="color: #AA22FF; font-weight: bold">not</span> user<span style="color: #666666">.</span>confirmed:
            flash(<span style="color: #BA2121">&#39;Email address not confirmed&#39;</span>)
            <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;user/reset.html&#39;</span>, form<span style="color: #666666">=</span>form)
        <span style="color: #408080; font-style: italic"># If there is a user with that email address, create email</span>
        subject <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;Password Reset&quot;</span>
        <span style="color: #408080; font-style: italic"># Create token based on users email</span>
        token <span style="color: #666666">=</span> serializer<span style="color: #666666">.</span>dumps(user<span style="color: #666666">.</span>email, salt<span style="color: #666666">=</span><span style="color: #BA2121">&#39;recover-key&#39;</span>)
        <span style="color: #408080; font-style: italic"># Generate url with the token</span>
        recover_url <span style="color: #666666">=</span> url_for(<span style="color: #BA2121">&#39;user.reset_with_token&#39;</span>, token<span style="color: #666666">=</span>token, _external<span style="color: #666666">=</span><span style="color: #008000">True</span>)
        <span style="color: #408080; font-style: italic"># Render and send the email</span>
        html <span style="color: #666666">=</span> render_template(<span style="color: #BA2121">&#39;emails/recover_email.html&#39;</span>, recover_url<span style="color: #666666">=</span>recover_url)
        send_email(address<span style="color: #666666">=</span>user<span style="color: #666666">.</span>email, subject<span style="color: #666666">=</span>subject, html<span style="color: #666666">=</span>html)
        <span style="color: #408080; font-style: italic"># Display success message and redirect to home page</span>
        flash(<span style="color: #BA2121">&#39;Password reset email sent&#39;</span>)
        <span style="color: #008000; font-weight: bold">return</span> redirect(url_for(<span style="color: #BA2121">&#39;main&#39;</span>))
    <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;user/reset.html&#39;</span>, form<span style="color: #666666">=</span>form)


<span style="color: #AA22FF">@user.route</span>(<span style="color: #BA2121">&#39;/reset/&lt;token&gt;&#39;</span>, methods<span style="color: #666666">=</span>[<span style="color: #BA2121">&#39;GET&#39;</span>, <span style="color: #BA2121">&#39;POST&#39;</span>])
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">reset_with_token</span>(token):
    <span style="color: #008000; font-weight: bold">try</span>:
        <span style="color: #408080; font-style: italic"># Try to decode the token in the url with the given salt</span>
        <span style="color: #408080; font-style: italic"># Reject if token is more than an hour old</span>
        <span style="color: #408080; font-style: italic"># The token decodes to the user&#39;s email address</span>
        email <span style="color: #666666">=</span> serializer<span style="color: #666666">.</span>loads(token, salt<span style="color: #666666">=</span><span style="color: #BA2121">&#39;recover-key&#39;</span>, max_age<span style="color: #666666">=86400</span>)
    <span style="color: #008000; font-weight: bold">except</span>:
        <span style="color: #408080; font-style: italic"># If the token is invalid and an error is thrown, return 404 error code</span>
        abort(<span style="color: #666666">404</span>)
    <span style="color: #408080; font-style: italic"># Load form</span>
    form <span style="color: #666666">=</span> ChangePasswordForm()
    <span style="color: #008000; font-weight: bold">if</span> form<span style="color: #666666">.</span>validate_on_submit():
        <span style="color: #408080; font-style: italic"># Get User from database based on email (from decoded token)</span>
        user <span style="color: #666666">=</span> User<span style="color: #666666">.</span>query<span style="color: #666666">.</span>filter_by(email<span style="color: #666666">=</span>email)<span style="color: #666666">.</span>first_or_404()
        <span style="color: #008000; font-weight: bold">print</span>(user)
        <span style="color: #408080; font-style: italic"># Change user&#39;s password</span>
        user<span style="color: #666666">.</span>password <span style="color: #666666">=</span> generate_password_hash(form<span style="color: #666666">.</span>password<span style="color: #666666">.</span>data)
        <span style="color: #408080; font-style: italic"># Add updated user to database</span>
        db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>add(user)
        db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>commit()
        flash(<span style="color: #BA2121">&quot;password updated successfully&quot;</span>)
        <span style="color: #408080; font-style: italic"># Redirect to login page so user logs in with new password</span>
        <span style="color: #008000; font-weight: bold">return</span> redirect(url_for(<span style="color: #BA2121">&#39;user.login&#39;</span>))
    <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;user/reset_with_token.html&#39;</span>, form<span style="color: #666666">=</span>form, token<span style="color: #666666">=</span>token)


<span style="color: #AA22FF">@user.route</span>(<span style="color: #BA2121">&#39;/_delete_teacher&#39;</span>, methods<span style="color: #666666">=</span>[<span style="color: #BA2121">&#39;POST&#39;</span>])
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">delete_teacher</span>():
    <span style="color: #408080; font-style: italic"># Get user id</span>
    user_id <span style="color: #666666">=</span> current_user<span style="color: #666666">.</span>user_id
    <span style="color: #408080; font-style: italic"># Get student from user_id</span>
    s <span style="color: #666666">=</span> Student<span style="color: #666666">.</span>query<span style="color: #666666">.</span>filter_by(user_id<span style="color: #666666">=</span>user_id)<span style="color: #666666">.</span>first()
    <span style="color: #408080; font-style: italic"># Get teacher id to be deleted from student and delete link</span>
    teacher_id <span style="color: #666666">=</span> request<span style="color: #666666">.</span>form<span style="color: #666666">.</span>get(<span style="color: #BA2121">&#39;teacher_id&#39;</span>, <span style="color: #008000">None</span>)
    t <span style="color: #666666">=</span> Teacher<span style="color: #666666">.</span>query<span style="color: #666666">.</span>filter_by(teacher_id<span style="color: #666666">=</span>teacher_id)<span style="color: #666666">.</span>first()
    a <span style="color: #666666">=</span> t<span style="color: #666666">.</span>remove_student(s)
    db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>add(a)
    db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>commit()
    <span style="color: #008000; font-weight: bold">return</span> jsonify()  <span style="color: #408080; font-style: italic"># return nothing (no error)</span>


<span style="color: #AA22FF">@user.route</span>(<span style="color: #BA2121">&#39;/_delete_student&#39;</span>, methods<span style="color: #666666">=</span>[<span style="color: #BA2121">&#39;POST&#39;</span>])
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">delete_student</span>():
    <span style="color: #408080; font-style: italic"># Get user id</span>
    user_id <span style="color: #666666">=</span> current_user<span style="color: #666666">.</span>user_id
    <span style="color: #408080; font-style: italic"># Get teacher from user_id</span>
    t <span style="color: #666666">=</span> Teacher<span style="color: #666666">.</span>query<span style="color: #666666">.</span>filter_by(user_id<span style="color: #666666">=</span>user_id)<span style="color: #666666">.</span>first()
    <span style="color: #408080; font-style: italic"># Get student id to be deleted from teacher and delete link</span>
    student_id <span style="color: #666666">=</span> request<span style="color: #666666">.</span>form<span style="color: #666666">.</span>get(<span style="color: #BA2121">&#39;student_id&#39;</span>, <span style="color: #008000">None</span>)
    s <span style="color: #666666">=</span> Student<span style="color: #666666">.</span>query<span style="color: #666666">.</span>filter_by(student_id<span style="color: #666666">=</span>student_id)<span style="color: #666666">.</span>first()
    a <span style="color: #666666">=</span> t<span style="color: #666666">.</span>remove_student(s)
    db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>add(a)
    db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>commit()
    <span style="color: #008000; font-weight: bold">return</span> jsonify()  <span style="color: #408080; font-style: italic"># return nothing (no error)</span>


<span style="color: #AA22FF">@user.route</span>(<span style="color: #BA2121">&#39;/_delete_graph&#39;</span>, methods<span style="color: #666666">=</span>[<span style="color: #BA2121">&#39;POST&#39;</span>])
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">delete_graph</span>():
    <span style="color: #408080; font-style: italic"># Get id of graph to be deleted</span>
    graph_id <span style="color: #666666">=</span> request<span style="color: #666666">.</span>form<span style="color: #666666">.</span>get(<span style="color: #BA2121">&#39;graph_id&#39;</span>, <span style="color: #008000">None</span>)
    <span style="color: #408080; font-style: italic"># Query database and delete graph</span>
    g <span style="color: #666666">=</span> Graph<span style="color: #666666">.</span>query<span style="color: #666666">.</span>filter_by(graph_id<span style="color: #666666">=</span>graph_id)<span style="color: #666666">.</span>delete()
    db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>commit()
    <span style="color: #008000; font-weight: bold">return</span> jsonify()  <span style="color: #408080; font-style: italic"># return nothing (no error)</span>


<span style="color: #AA22FF">@user.route</span>(<span style="color: #BA2121">&#39;/_delete_task&#39;</span>, methods<span style="color: #666666">=</span>[<span style="color: #BA2121">&#39;POST&#39;</span>])
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">delete_task</span>():
    <span style="color: #008000; font-weight: bold">pass</span>


<span style="color: #AA22FF">@user.route</span>(<span style="color: #BA2121">&#39;/account&#39;</span>, methods<span style="color: #666666">=</span>[<span style="color: #BA2121">&#39;GET&#39;</span>, <span style="color: #BA2121">&#39;POST&#39;</span>])
<span style="color: #AA22FF">@login_required</span>
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">account</span>():
    <span style="color: #408080; font-style: italic"># Get current user data</span>
    user_id <span style="color: #666666">=</span> current_user<span style="color: #666666">.</span>user_id
    u <span style="color: #666666">=</span> User<span style="color: #666666">.</span>query<span style="color: #666666">.</span>get(user_id)
    <span style="color: #008000; font-weight: bold">if</span> u<span style="color: #666666">.</span>role <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;student&#39;</span>:
        <span style="color: #408080; font-style: italic"># Load all forms</span>
        changeform <span style="color: #666666">=</span> ChangeDetailsForm(obj<span style="color: #666666">=</span>u)
        linkform <span style="color: #666666">=</span> TeacherLinkForm()
        pwform <span style="color: #666666">=</span> ChangePasswordForm1()
        <span style="color: #008000; font-weight: bold">if</span> linkform<span style="color: #666666">.</span>link_submit<span style="color: #666666">.</span>data <span style="color: #AA22FF; font-weight: bold">and</span> linkform<span style="color: #666666">.</span>validate_on_submit():
            <span style="color: #408080; font-style: italic"># If the links form is submitted, try to get the teacher with input code</span>
            t <span style="color: #666666">=</span> Teacher<span style="color: #666666">.</span>query<span style="color: #666666">.</span>filter_by(code<span style="color: #666666">=</span>linkform<span style="color: #666666">.</span>link_code<span style="color: #666666">.</span>data)<span style="color: #666666">.</span>first()
            <span style="color: #008000; font-weight: bold">if</span> t:
                <span style="color: #408080; font-style: italic"># If teacher with link exists</span>
                <span style="color: #408080; font-style: italic"># Load student object</span>
                s <span style="color: #666666">=</span> Student<span style="color: #666666">.</span>query<span style="color: #666666">.</span>filter_by(user_id<span style="color: #666666">=</span>user_id)<span style="color: #666666">.</span>first()
                <span style="color: #408080; font-style: italic"># Try to add this student to the teacher</span>
                a <span style="color: #666666">=</span> t<span style="color: #666666">.</span>add_student(s)
                <span style="color: #008000; font-weight: bold">if</span> <span style="color: #AA22FF; font-weight: bold">not</span> a:
                    <span style="color: #408080; font-style: italic"># If add_student returns none, then student is already linked</span>
                    flash(<span style="color: #BA2121">&#39;Already linked to this teacher&#39;</span>)
                    <span style="color: #408080; font-style: italic"># Go back to account page</span>
                    <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;user/student_account.html&#39;</span>,
                        student<span style="color: #666666">=</span>u, qs<span style="color: #666666">=</span>QUESTIONS, linkform<span style="color: #666666">=</span>linkform, changeform<span style="color: #666666">=</span>changeform, pwform<span style="color: #666666">=</span>pwform)
                <span style="color: #408080; font-style: italic"># If student not already linked, commit link to database</span>
                db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>add(a)
                db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>commit()
                flash(<span style="color: #BA2121">&#39;Successfully linked&#39;</span>)
                <span style="color: #408080; font-style: italic"># Go back to account page</span>
                <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;user/student_account.html&#39;</span>,
                    student<span style="color: #666666">=</span>u, qs<span style="color: #666666">=</span>QUESTIONS, linkform<span style="color: #666666">=</span>linkform,
                    changeform<span style="color: #666666">=</span>changeform, pwform<span style="color: #666666">=</span>pwform)
            <span style="color: #008000; font-weight: bold">else</span>:
                flash(<span style="color: #BA2121">&#39;No teacher with that code&#39;</span>)
                <span style="color: #408080; font-style: italic"># Go back to account page with appropriate message</span>
                <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;user/student_account.html&#39;</span>,
                    student<span style="color: #666666">=</span>u, qs<span style="color: #666666">=</span>QUESTIONS, linkform<span style="color: #666666">=</span>linkform,
                    changeform<span style="color: #666666">=</span>changeform, pwform<span style="color: #666666">=</span>pwform)
        <span style="color: #008000; font-weight: bold">if</span> changeform<span style="color: #666666">.</span>change_submit<span style="color: #666666">.</span>data <span style="color: #AA22FF; font-weight: bold">and</span> changeform<span style="color: #666666">.</span>validate_on_submit():
            <span style="color: #408080; font-style: italic"># If user is changing details, check password is correct</span>
            <span style="color: #008000; font-weight: bold">if</span> u<span style="color: #666666">.</span>check_pw(changeform<span style="color: #666666">.</span>password<span style="color: #666666">.</span>data):
                <span style="color: #408080; font-style: italic"># Get data from form and change attributes for user</span>
                u<span style="color: #666666">.</span>fname <span style="color: #666666">=</span> changeform<span style="color: #666666">.</span>fname<span style="color: #666666">.</span>data
                u<span style="color: #666666">.</span>lname <span style="color: #666666">=</span> changeform<span style="color: #666666">.</span>lname<span style="color: #666666">.</span>data
                u<span style="color: #666666">.</span>email <span style="color: #666666">=</span> changeform<span style="color: #666666">.</span>email<span style="color: #666666">.</span>data
                <span style="color: #408080; font-style: italic"># Update user in database.</span>
                db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>add(u)
                db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>commit()
                flash(<span style="color: #BA2121">&#39;Details changed successfully&#39;</span>)
                <span style="color: #408080; font-style: italic"># Go back to account page with message</span>
                <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;user/student_account.html&#39;</span>,
                    student<span style="color: #666666">=</span>u, qs<span style="color: #666666">=</span>QUESTIONS, linkform<span style="color: #666666">=</span>linkform,
                    changeform<span style="color: #666666">=</span>changeform, pwform<span style="color: #666666">=</span>pwform)
            <span style="color: #008000; font-weight: bold">else</span>:
                flash(<span style="color: #BA2121">&#39;Incorrect password&#39;</span>)
                <span style="color: #408080; font-style: italic"># Go back to account page with message</span>
                <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;user/student_account.html&#39;</span>,
                    student<span style="color: #666666">=</span>u, qs<span style="color: #666666">=</span>QUESTIONS, linkform<span style="color: #666666">=</span>linkform,
                    changeform<span style="color: #666666">=</span>changeform, pwform<span style="color: #666666">=</span>pwform)
        <span style="color: #008000; font-weight: bold">if</span> pwform<span style="color: #666666">.</span>pw_submit<span style="color: #666666">.</span>data <span style="color: #AA22FF; font-weight: bold">and</span> pwform<span style="color: #666666">.</span>validate_on_submit():
            <span style="color: #408080; font-style: italic"># Make sure old password was input correctly</span>
            <span style="color: #008000; font-weight: bold">if</span> u<span style="color: #666666">.</span>check_pw(pwform<span style="color: #666666">.</span>old_password<span style="color: #666666">.</span>data):
                <span style="color: #408080; font-style: italic"># Get form data and update users password</span>
                u<span style="color: #666666">.</span>password <span style="color: #666666">=</span> generate_password_hash(pwform<span style="color: #666666">.</span>password<span style="color: #666666">.</span>data)
                <span style="color: #408080; font-style: italic"># Update user in database</span>
                db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>add(u)
                db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>commit()
                flash(<span style="color: #BA2121">&#39;Password changed successfully&#39;</span>)
                <span style="color: #408080; font-style: italic"># Go back to account page with message</span>
                <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;user/student_account.html&#39;</span>,
                    student<span style="color: #666666">=</span>u, qs<span style="color: #666666">=</span>QUESTIONS, linkform<span style="color: #666666">=</span>linkform,
                    changeform<span style="color: #666666">=</span>changeform, pwform<span style="color: #666666">=</span>pwform)
            <span style="color: #008000; font-weight: bold">else</span>:
                flash(<span style="color: #BA2121">&#39;Incorrect password&#39;</span>)
                <span style="color: #408080; font-style: italic"># Go back to account page with message</span>
                <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;user/student_account.html&#39;</span>,
                    student<span style="color: #666666">=</span>u, qs<span style="color: #666666">=</span>QUESTIONS, linkform<span style="color: #666666">=</span>linkform,
                    changeform<span style="color: #666666">=</span>changeform, pwform<span style="color: #666666">=</span>pwform)
        <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;user/student_account.html&#39;</span>, student<span style="color: #666666">=</span>u,
                                qs<span style="color: #666666">=</span>QUESTIONS, linkform<span style="color: #666666">=</span>linkform,
                                changeform<span style="color: #666666">=</span>changeform, pwform<span style="color: #666666">=</span>pwform)
    <span style="color: #008000; font-weight: bold">elif</span> u<span style="color: #666666">.</span>role <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;teacher&#39;</span>:
        <span style="color: #408080; font-style: italic"># Get all the teachers linked students from the database</span>
        students <span style="color: #666666">=</span> u<span style="color: #666666">.</span>students<span style="color: #666666">.</span>all()
        <span style="color: #408080; font-style: italic"># List of tuples (student_id,student_name) for each student</span>
        <span style="color: #408080; font-style: italic"># Used in SetForm, when a teacher chooses which students to set which tasks</span>
        choices <span style="color: #666666">=</span> [(s<span style="color: #666666">.</span>student_id, s<span style="color: #666666">.</span>fname<span style="color: #666666">+</span><span style="color: #BA2121">&#39; &#39;</span><span style="color: #666666">+</span>s<span style="color: #666666">.</span>lname) <span style="color: #008000; font-weight: bold">for</span> s <span style="color: #AA22FF; font-weight: bold">in</span> students]
        <span style="color: #408080; font-style: italic"># Load forms</span>
        setform <span style="color: #666666">=</span> SetTaskForm(choices)
        changeform <span style="color: #666666">=</span> ChangeDetailsForm(obj<span style="color: #666666">=</span>u)
        pwform <span style="color: #666666">=</span> ChangePasswordForm1()
        <span style="color: #008000; font-weight: bold">if</span> setform<span style="color: #666666">.</span>set_submit<span style="color: #666666">.</span>data <span style="color: #AA22FF; font-weight: bold">and</span> setform<span style="color: #666666">.</span>validate_on_submit():
            <span style="color: #408080; font-style: italic"># If setform submitted (form for setting tasks)</span>
            <span style="color: #408080; font-style: italic"># Get teacher object from user_id</span>
            t <span style="color: #666666">=</span> Teacher<span style="color: #666666">.</span>query<span style="color: #666666">.</span>filter_by(user_id<span style="color: #666666">=</span>user_id)<span style="color: #666666">.</span>first()
            teach_id <span style="color: #666666">=</span> t<span style="color: #666666">.</span>teacher_id
            <span style="color: #408080; font-style: italic"># Loop over each student selected</span>
            <span style="color: #008000; font-weight: bold">for</span> s_id <span style="color: #AA22FF; font-weight: bold">in</span> setform<span style="color: #666666">.</span>student_select<span style="color: #666666">.</span>data:
                <span style="color: #408080; font-style: italic"># Loop over each tasks selected</span>
                <span style="color: #008000; font-weight: bold">for</span> q_id <span style="color: #AA22FF; font-weight: bold">in</span> setform<span style="color: #666666">.</span>task_select<span style="color: #666666">.</span>data:
                    <span style="color: #408080; font-style: italic"># Set task to student</span>
                    t <span style="color: #666666">=</span> Task(q_id, s_id, teach_id)
                    <span style="color: #408080; font-style: italic"># Add to database</span>
                    db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>add(t)
            <span style="color: #408080; font-style: italic"># Commit database changes</span>
            db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>commit()
            <span style="color: #408080; font-style: italic"># Go back to account page with success message</span>
            flash(<span style="color: #BA2121">&#39;Tasks set successfully&#39;</span>)
            <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;user/teacher_account.html&#39;</span>, teacher<span style="color: #666666">=</span>u, students<span style="color: #666666">=</span>students, setform<span style="color: #666666">=</span>setform, qs<span style="color: #666666">=</span>QUESTIONS, pwform<span style="color: #666666">=</span>pwform, changeform<span style="color: #666666">=</span>changeform)
        <span style="color: #008000; font-weight: bold">if</span> changeform<span style="color: #666666">.</span>change_submit<span style="color: #666666">.</span>data <span style="color: #AA22FF; font-weight: bold">and</span> changeform<span style="color: #666666">.</span>validate_on_submit():
            <span style="color: #008000; font-weight: bold">if</span> u<span style="color: #666666">.</span>check_pw(changeform<span style="color: #666666">.</span>password<span style="color: #666666">.</span>data):
                <span style="color: #408080; font-style: italic"># Get data from form and change attributes for user</span>
                u<span style="color: #666666">.</span>fname <span style="color: #666666">=</span> changeform<span style="color: #666666">.</span>fname<span style="color: #666666">.</span>data
                u<span style="color: #666666">.</span>lname <span style="color: #666666">=</span> changeform<span style="color: #666666">.</span>lname<span style="color: #666666">.</span>data
                u<span style="color: #666666">.</span>email <span style="color: #666666">=</span> changeform<span style="color: #666666">.</span>email<span style="color: #666666">.</span>data
                <span style="color: #408080; font-style: italic"># Update user in database</span>
                db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>add(u)
                db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>commit()
                <span style="color: #408080; font-style: italic"># Go back to account page with message</span>
                flash(<span style="color: #BA2121">&#39;Details changed successfully&#39;</span>)
                <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;user/teacher_account.html&#39;</span>,
                    teacher<span style="color: #666666">=</span>u, students<span style="color: #666666">=</span>students, setform<span style="color: #666666">=</span>setform,
                    qs<span style="color: #666666">=</span>QUESTIONS, pwform<span style="color: #666666">=</span>pwform, changeform<span style="color: #666666">=</span>changeform)
            <span style="color: #008000; font-weight: bold">else</span>:
                flash(<span style="color: #BA2121">&#39;Incorrect password&#39;</span>)
                <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;user/teacher_account.html&#39;</span>,
                    teacher<span style="color: #666666">=</span>u, students<span style="color: #666666">=</span>students, setform<span style="color: #666666">=</span>setform,
                    qs<span style="color: #666666">=</span>QUESTIONS, pwform<span style="color: #666666">=</span>pwform, changeform<span style="color: #666666">=</span>changeform)
        <span style="color: #008000; font-weight: bold">if</span> pwform<span style="color: #666666">.</span>pw_submit<span style="color: #666666">.</span>data <span style="color: #AA22FF; font-weight: bold">and</span> pwform<span style="color: #666666">.</span>validate_on_submit():
            <span style="color: #008000; font-weight: bold">if</span> u<span style="color: #666666">.</span>check_pw(pwform<span style="color: #666666">.</span>old_password<span style="color: #666666">.</span>data):
                <span style="color: #408080; font-style: italic"># Get form data and update users password</span>
                u<span style="color: #666666">.</span>password <span style="color: #666666">=</span> generate_password_hash(pwform<span style="color: #666666">.</span>password<span style="color: #666666">.</span>data)
                db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>add(u)
                db<span style="color: #666666">.</span>session<span style="color: #666666">.</span>commit()
                <span style="color: #408080; font-style: italic"># Go back to account page with success message</span>
                flash(<span style="color: #BA2121">&#39;Password changed successfully&#39;</span>)
                <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;user/teacher_account.html&#39;</span>,
                    teacher<span style="color: #666666">=</span>u, students<span style="color: #666666">=</span>students, setform<span style="color: #666666">=</span>setform,
                    qs<span style="color: #666666">=</span>QUESTIONS, pwform<span style="color: #666666">=</span>pwform, changeform<span style="color: #666666">=</span>changeform)
            <span style="color: #008000; font-weight: bold">else</span>:
                <span style="color: #408080; font-style: italic"># Go back to account page with error message</span>
                flash(<span style="color: #BA2121">&#39;Incorrect password&#39;</span>)
                <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;user/teacher_account.html&#39;</span>,
                    teacher<span style="color: #666666">=</span>u, students<span style="color: #666666">=</span>students, setform<span style="color: #666666">=</span>setform,
                    qs<span style="color: #666666">=</span>QUESTIONS, pwform<span style="color: #666666">=</span>pwform, changeform<span style="color: #666666">=</span>changeform)
        <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;user/teacher_account.html&#39;</span>,
            teacher<span style="color: #666666">=</span>u, students<span style="color: #666666">=</span>students, setform<span style="color: #666666">=</span>setform, qs<span style="color: #666666">=</span>QUESTIONS,
            pwform<span style="color: #666666">=</span>pwform, changeform<span style="color: #666666">=</span>changeform)
    <span style="color: #008000; font-weight: bold">else</span>:
        <span style="color: #008000; font-weight: bold">return</span> abort(<span style="color: #666666">500</span>)
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/static/scripts/loci_plot.js</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">var</span> elt <span style="color: #666666">=</span> <span style="color: #008000">document</span>.getElementById(<span style="color: #BA2121">&#39;calculator&#39;</span>);
<span style="color: #408080; font-style: italic">// Options for desmos grpah plotter</span>
<span style="color: #008000; font-weight: bold">var</span> options <span style="color: #666666">=</span> {
    expressions<span style="color: #666666">:</span><span style="color: #008000; font-weight: bold">true</span>,
    expressionsCollapsed<span style="color: #666666">:</span><span style="color: #008000; font-weight: bold">true</span>,
    keypad<span style="color: #666666">:</span><span style="color: #008000; font-weight: bold">false</span>,
    settingsMenu<span style="color: #666666">:</span><span style="color: #008000; font-weight: bold">false</span>
}
<span style="color: #408080; font-style: italic">// Initialize plotter</span>
<span style="color: #008000; font-weight: bold">var</span> calculator <span style="color: #666666">=</span> Desmos.Calculator(elt,options);
calculator.setGraphSettings({xAxisLabel<span style="color: #666666">:</span><span style="color: #BA2121">&#39;Re&#39;</span>,yAxisLabel<span style="color: #666666">:</span><span style="color: #BA2121">&#39;Im&#39;</span>})
<span style="color: #408080; font-style: italic">// Create reset state (for when the user resets the plotter)</span>
<span style="color: #008000; font-weight: bold">var</span> reset <span style="color: #666666">=</span> calculator.getState();

<span style="color: #008000; font-weight: bold">var</span> plots <span style="color: #666666">=</span> <span style="color: #666666">-1</span>

<span style="color: #008000; font-weight: bold">function</span> addplot(){
<span style="color: #408080; font-style: italic">// Get input from equation input field</span>
<span style="color: #008000; font-weight: bold">var</span> eq <span style="color: #666666">=</span> $(<span style="color: #BA2121">&#39;input[name=&quot;in&quot;]&#39;</span>).val()
<span style="color: #408080; font-style: italic">// Send GET request to server at /_plot with &#39;eq&#39; variable</span>
$.getJSON($SCRIPT_ROOT <span style="color: #666666">+</span> <span style="color: #BA2121">&#39;/_plot&#39;</span>, {
    eq<span style="color: #666666">:</span> eq
}, <span style="color: #008000; font-weight: bold">function</span>(data) {  <span style="color: #408080; font-style: italic">//function carried out on receiving data from server</span>
    <span style="color: #408080; font-style: italic">// Increment plots counter</span>
    <span style="color: #408080; font-style: italic">// Allows each plot to have an unique id</span>
    plots <span style="color: #666666">+=</span> <span style="color: #666666">1</span>;
    <span style="color: #408080; font-style: italic">// Add html for a row in the expressions table</span>
    <span style="color: #408080; font-style: italic">// Includes the expression, show/hide checkbox, delete button</span>
    $(<span style="color: #BA2121">&#39;#expressions tbody&#39;</span>).append(
        <span style="color: #BA2121">&#39;&lt;tr id=&quot;row&#39;</span><span style="color: #666666">+</span>plots<span style="color: #666666">+</span><span style="color: #BA2121">&#39;&quot;&gt;&#39;</span><span style="color: #666666">+</span>
            <span style="color: #BA2121">&#39;&lt;td&gt;&#39;</span><span style="color: #666666">+</span>
                <span style="color: #BA2121">&#39;`&#39;</span><span style="color: #666666">+</span>data.eq<span style="color: #666666">+</span><span style="color: #BA2121">&#39;`&#39;</span><span style="color: #666666">+</span>
            <span style="color: #BA2121">&#39;&lt;/td&gt;&#39;</span><span style="color: #666666">+</span>
            <span style="color: #BA2121">&#39;&lt;td&gt;&#39;</span><span style="color: #666666">+</span>
                <span style="color: #BA2121">&#39;&lt;input type=&quot;checkbox&quot; name=&quot;plot&quot; id=&quot;&#39;</span><span style="color: #666666">+</span>plots<span style="color: #666666">+</span><span style="color: #BA2121">&#39;&quot; checked&gt;&#39;</span><span style="color: #666666">+</span>
            <span style="color: #BA2121">&#39;&lt;/td&gt;&#39;</span><span style="color: #666666">+</span>
            <span style="color: #BA2121">&#39;&lt;td&gt;&#39;</span><span style="color: #666666">+</span>
                <span style="color: #BA2121">&#39;&lt;input type=&quot;button&quot; class=&quot;btn btn-block&quot; name=&quot;del&quot; id=&quot;del&#39;</span><span style="color: #666666">+</span>plots<span style="color: #666666">+</span><span style="color: #BA2121">&#39;&quot; value=&quot;X&quot;&gt;&#39;</span><span style="color: #666666">+</span>
            <span style="color: #BA2121">&#39;&lt;/td&gt;&#39;</span><span style="color: #666666">+</span>
        <span style="color: #BA2121">&#39;&lt;/tr&gt;&#39;</span>
    );
    <span style="color: #408080; font-style: italic">// Typeset math</span>
    MathJax.Hub.Queue([<span style="color: #BA2121">&quot;Typeset&quot;</span>,MathJax.Hub,<span style="color: #BA2121">&quot;expressions&quot;</span>]);
    <span style="color: #408080; font-style: italic">// Get result from received data</span>
    <span style="color: #008000; font-weight: bold">var</span> result <span style="color: #666666">=</span> data.result;
    console.log(result)
    <span style="color: #408080; font-style: italic">// Add expression to desmos plot</span>
    calculator.setExpression({id<span style="color: #666666">:</span>plots,latex<span style="color: #666666">:</span>result});

}).fail(<span style="color: #008000; font-weight: bold">function</span>(){  <span style="color: #408080; font-style: italic">//Display error message if server returns an error</span>
    $(<span style="color: #BA2121">&#39;#eq_in&#39;</span>).blur()
    alert(<span style="color: #BA2121">&#39;Please enter a valid equation&#39;</span>)
    $(<span style="color: #BA2121">&#39;#eq_in&#39;</span>).focus()
});
<span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000; font-weight: bold">false</span>;
}


$(<span style="color: #008000">document</span>).ready(<span style="color: #008000; font-weight: bold">function</span>() {
    $(<span style="color: #BA2121">&#39;#graph-select&#39;</span>).imagepicker({show_label<span style="color: #666666">:</span><span style="color: #008000; font-weight: bold">true</span>})
    <span style="color: #008000; font-weight: bold">var</span> queryDict <span style="color: #666666">=</span> {};
    <span style="color: #408080; font-style: italic">// Get all parameters</span>
    location.search.substr(<span style="color: #666666">1</span>).split(<span style="color: #BA2121">&quot;&amp;&quot;</span>).forEach(<span style="color: #008000; font-weight: bold">function</span>(item) {queryDict[item.split(<span style="color: #BA2121">&quot;=&quot;</span>)[<span style="color: #666666">0</span>]] <span style="color: #666666">=</span> item.split(<span style="color: #BA2121">&quot;=&quot;</span>)[<span style="color: #666666">1</span>]});
    <span style="color: #408080; font-style: italic">// If there is an id parameter, load graph with that id</span>
    <span style="color: #008000; font-weight: bold">if</span> (queryDict[<span style="color: #BA2121">&#39;id&#39;</span>]) {
        $.getJSON($SCRIPT_ROOT<span style="color: #666666">+</span><span style="color: #BA2121">&#39;/_addgraph&#39;</span>,{
            graph_id<span style="color: #666666">:</span> queryDict[<span style="color: #BA2121">&#39;id&#39;</span>]
        },<span style="color: #008000; font-weight: bold">function</span>(data){
            $(<span style="color: #BA2121">&#39;#load-modal&#39;</span>).modal(<span style="color: #BA2121">&#39;hide&#39;</span>)
            console.log(data.exprlist)
            $(<span style="color: #BA2121">&#39;#expressions&#39;</span>).html(data.exprlist)
            calculator.setState(data.desmosdata)
        }).fail(<span style="color: #008000; font-weight: bold">function</span>(){
            alert(<span style="color: #BA2121">&#39;Error Loading Graph&#39;</span>)
        });
    }
    <span style="color: #408080; font-style: italic">// If enter pressed while in the input box, add the plot to the graph</span>
    $(<span style="color: #BA2121">&#39;#eq_in&#39;</span>).on(<span style="color: #BA2121">&#39;keydown&#39;</span>, <span style="color: #008000; font-weight: bold">function</span>(e) {
        <span style="color: #008000; font-weight: bold">if</span> (e.keyCode<span style="color: #666666">===13</span>) {
            addplot();
        }});
    <span style="color: #408080; font-style: italic">// CLicking the go button also adds a plot to the graph</span>
    $(<span style="color: #BA2121">&#39;#go&#39;</span>).on(<span style="color: #BA2121">&#39;click&#39;</span>, addplot);
    <span style="color: #408080; font-style: italic">// Function for clear all button</span>
    $(<span style="color: #BA2121">&#39;#clear&#39;</span>).on(<span style="color: #BA2121">&#39;click&#39;</span>, <span style="color: #008000; font-weight: bold">function</span>() {
        <span style="color: #408080; font-style: italic">// Delete all rows in expressions table</span>
        $(<span style="color: #BA2121">&#39;#expressions tbody &gt; tr&#39;</span>).remove();
        <span style="color: #408080; font-style: italic">// Reset plot counter</span>
        plots <span style="color: #666666">=</span> <span style="color: #666666">-1</span>;
        <span style="color: #408080; font-style: italic">// Reset calculator</span>
        calculator.setState(reset);
    });
    <span style="color: #408080; font-style: italic">// Button for deleting individual plots</span>
    $(<span style="color: #BA2121">&#39;#expressions&#39;</span>).on(<span style="color: #BA2121">&#39;click&#39;</span>,<span style="color: #BA2121">&#39;[type=button]&#39;</span>,<span style="color: #008000; font-weight: bold">function</span>(){
        <span style="color: #408080; font-style: italic">// Get the id of button that was clicked - corresponds to the plots id</span>
        <span style="color: #008000; font-weight: bold">var</span> plot_no <span style="color: #666666">=</span> $(<span style="color: #008000; font-weight: bold">this</span>).attr(<span style="color: #BA2121">&#39;id&#39;</span>).replace(<span style="color: #BA2121">&#39;del&#39;</span>,<span style="color: #BA2121">&#39;&#39;</span>);
        <span style="color: #408080; font-style: italic">// Delete relevant row in expressions table</span>
        $(<span style="color: #BA2121">&#39;#row&#39;</span><span style="color: #666666">+</span>plot_no).remove();
        <span style="color: #408080; font-style: italic">// Delete relevant plot on graph</span>
        calculator.removeExpression({id<span style="color: #666666">:</span><span style="color: #008000">parseInt</span>(plot_no)})
    });
    <span style="color: #408080; font-style: italic">// Show/hide line(s)</span>
    $(<span style="color: #BA2121">&#39;#expressions&#39;</span>).on(<span style="color: #BA2121">&#39;click&#39;</span>,<span style="color: #BA2121">&#39;[type=checkbox]&#39;</span>,<span style="color: #008000; font-weight: bold">function</span>(){
        <span style="color: #408080; font-style: italic">// Get id of checkbox clicked</span>
        <span style="color: #008000; font-weight: bold">var</span> plot_no<span style="color: #666666">=</span>$(<span style="color: #008000; font-weight: bold">this</span>).attr(<span style="color: #BA2121">&#39;id&#39;</span>)
        <span style="color: #408080; font-style: italic">// See whether the checkbox is checked or not</span>
        <span style="color: #008000; font-weight: bold">var</span> checked <span style="color: #666666">=</span> $(<span style="color: #008000; font-weight: bold">this</span>).is(<span style="color: #BA2121">&#39;:checked&#39;</span>)
        <span style="color: #408080; font-style: italic">// Set hidden attribute of the expression the opposite of checked</span>
        calculator.setExpression({id<span style="color: #666666">:</span>plot_no,hidden<span style="color: #666666">:!</span>checked})
    });
    <span style="color: #408080; font-style: italic">// Function for saving a graph</span>
    $(<span style="color: #BA2121">&#39;#submit-graph&#39;</span>).on(<span style="color: #BA2121">&#39;click&#39;</span>,<span style="color: #008000; font-weight: bold">function</span>(){
        <span style="color: #408080; font-style: italic">// Send POST request to server at &#39;/_addgraph&#39; with data:</span>
        <span style="color: #408080; font-style: italic">// Graph title, graph data from desmos, the html for the expressions table,</span>
        <span style="color: #408080; font-style: italic">// Graph description, image data from a screenshot of graph</span>
        $.post(<span style="color: #BA2121">&#39;/_addgraph&#39;</span>,{
            title<span style="color: #666666">:</span>$(<span style="color: #BA2121">&#39;#title&#39;</span>).val(),
            desmosdata<span style="color: #666666">:</span>JSON.stringify(calculator.getState()),
            exprlist<span style="color: #666666">:</span>$(<span style="color: #BA2121">&#39;#expressions&#39;</span>).html(),
            description<span style="color: #666666">:</span>$(<span style="color: #BA2121">&#39;#desc&#39;</span>).val(),
            image<span style="color: #666666">:</span> calculator.screenshot({width<span style="color: #666666">:100</span>,height<span style="color: #666666">:100</span>,targetPixelRatio<span style="color: #666666">:2</span>})
        },<span style="color: #008000; font-weight: bold">function</span>(data){
            <span style="color: #008000; font-weight: bold">if</span> (data.status <span style="color: #666666">===</span> <span style="color: #BA2121">&#39;ok&#39;</span>) {
                <span style="color: #408080; font-style: italic">// If there was no error</span>
                <span style="color: #408080; font-style: italic">// Hide the save-graph dialog</span>
                $(<span style="color: #BA2121">&#39;#save-modal&#39;</span>).modal(<span style="color: #BA2121">&#39;hide&#39;</span>)
                <span style="color: #408080; font-style: italic">// Add option to load-graph dialog</span>
                $(<span style="color: #BA2121">&#39;#graph-select&#39;</span>).append(<span style="color: #BA2121">&#39;&lt;option value=&quot;&#39;</span><span style="color: #666666">+</span>data.id<span style="color: #666666">+</span><span style="color: #BA2121">&#39;&quot; data-img-src=&quot;&#39;</span><span style="color: #666666">+</span>data.image_url<span style="color: #666666">+</span><span style="color: #BA2121">&#39;&quot;&gt;&#39;</span><span style="color: #666666">+</span>data.title<span style="color: #666666">+</span><span style="color: #BA2121">&#39;&lt;/option&gt;&#39;</span>)
                alert(<span style="color: #BA2121">&quot;Successfully saved graph&quot;</span>)
                $(<span style="color: #BA2121">&#39;#graph-select&#39;</span>).imagepicker({show_label<span style="color: #666666">:</span><span style="color: #008000; font-weight: bold">true</span>})
            } <span style="color: #008000; font-weight: bold">else</span> {
                <span style="color: #408080; font-style: italic">// If there was an error, display the error message in a pop-up</span>
                alert(data.error)
                $(<span style="color: #BA2121">&#39;#eq_in&#39;</span>).focus()
            }
            });
    });
    <span style="color: #408080; font-style: italic">// Function for loading a saved graph</span>
    $(<span style="color: #BA2121">&#39;#load-graph&#39;</span>).on(<span style="color: #BA2121">&#39;click&#39;</span>,<span style="color: #008000; font-weight: bold">function</span>(){
        console.log($(<span style="color: #BA2121">&quot;#graph-select&quot;</span>).val())
        <span style="color: #408080; font-style: italic">// Get the id of the graph selected</span>
        id <span style="color: #666666">=</span> $(<span style="color: #BA2121">&quot;#graph-select&quot;</span>).val()
        <span style="color: #408080; font-style: italic">// Send GET request to server with graph_id</span>
        $.getJSON($SCRIPT_ROOT<span style="color: #666666">+</span><span style="color: #BA2121">&#39;/_addgraph&#39;</span>,{
            graph_id<span style="color: #666666">:</span> id
        },<span style="color: #008000; font-weight: bold">function</span>(data){  <span style="color: #408080; font-style: italic">//Function carried out when data recieved</span>
            <span style="color: #408080; font-style: italic">// Hide the load-graph modal is not already hidden</span>
            $(<span style="color: #BA2121">&#39;#load-modal&#39;</span>).modal(<span style="color: #BA2121">&#39;hide&#39;</span>)
            <span style="color: #408080; font-style: italic">// Put exressions data into the table (from recieved data)</span>
            $(<span style="color: #BA2121">&#39;#expressions&#39;</span>).html(data.exprlist)
            <span style="color: #408080; font-style: italic">// Set the calculator state</span>
            calculator.setState(data.desmosdata)
        }).fail(<span style="color: #008000; font-weight: bold">function</span>(){
            <span style="color: #408080; font-style: italic">// Display error message on server error</span>
            alert(<span style="color: #BA2121">&#39;Error Loading Graph&#39;</span>)
        });
    })
    <span style="color: #408080; font-style: italic">//modal made in jinja at start, then graphs added into html when one is saved</span>
});
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/static/scripts/mathpreview.js</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">var</span> Preview <span style="color: #666666">=</span> {
  delay<span style="color: #666666">:</span> <span style="color: #666666">50</span>,        <span style="color: #408080; font-style: italic">// delay after keystroke before updating</span>
  preview<span style="color: #666666">:</span> <span style="color: #008000; font-weight: bold">null</span>,     <span style="color: #408080; font-style: italic">// filled in by Init below</span>
  buffer<span style="color: #666666">:</span> <span style="color: #008000; font-weight: bold">null</span>,      <span style="color: #408080; font-style: italic">// filled in by Init below</span>
  timeout<span style="color: #666666">:</span> <span style="color: #008000; font-weight: bold">null</span>,     <span style="color: #408080; font-style: italic">// store setTimout id</span>
  mjRunning<span style="color: #666666">:</span> <span style="color: #008000; font-weight: bold">false</span>,  <span style="color: #408080; font-style: italic">// true when MathJax is processing</span>
  mjPending<span style="color: #666666">:</span> <span style="color: #008000; font-weight: bold">false</span>,  <span style="color: #408080; font-style: italic">// true when a typeset has been queued</span>
  oldText<span style="color: #666666">:</span> <span style="color: #008000; font-weight: bold">null</span>,     <span style="color: #408080; font-style: italic">// used to check if an update is needed</span>
  <span style="color: #408080; font-style: italic">//</span>
  <span style="color: #408080; font-style: italic">//  Get the preview and buffer DIV&#39;s</span>
  <span style="color: #408080; font-style: italic">//</span>
  Init<span style="color: #666666">:</span> <span style="color: #008000; font-weight: bold">function</span> () {
    <span style="color: #008000; font-weight: bold">this</span>.preview <span style="color: #666666">=</span> <span style="color: #008000">document</span>.getElementById(<span style="color: #BA2121">&quot;MathPreview&quot;</span>);
    <span style="color: #008000; font-weight: bold">this</span>.buffer <span style="color: #666666">=</span> <span style="color: #008000">document</span>.getElementById(<span style="color: #BA2121">&quot;MathBuffer&quot;</span>);
  },
  <span style="color: #408080; font-style: italic">//</span>
  <span style="color: #408080; font-style: italic">//  Switch the buffer and preview, and display the right one.</span>
  <span style="color: #408080; font-style: italic">//  (We use visibility:hidden rather than display:none since</span>
  <span style="color: #408080; font-style: italic">//  the results of running MathJax are more accurate that way.)</span>
  <span style="color: #408080; font-style: italic">//</span>
  SwapBuffers<span style="color: #666666">:</span> <span style="color: #008000; font-weight: bold">function</span> () {
    <span style="color: #008000; font-weight: bold">var</span> buffer <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">this</span>.preview, preview <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">this</span>.buffer;
    <span style="color: #008000; font-weight: bold">this</span>.buffer <span style="color: #666666">=</span> buffer; <span style="color: #008000; font-weight: bold">this</span>.preview <span style="color: #666666">=</span> preview;
    buffer.style.visibility <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;hidden&quot;</span>; buffer.style.position <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;absolute&quot;</span>;
    preview.style.position <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;&quot;</span>; preview.style.visibility <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;&quot;</span>;
  },
  <span style="color: #408080; font-style: italic">//</span>
  <span style="color: #408080; font-style: italic">//  This gets called when a key is pressed in the textarea.</span>
  <span style="color: #408080; font-style: italic">//  We check if there is already a pending update and clear it if so.</span>
  <span style="color: #408080; font-style: italic">//  Then set up an update to occur after a small delay (so if more keys</span>
  <span style="color: #408080; font-style: italic">//    are pressed, the update won&#39;t occur until after there has been</span>
  <span style="color: #408080; font-style: italic">//    a pause in the typing).</span>
  <span style="color: #408080; font-style: italic">//  The callback function is set up below, after the Preview object is set up.</span>
  <span style="color: #408080; font-style: italic">//</span>
  Update<span style="color: #666666">:</span> <span style="color: #008000; font-weight: bold">function</span> () {
    <span style="color: #008000; font-weight: bold">if</span> (<span style="color: #008000; font-weight: bold">this</span>.timeout) {clearTimeout(<span style="color: #008000; font-weight: bold">this</span>.timeout)}
    <span style="color: #008000; font-weight: bold">this</span>.timeout <span style="color: #666666">=</span> setTimeout(<span style="color: #008000; font-weight: bold">this</span>.callback,<span style="color: #008000; font-weight: bold">this</span>.delay);
  },
  <span style="color: #408080; font-style: italic">//</span>
  <span style="color: #408080; font-style: italic">//  Creates the preview and runs MathJax on it.</span>
  <span style="color: #408080; font-style: italic">//  If MathJax is already trying to render the code, return</span>
  <span style="color: #408080; font-style: italic">//  If the text hasn&#39;t changed, return</span>
  <span style="color: #408080; font-style: italic">//  Otherwise, indicate that MathJax is running, and start the</span>
  <span style="color: #408080; font-style: italic">//    typesetting.  After it is done, call PreviewDone.</span>
  <span style="color: #408080; font-style: italic">//</span>
  CreatePreview<span style="color: #666666">:</span> <span style="color: #008000; font-weight: bold">function</span> () {
    Preview.timeout <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">null</span>;
    <span style="color: #008000; font-weight: bold">if</span> (<span style="color: #008000; font-weight: bold">this</span>.mjPending) <span style="color: #008000; font-weight: bold">return</span>;
    <span style="color: #008000; font-weight: bold">var</span> text <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;`&#39;</span><span style="color: #666666">+</span><span style="color: #008000">document</span>.getElementById(<span style="color: #BA2121">&quot;eq_in&quot;</span>).value<span style="color: #666666">+</span><span style="color: #BA2121">&#39;`&#39;</span>;
    <span style="color: #008000; font-weight: bold">if</span> (text <span style="color: #666666">===</span> <span style="color: #008000; font-weight: bold">this</span>.oldtext) <span style="color: #008000; font-weight: bold">return</span>;
    <span style="color: #008000; font-weight: bold">if</span> (<span style="color: #008000; font-weight: bold">this</span>.mjRunning) {
      <span style="color: #008000; font-weight: bold">this</span>.mjPending <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">true</span>;
      MathJax.Hub.Queue([<span style="color: #BA2121">&quot;CreatePreview&quot;</span>,<span style="color: #008000; font-weight: bold">this</span>]);
    } <span style="color: #008000; font-weight: bold">else</span> {
      <span style="color: #008000; font-weight: bold">this</span>.buffer.innerHTML <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">this</span>.oldtext <span style="color: #666666">=</span> text;
      <span style="color: #008000; font-weight: bold">this</span>.mjRunning <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">true</span>;
      MathJax.Hub.Queue(
	[<span style="color: #BA2121">&quot;Typeset&quot;</span>,MathJax.Hub,<span style="color: #008000; font-weight: bold">this</span>.buffer],
	[<span style="color: #BA2121">&quot;PreviewDone&quot;</span>,<span style="color: #008000; font-weight: bold">this</span>]
      );
    }
  },
  <span style="color: #408080; font-style: italic">//</span>
  <span style="color: #408080; font-style: italic">//  Indicate that MathJax is no longer running,</span>
  <span style="color: #408080; font-style: italic">//  and swap the buffers to show the results.</span>
  <span style="color: #408080; font-style: italic">//</span>
  PreviewDone<span style="color: #666666">:</span> <span style="color: #008000; font-weight: bold">function</span> () {
    <span style="color: #008000; font-weight: bold">this</span>.mjRunning <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">this</span>.mjPending <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">false</span>;
    <span style="color: #008000; font-weight: bold">this</span>.SwapBuffers();
  }
};
<span style="color: #408080; font-style: italic">//</span>
<span style="color: #408080; font-style: italic">//  Cache a callback to the CreatePreview action</span>
<span style="color: #408080; font-style: italic">//</span>
Preview.callback <span style="color: #666666">=</span> MathJax.Callback([<span style="color: #BA2121">&quot;CreatePreview&quot;</span>,Preview]);
Preview.callback.autoReset <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">true</span>;  <span style="color: #408080; font-style: italic">// make sure it can run more than once</span>
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/static/scripts/operations.js</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #408080; font-style: italic">// Get width and height of box in pixels</span>
<span style="color: #008000; font-weight: bold">var</span> w <span style="color: #666666">=</span> $(<span style="color: #BA2121">&#39;#box&#39;</span>).width();
<span style="color: #008000; font-weight: bold">var</span> h <span style="color: #666666">=</span> $(<span style="color: #BA2121">&#39;#box&#39;</span>).height();
<span style="color: #408080; font-style: italic">// Make sure the axes have the same scale</span>
<span style="color: #008000; font-weight: bold">var</span> x_ax<span style="color: #666666">=</span>w<span style="color: #666666">/150</span>;
<span style="color: #008000; font-weight: bold">var</span> y_ax<span style="color: #666666">=</span>h<span style="color: #666666">/150</span>;
<span style="color: #008000; font-weight: bold">var</span> board_atts <span style="color: #666666">=</span> {
        boundingbox<span style="color: #666666">:</span> [<span style="color: #666666">-</span>x_ax, y_ax, x_ax, <span style="color: #666666">-</span>y_ax],
        axis<span style="color: #666666">:</span> <span style="color: #008000; font-weight: bold">true</span>,
        showCopyright<span style="color: #666666">:</span><span style="color: #008000; font-weight: bold">false</span>,
        showNavigation<span style="color: #666666">:</span><span style="color: #008000; font-weight: bold">false</span>,
        pan<span style="color: #666666">:</span> {
            enabled<span style="color: #666666">:</span> <span style="color: #008000; font-weight: bold">true</span>,
            needshift<span style="color: #666666">:</span> <span style="color: #008000; font-weight: bold">false</span>,
            needTwoFingers<span style="color: #666666">:</span> <span style="color: #008000; font-weight: bold">true</span>
        },
        zoom<span style="color: #666666">:</span> {
            factorX<span style="color: #666666">:</span> <span style="color: #666666">1.25</span>,
            factorY<span style="color: #666666">:</span> <span style="color: #666666">1.25</span>,
            wheel<span style="color: #666666">:</span> <span style="color: #008000; font-weight: bold">true</span>,
            needshift<span style="color: #666666">:</span> <span style="color: #008000; font-weight: bold">false</span>
        }
}
<span style="color: #408080; font-style: italic">// Initialize board</span>
board <span style="color: #666666">=</span> JXG.JSXGraph.initBoard(<span style="color: #BA2121">&#39;box&#39;</span>,board_atts);
<span style="color: #408080; font-style: italic">// Create hidden origin point</span>
<span style="color: #008000; font-weight: bold">var</span> org <span style="color: #666666">=</span> board.create(<span style="color: #BA2121">&#39;point&#39;</span>, [<span style="color: #666666">0</span>,<span style="color: #666666">0</span>], {style<span style="color: #666666">:10</span>,visible<span style="color: #666666">:</span><span style="color: #008000; font-weight: bold">false</span>,fixed<span style="color: #666666">:</span><span style="color: #008000; font-weight: bold">true</span>,name<span style="color: #666666">:</span><span style="color: #BA2121">&#39; &#39;</span>});
<span style="color: #408080; font-style: italic">// Initialise points and lines objects, and start letter at &#39;a&#39;</span>
<span style="color: #008000; font-weight: bold">var</span> points <span style="color: #666666">=</span> {};
<span style="color: #008000; font-weight: bold">var</span> org_lines <span style="color: #666666">=</span> {}
<span style="color: #008000; font-weight: bold">var</span> letter <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;a&#39;</span>;

$(<span style="color: #008000">document</span>).ready(<span style="color: #008000; font-weight: bold">function</span>(){
    $(<span style="color: #BA2121">&#39;#addpoint&#39;</span>).on(<span style="color: #BA2121">&#39;click&#39;</span>,<span style="color: #008000; font-weight: bold">function</span>(){
        <span style="color: #408080; font-style: italic">// Function for adding a new moveable point</span>
        <span style="color: #408080; font-style: italic">//  Increment letter</span>
        letter <span style="color: #666666">=</span> <span style="color: #008000">String</span>.fromCharCode(letter.charCodeAt()<span style="color: #666666">+1</span>);
        <span style="color: #408080; font-style: italic">// Add new points at (1,1)</span>
        points[letter] <span style="color: #666666">=</span> board.create(<span style="color: #BA2121">&#39;point&#39;</span>,[<span style="color: #666666">1</span>,<span style="color: #666666">1</span>],{style<span style="color: #666666">:4</span>,color<span style="color: #666666">:</span><span style="color: #BA2121">&#39;red&#39;</span>,strokeColor<span style="color: #666666">:</span><span style="color: #BA2121">&#39;red&#39;</span>,name<span style="color: #666666">:</span>letter});
        <span style="color: #408080; font-style: italic">// Add line from origin to point</span>
        org_lines[letter] <span style="color: #666666">=</span> board.create(<span style="color: #BA2121">&#39;arrow&#39;</span>,[org,points[letter]],{strokeColor<span style="color: #666666">:</span><span style="color: #BA2121">&#39;blue&#39;</span>})
        <span style="color: #408080; font-style: italic">// Add row to table</span>
        $(<span style="color: #BA2121">&#39;#expressions tbody&#39;</span>).append(<span style="color: #BA2121">&#39;&lt;tr id=&quot;row&#39;</span><span style="color: #666666">+</span>letter<span style="color: #666666">+</span><span style="color: #BA2121">&#39;&quot;&gt;&#39;</span><span style="color: #666666">+</span>
            <span style="color: #BA2121">&#39;&lt;td&gt;&lt;b&gt;&#39;</span><span style="color: #666666">+</span>letter<span style="color: #666666">+</span><span style="color: #BA2121">&#39;&lt;/b&gt;&lt;/td&gt;&#39;</span><span style="color: #666666">+</span>
            <span style="color: #BA2121">&#39;&lt;td&gt;&#39;</span><span style="color: #666666">+</span>
                <span style="color: #BA2121">&#39;&lt;input id=&quot;re&#39;</span><span style="color: #666666">+</span>letter<span style="color: #666666">+</span><span style="color: #BA2121">&#39;&quot; style=&quot;width:50px&quot; value=&quot;&#39;</span><span style="color: #666666">+</span>points[letter].X().toFixed(<span style="color: #666666">2</span>)<span style="color: #666666">+</span><span style="color: #BA2121">&#39;&quot;&gt;+&#39;</span><span style="color: #666666">+</span>
                <span style="color: #BA2121">&#39;&lt;/td&gt;&lt;td&gt;&lt;input id=&quot;im&#39;</span><span style="color: #666666">+</span>letter<span style="color: #666666">+</span><span style="color: #BA2121">&#39;&quot; style=&quot;width:50px&quot; value=&quot;&#39;</span><span style="color: #666666">+</span>points[letter].Y().toFixed(<span style="color: #666666">2</span>)<span style="color: #666666">+</span><span style="color: #BA2121">&#39;&quot;&gt;i&#39;</span><span style="color: #666666">+</span>
            <span style="color: #BA2121">&#39;&lt;/td&gt;&#39;</span><span style="color: #666666">+</span>
            <span style="color: #BA2121">&#39;&lt;td&gt;&#39;</span><span style="color: #666666">+</span>
                <span style="color: #BA2121">&#39;&lt;input type=&quot;checkbox&quot; name=&quot;plot&quot; id=&quot;show&#39;</span><span style="color: #666666">+</span>letter<span style="color: #666666">+</span><span style="color: #BA2121">&#39;&quot; checked&gt;&#39;</span><span style="color: #666666">+</span>
            <span style="color: #BA2121">&#39;&lt;/td&gt;&#39;</span><span style="color: #666666">+</span>
            <span style="color: #BA2121">&#39;&lt;td&gt;&#39;</span><span style="color: #666666">+</span>
                <span style="color: #BA2121">&#39;&lt;input type=&quot;checkbox&quot; name=&quot;plot&quot; id=&quot;line&#39;</span><span style="color: #666666">+</span>letter<span style="color: #666666">+</span><span style="color: #BA2121">&#39;&quot; checked&gt;&#39;</span><span style="color: #666666">+</span>
            <span style="color: #BA2121">&#39;&lt;/td&gt;&#39;</span><span style="color: #666666">+</span>
            <span style="color: #BA2121">&#39;&lt;td&gt;&#39;</span><span style="color: #666666">+</span>
                <span style="color: #BA2121">&#39;&lt;input type=&quot;button&quot; class=&quot;btn btn-block&quot; name=&quot;del&quot; id=&quot;del&#39;</span><span style="color: #666666">+</span>letter<span style="color: #666666">+</span><span style="color: #BA2121">&#39;&quot; value=&quot;X&quot;&gt;&#39;</span><span style="color: #666666">+</span>
            <span style="color: #BA2121">&#39;&lt;/td&gt;&#39;</span><span style="color: #666666">+</span>
        <span style="color: #BA2121">&#39;&lt;/tr&gt;&#39;</span>);
    });
    $(<span style="color: #BA2121">&#39;#addcalc&#39;</span>).on(<span style="color: #BA2121">&#39;click&#39;</span>,<span style="color: #008000; font-weight: bold">function</span>(){
        <span style="color: #408080; font-style: italic">// Function for adding calculated point</span>
        <span style="color: #408080; font-style: italic">// Get form input</span>
        calc <span style="color: #666666">=</span> $(<span style="color: #BA2121">&#39;#calc_in&#39;</span>).val()
        <span style="color: #408080; font-style: italic">// Send data to server as GET request at /_addcalc</span>
        letters_list <span style="color: #666666">=</span> []
        <span style="color: #008000; font-weight: bold">for</span>(<span style="color: #008000; font-weight: bold">var</span> letter <span style="color: #008000; font-weight: bold">in</span> points){letters_list.push(letter)};
        console.log(letters_list);
        console.log(JSON.stringify(letters_list));
        $.getJSON($SCRIPT_ROOT <span style="color: #666666">+</span> <span style="color: #BA2121">&#39;/_addcalc&#39;</span>,{
            eq<span style="color: #666666">:</span>calc,
            letters<span style="color: #666666">:</span>JSON.stringify(letters_list)
        }, <span style="color: #008000; font-weight: bold">function</span>(data){ <span style="color: #408080; font-style: italic">// Function for recieved data</span>
            <span style="color: #408080; font-style: italic">// Increment letter</span>
            letter <span style="color: #666666">=</span> <span style="color: #008000">String</span>.fromCharCode(letter.charCodeAt()<span style="color: #666666">+1</span>);
            <span style="color: #408080; font-style: italic">// Add points with coordinates from recieved data</span>
            points[letter] <span style="color: #666666">=</span> board.create(<span style="color: #BA2121">&#39;point&#39;</span>,[data.x,data.y],{style<span style="color: #666666">:4</span>,color<span style="color: #666666">:</span><span style="color: #BA2121">&#39;blue&#39;</span>,strokeColor<span style="color: #666666">:</span><span style="color: #BA2121">&#39;blue&#39;</span>,name<span style="color: #666666">:</span>letter});
            <span style="color: #408080; font-style: italic">// Add line from origin to point</span>
            org_lines[letter] <span style="color: #666666">=</span> board.create(<span style="color: #BA2121">&#39;arrow&#39;</span>,[org,points[letter]],{strokeColor<span style="color: #666666">:</span><span style="color: #BA2121">&#39;red&#39;</span>})
            <span style="color: #408080; font-style: italic">// Add row to table</span>
            $(<span style="color: #BA2121">&#39;#expressions tbody&#39;</span>).append(<span style="color: #BA2121">&#39;&lt;tr id=&quot;row&#39;</span><span style="color: #666666">+</span>letter<span style="color: #666666">+</span><span style="color: #BA2121">&#39;&quot;&gt;&#39;</span><span style="color: #666666">+</span>
                <span style="color: #BA2121">&#39;&lt;td&gt;&lt;b&gt;&#39;</span><span style="color: #666666">+</span>letter<span style="color: #666666">+</span><span style="color: #BA2121">&#39;&lt;/b&gt;&lt;/td&gt;&#39;</span><span style="color: #666666">+</span>
                <span style="color: #BA2121">&#39;&lt;td colspan=&quot;2&quot; id=&quot;label&#39;</span><span style="color: #666666">+</span>letter<span style="color: #666666">+</span><span style="color: #BA2121">&#39;&quot;&gt;&#39;</span><span style="color: #666666">+</span>
                    <span style="color: #BA2121">&#39;`&#39;</span><span style="color: #666666">+</span>points[letter].X().toFixed(<span style="color: #666666">2</span>)<span style="color: #666666">+</span><span style="color: #BA2121">&#39;+&#39;</span><span style="color: #666666">+</span>points[letter].Y().toFixed(<span style="color: #666666">2</span>)<span style="color: #666666">+</span><span style="color: #BA2121">&#39;i&#39;</span><span style="color: #666666">+</span><span style="color: #BA2121">&#39;`&#39;</span><span style="color: #666666">+</span>
                <span style="color: #BA2121">&#39;&lt;/td&gt;&#39;</span><span style="color: #666666">+</span>
                <span style="color: #BA2121">&#39;&lt;td&gt;&#39;</span><span style="color: #666666">+</span>
                    <span style="color: #BA2121">&#39;&lt;input type=&quot;checkbox&quot; name=&quot;plot&quot; id=&quot;show&#39;</span><span style="color: #666666">+</span>letter<span style="color: #666666">+</span><span style="color: #BA2121">&#39;&quot; checked&gt;&#39;</span><span style="color: #666666">+</span>
                <span style="color: #BA2121">&#39;&lt;/td&gt;&#39;</span><span style="color: #666666">+</span>
                <span style="color: #BA2121">&#39;&lt;td&gt;&#39;</span><span style="color: #666666">+</span>
                    <span style="color: #BA2121">&#39;&lt;input type=&quot;checkbox&quot; name=&quot;plot&quot; id=&quot;line&#39;</span><span style="color: #666666">+</span>letter<span style="color: #666666">+</span><span style="color: #BA2121">&#39;&quot; checked&gt;&#39;</span><span style="color: #666666">+</span>
                <span style="color: #BA2121">&#39;&lt;/td&gt;&#39;</span><span style="color: #666666">+</span>
                <span style="color: #BA2121">&#39;&lt;td&gt;&#39;</span><span style="color: #666666">+</span>
                    <span style="color: #BA2121">&#39;&lt;input type=&quot;button&quot; class=&quot;btn btn-block&quot; name=&quot;del&quot; id=&quot;del&#39;</span><span style="color: #666666">+</span>letter<span style="color: #666666">+</span><span style="color: #BA2121">&#39;&quot; value=&quot;X&quot;&gt;&#39;</span><span style="color: #666666">+</span>
                <span style="color: #BA2121">&#39;&lt;/td&gt;&#39;</span><span style="color: #666666">+</span>
            <span style="color: #BA2121">&#39;&lt;/tr&gt;&#39;</span>);
        }).fail(<span style="color: #008000; font-weight: bold">function</span>(){
            <span style="color: #408080; font-style: italic">// Error message if there if function fails</span>
            alert(<span style="color: #BA2121">&#39;Invalid calculation&#39;</span>)
        });
    });
    $(<span style="color: #BA2121">&#39;#box&#39;</span>).on(<span style="color: #BA2121">&#39;click change mouseup mousedown&#39;</span>,<span style="color: #008000; font-weight: bold">function</span>(){
        <span style="color: #408080; font-style: italic">// When box is clicked, update the table which displays the points</span>
        <span style="color: #408080; font-style: italic">// The box being clicked means a points is moved</span>
        console.log(<span style="color: #BA2121">&#39;aa&#39;</span>);
        <span style="color: #008000; font-weight: bold">for</span> (<span style="color: #008000; font-weight: bold">var</span> letter <span style="color: #008000; font-weight: bold">in</span> points) {
            <span style="color: #408080; font-style: italic">// get x and y of all points</span>

            <span style="color: #008000; font-weight: bold">var</span> x <span style="color: #666666">=</span> <span style="color: #008000">parseFloat</span>(points[letter].X())
            <span style="color: #008000; font-weight: bold">var</span> y <span style="color: #666666">=</span> <span style="color: #008000">parseFloat</span>(points[letter].Y())
            console.log(x,y)
            <span style="color: #008000; font-weight: bold">if</span> ($(<span style="color: #BA2121">&#39;#label&#39;</span><span style="color: #666666">+</span>letter).length<span style="color: #666666">&gt;0</span>) {
                <span style="color: #408080; font-style: italic">// Change table cell of calculated points</span>
                $(<span style="color: #BA2121">&#39;#label&#39;</span><span style="color: #666666">+</span>letter).html(x.toFixed(<span style="color: #666666">2</span>)<span style="color: #666666">+</span><span style="color: #BA2121">&#39;+&#39;</span><span style="color: #666666">+</span>y.toFixed(<span style="color: #666666">2</span>)<span style="color: #666666">+</span><span style="color: #BA2121">&#39;i&#39;</span>)
            } <span style="color: #008000; font-weight: bold">else</span> {
                <span style="color: #408080; font-style: italic">// Change value of inputs for moveable points</span>
                $(<span style="color: #BA2121">&#39;#re&#39;</span><span style="color: #666666">+</span>letter).val(x.toFixed(<span style="color: #666666">2</span>))
                $(<span style="color: #BA2121">&#39;#im&#39;</span><span style="color: #666666">+</span>letter).val(y.toFixed(<span style="color: #666666">2</span>))
            }
        }
    });
    $(<span style="color: #BA2121">&#39;#clear&#39;</span>).on(<span style="color: #BA2121">&#39;click&#39;</span>, <span style="color: #008000; font-weight: bold">function</span>() {
        <span style="color: #408080; font-style: italic">// Delete table</span>
        $(<span style="color: #BA2121">&#39;#expressions tbody &gt; tr&#39;</span>).remove();
        <span style="color: #408080; font-style: italic">// Reset variables and recreate board</span>
        points <span style="color: #666666">=</span> {}
        lines <span style="color: #666666">=</span> {}
        letter <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;a&#39;</span>
        JXG.JSXGraph.freeBoard(board);
        board <span style="color: #666666">=</span> JXG.JSXGraph.initBoard(<span style="color: #BA2121">&#39;box&#39;</span>, board_atts);
    });
    $(<span style="color: #BA2121">&#39;#expressions&#39;</span>).on(<span style="color: #BA2121">&#39;click&#39;</span>,<span style="color: #BA2121">&#39;[type=button]&#39;</span>,<span style="color: #008000; font-weight: bold">function</span>(){
        <span style="color: #408080; font-style: italic">// Get id of button clicked, and get letter which it corresponds to</span>
        <span style="color: #008000; font-weight: bold">var</span> id <span style="color: #666666">=</span> $(<span style="color: #008000; font-weight: bold">this</span>).attr(<span style="color: #BA2121">&#39;id&#39;</span>).replace(<span style="color: #BA2121">&#39;del&#39;</span>,<span style="color: #BA2121">&#39;&#39;</span>);
        <span style="color: #408080; font-style: italic">// Remove point with the id</span>
        board.removeObject(points[id]);
        <span style="color: #408080; font-style: italic">// delete from points object</span>
        <span style="color: #008000; font-weight: bold">delete</span> points[id];
        <span style="color: #408080; font-style: italic">// remove row from table</span>
        $(<span style="color: #BA2121">&#39;#row&#39;</span><span style="color: #666666">+</span>id).remove();
    });
    $(<span style="color: #BA2121">&#39;#expressions&#39;</span>).on(<span style="color: #BA2121">&#39;click&#39;</span>,<span style="color: #BA2121">&#39;[type=checkbox][id*=show]&#39;</span>,<span style="color: #008000; font-weight: bold">function</span>(){
        <span style="color: #408080; font-style: italic">// Get id of checkbox clicked, and get letter which it corresponds to</span>
        <span style="color: #008000; font-weight: bold">var</span> id<span style="color: #666666">=</span>$(<span style="color: #008000; font-weight: bold">this</span>).attr(<span style="color: #BA2121">&#39;id&#39;</span>).replace(<span style="color: #BA2121">&#39;show&#39;</span>,<span style="color: #BA2121">&#39;&#39;</span>)
        <span style="color: #408080; font-style: italic">// See whether point is visible</span>
        point_vis <span style="color: #666666">=</span> points[id].getAttribute(<span style="color: #BA2121">&#39;visible&#39;</span>);
        <span style="color: #408080; font-style: italic">// Flip visibility of point and corresponding line</span>
        points[id].setAttribute({visible<span style="color: #666666">:!</span>point_vis})
        org_lines[id].setAttribute({visible<span style="color: #666666">:!</span>point_vis})
    });
    $(<span style="color: #BA2121">&#39;#expressions&#39;</span>).on(<span style="color: #BA2121">&#39;click&#39;</span>,<span style="color: #BA2121">&#39;[type=checkbox][id*=line]&#39;</span>,<span style="color: #008000; font-weight: bold">function</span>(){
        <span style="color: #408080; font-style: italic">// Get id of checkbox clicked, and get letter which it corresponds to</span>
        <span style="color: #008000; font-weight: bold">var</span> id<span style="color: #666666">=</span>$(<span style="color: #008000; font-weight: bold">this</span>).attr(<span style="color: #BA2121">&#39;id&#39;</span>).replace(<span style="color: #BA2121">&#39;line&#39;</span>,<span style="color: #BA2121">&#39;&#39;</span>)
        <span style="color: #408080; font-style: italic">// See whether line is visible or not</span>
        vis <span style="color: #666666">=</span> org_lines[id].getAttribute(<span style="color: #BA2121">&#39;visible&#39;</span>);
        <span style="color: #408080; font-style: italic">// Flip hidden attribute</span>
        org_lines[id].setAttribute({visible<span style="color: #666666">:!</span>vis})
    });
    $(<span style="color: #BA2121">&#39;#expressions&#39;</span>).on(<span style="color: #BA2121">&#39;keyup&#39;</span>,<span style="color: #008000; font-weight: bold">function</span>(){
        <span style="color: #008000; font-weight: bold">for</span> (<span style="color: #008000; font-weight: bold">var</span> letter <span style="color: #008000; font-weight: bold">in</span> points) {
            <span style="color: #008000; font-weight: bold">if</span> ($(<span style="color: #BA2121">&#39;#re&#39;</span><span style="color: #666666">+</span>letter).length<span style="color: #666666">&gt;0</span>){
                points[letter].setPosition(JXG.COORDS_BY_USER,[<span style="color: #008000">parseFloat</span>($(<span style="color: #BA2121">&#39;#re&#39;</span><span style="color: #666666">+</span>letter).val()),<span style="color: #008000">parseFloat</span>($(<span style="color: #BA2121">&#39;#im&#39;</span><span style="color: #666666">+</span>letter).val())])
            }
        }
        board.fullUpdate()
    });
});
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/static/scripts/questions.js</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>$(<span style="color: #BA2121">&#39;#submit&#39;</span>).on(<span style="color: #BA2121">&#39;click&#39;</span>, <span style="color: #008000; font-weight: bold">function</span>() {
    <span style="color: #408080; font-style: italic">// When submit clicked, run function submit_answers</span>
    submit_answers()
});

<span style="color: #008000; font-weight: bold">function</span> submit_answers() {
    <span style="color: #408080; font-style: italic">// Get data from questions form as a dictionary</span>
    <span style="color: #008000; font-weight: bold">var</span> data <span style="color: #666666">=</span> $(<span style="color: #BA2121">&#39;#questions&#39;</span>).serializeArray().reduce(<span style="color: #008000; font-weight: bold">function</span>(obj, item) {
        obj[item.name] <span style="color: #666666">=</span> item.value;
        <span style="color: #008000; font-weight: bold">return</span> obj;
    }, {});
    <span style="color: #408080; font-style: italic">// send GET request to server to analyse questions and calculate scores </span>
    $.getJSON($SCRIPT_ROOT <span style="color: #666666">+</span> <span style="color: #BA2121">&#39;/questions/_answers/&#39;</span> <span style="color: #666666">+</span> topic <span style="color: #666666">+</span> <span style="color: #BA2121">&#39;/&#39;</span> <span style="color: #666666">+</span> q_type,
        data,
        <span style="color: #008000; font-weight: bold">function</span>(data) {  <span style="color: #408080; font-style: italic">//Function carried out when data is received</span>
            <span style="color: #408080; font-style: italic">// Create outline for table of scores</span>
            html <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;&lt;table id=&quot;answers&quot; class=&quot;table&quot;&gt; &lt;thead&gt; &lt;th&gt; Question&lt;/th&gt; &lt;th&gt;Actual Answer&lt;/th&gt;&lt;th&gt;Your Answer&lt;/th&gt;&lt;th&gt;&lt;/th&gt;&lt;/thead&gt;&lt;tbody&gt;&#39;</span>
            <span style="color: #408080; font-style: italic">//Get returned data</span>
            questions <span style="color: #666666">=</span> data.questions
            answers <span style="color: #666666">=</span> data.answers
            inputs <span style="color: #666666">=</span> data.inputs
            scores <span style="color: #666666">=</span> data.scores
            percent <span style="color: #666666">=</span> data.percent
            console.log(inputs, answers)
            <span style="color: #408080; font-style: italic">// For each question/answer which is sent back</span>
            <span style="color: #008000; font-weight: bold">for</span> (<span style="color: #008000; font-weight: bold">var</span> i <span style="color: #666666">=</span> <span style="color: #666666">0</span>; i <span style="color: #666666">&lt;</span> data.questions.length; i<span style="color: #666666">++</span>) {
                <span style="color: #408080; font-style: italic">// Add row to table with question, correct answer, your answer and a colored</span>
                html <span style="color: #666666">+=</span> <span style="color: #BA2121">&#39;&lt;tr&gt;&lt;td&gt;&#39;</span> <span style="color: #666666">+</span> questions[i] <span style="color: #666666">+</span> <span style="color: #BA2121">&#39;&lt;/td&gt;&lt;td&gt;&#39;</span> <span style="color: #666666">+</span> <span style="color: #BA2121">&#39;`&#39;</span> <span style="color: #666666">+</span> answers[i] <span style="color: #666666">+</span> <span style="color: #BA2121">&#39;`&#39;</span> <span style="color: #666666">+</span> <span style="color: #BA2121">&#39;&lt;/td&gt;&lt;td&gt;&#39;</span> <span style="color: #666666">+</span> <span style="color: #BA2121">&#39;`&#39;</span> <span style="color: #666666">+</span> inputs[i] <span style="color: #666666">+</span> <span style="color: #BA2121">&#39;`&#39;</span>
                <span style="color: #008000; font-weight: bold">if</span> (scores[i] <span style="color: #666666">===</span> <span style="color: #666666">1</span>) {
                    <span style="color: #408080; font-style: italic">// Add green coloured square if correct</span>
                    html <span style="color: #666666">+=</span> <span style="color: #BA2121">&#39;&lt;td bgcolor=&quot;#00FF00&quot;&gt;&#39;</span>
                } <span style="color: #008000; font-weight: bold">else</span> {
                    <span style="color: #408080; font-style: italic">// Add red coloured square if wrong</span>
                    html <span style="color: #666666">+=</span> <span style="color: #BA2121">&#39;&lt;td bgcolor=&quot;#FF0000&quot;&gt;&#39;</span>
                }
            }
            html <span style="color: #666666">+=</span> <span style="color: #BA2121">&#39;&lt;/tbody&gt;&lt;/table&gt;&#39;</span>
            <span style="color: #408080; font-style: italic">// Remove questions form from page, leaving almost empty page</span>
            $(<span style="color: #BA2121">&#39;#questions&#39;</span>).remove();
            <span style="color: #408080; font-style: italic">// Add the table to the page</span>
            $(html).appendTo(<span style="color: #BA2121">&#39;#main&#39;</span>)
            <span style="color: #408080; font-style: italic">// Typeset maths</span>
            MathJax.Hub.Queue([<span style="color: #BA2121">&quot;Typeset&quot;</span>, MathJax.Hub, <span style="color: #BA2121">&quot;answers&quot;</span>]);
        }).fail(<span style="color: #008000; font-weight: bold">function</span>() {
        <span style="color: #408080; font-style: italic">// An error means that there was invalid input</span>
        alert(<span style="color: #BA2121">&#39;Please check your answers&#39;</span>)
    })
}
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/static/scripts/student_account.js</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #408080; font-style: italic">// js for sidebar formatting</span>
$(<span style="color: #BA2121">&#39;#nav&#39;</span>).affix({
    offset<span style="color: #666666">:</span> {
        top<span style="color: #666666">:</span> $(<span style="color: #BA2121">&#39;#nav&#39;</span>).offset().top
    }
});
$(<span style="color: #BA2121">&#39;#nav&#39;</span>).affix({
    offset<span style="color: #666666">:</span> {
        bottom<span style="color: #666666">:</span> ($(<span style="color: #BA2121">&#39;footer&#39;</span>).outerHeight(<span style="color: #008000; font-weight: bold">true</span>) <span style="color: #666666">+</span>
                $(<span style="color: #BA2121">&#39;.application&#39;</span>).outerHeight(<span style="color: #008000; font-weight: bold">true</span>)) <span style="color: #666666">+</span>
                <span style="color: #666666">40</span>
    }
});
<span style="color: #408080; font-style: italic">// Initialise imagepicker</span>
$(<span style="color: #BA2121">&#39;#graph-select&#39;</span>).imagepicker({show_label<span style="color: #666666">:</span><span style="color: #008000; font-weight: bold">true</span>})
$(<span style="color: #BA2121">&#39;#links-table&#39;</span>).on(<span style="color: #BA2121">&#39;click&#39;</span>,<span style="color: #BA2121">&#39;[type=button]&#39;</span>,<span style="color: #008000; font-weight: bold">function</span>(){
  <span style="color: #008000; font-weight: bold">if</span> (confirm(<span style="color: #BA2121">&#39;Are you sure&#39;</span>)) {
    <span style="color: #408080; font-style: italic">// Send data of student to be deleted to server</span>
    teacher_id <span style="color: #666666">=</span> $(<span style="color: #008000; font-weight: bold">this</span>).attr(<span style="color: #BA2121">&#39;id&#39;</span>);
    console.log(teacher_id);
    $.post($SCRIPT_ROOT <span style="color: #666666">+</span> <span style="color: #BA2121">&#39;/_delete_teacher&#39;</span>,{
      teacher_id<span style="color: #666666">:</span>teacher_id
    },<span style="color: #008000; font-weight: bold">function</span>(data){
      <span style="color: #408080; font-style: italic">// Remove teacher from account page</span>
      $(<span style="color: #BA2121">&#39;#link-row&#39;</span><span style="color: #666666">+</span>teacher_id).remove()
    }).fail(<span style="color: #008000; font-weight: bold">function</span>(){
      <span style="color: #408080; font-style: italic">// Show error message if there is a server error</span>
      alert(<span style="color: #BA2121">&#39;Error deleting teacher&#39;</span>)
    });
  }
});
$(<span style="color: #BA2121">&#39;input[type=&quot;button&quot;][id*=&quot;del-graph&quot;]&#39;</span>).on(<span style="color: #BA2121">&#39;click&#39;</span>,<span style="color: #008000; font-weight: bold">function</span>(){
  <span style="color: #008000; font-weight: bold">if</span> (confirm(<span style="color: #BA2121">&#39;Are you sure&#39;</span>)) {
    graph_id <span style="color: #666666">=</span> $(<span style="color: #008000; font-weight: bold">this</span>).attr(<span style="color: #BA2121">&#39;id&#39;</span>).replace(<span style="color: #BA2121">&#39;del-graph&#39;</span>,<span style="color: #BA2121">&#39;&#39;</span>);
    <span style="color: #408080; font-style: italic">// Send data of graph to be deleted to server</span>
    $.post($SCRIPT_ROOT <span style="color: #666666">+</span> <span style="color: #BA2121">&#39;/_delete_graph&#39;</span>,{
      graph_id<span style="color: #666666">:</span>graph_id
    },<span style="color: #008000; font-weight: bold">function</span>(data){
      <span style="color: #408080; font-style: italic">// Remove graph from account page</span>
      $(<span style="color: #BA2121">&#39;option[value=&quot;&#39;</span><span style="color: #666666">+</span>graph_id<span style="color: #666666">+</span><span style="color: #BA2121">&#39;&quot;]&#39;</span>).remove()
      $(<span style="color: #BA2121">&#39;#graph-select&#39;</span>).imagepicker({show_label<span style="color: #666666">:</span><span style="color: #008000; font-weight: bold">true</span>})
    }).fail(<span style="color: #008000; font-weight: bold">function</span>(){
      <span style="color: #408080; font-style: italic">// Show error message if there is a server error</span>
      alert(<span style="color: #BA2121">&#39;Error Deleting Graph&#39;</span>)
    });
  }
});
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/static/scripts/teacher_account.js</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>$(<span style="color: #BA2121">&#39;#nav&#39;</span>).affix({
    offset<span style="color: #666666">:</span> {
        top<span style="color: #666666">:</span> $(<span style="color: #BA2121">&#39;#nav&#39;</span>).offset().top
    }
});
$(<span style="color: #BA2121">&#39;#nav&#39;</span>).affix({
    offset<span style="color: #666666">:</span> {
        bottom<span style="color: #666666">:</span> ($(<span style="color: #BA2121">&#39;footer&#39;</span>).outerHeight(<span style="color: #008000; font-weight: bold">true</span>) <span style="color: #666666">+</span>
                $(<span style="color: #BA2121">&#39;.application&#39;</span>).outerHeight(<span style="color: #008000; font-weight: bold">true</span>)) <span style="color: #666666">+</span>
                <span style="color: #666666">40</span>
    }
});
$(<span style="color: #BA2121">&#39;#graph-select&#39;</span>).imagepicker({show_label<span style="color: #666666">:</span><span style="color: #008000; font-weight: bold">true</span>})
$(<span style="color: #BA2121">&#39;#links-table&#39;</span>).on(<span style="color: #BA2121">&#39;click&#39;</span>,<span style="color: #BA2121">&#39;[type=button]&#39;</span>,<span style="color: #008000; font-weight: bold">function</span>(){
  <span style="color: #008000; font-weight: bold">if</span> (confirm(<span style="color: #BA2121">&#39;Are you sure&#39;</span>)) {
    student_id <span style="color: #666666">=</span> $(<span style="color: #008000; font-weight: bold">this</span>).attr(<span style="color: #BA2121">&#39;id&#39;</span>);
    <span style="color: #408080; font-style: italic">// Send data of student to be deleted to server</span>
    $.post($SCRIPT_ROOT <span style="color: #666666">+</span> <span style="color: #BA2121">&#39;/_delete_student&#39;</span>,{
      student_id<span style="color: #666666">:</span>student_id
    },<span style="color: #008000; font-weight: bold">function</span>(data){
      <span style="color: #408080; font-style: italic">// Delete all other references to this student on account page</span>
      $(<span style="color: #BA2121">&#39;#link-row&#39;</span><span style="color: #666666">+</span>student_id).remove()
      $(<span style="color: #BA2121">&#39;#task-row&#39;</span><span style="color: #666666">+</span>student_id).remove()
      $(<span style="color: #BA2121">&#39;input[type=&quot;checkbox&quot;][value=&quot;&#39;</span><span style="color: #666666">+</span>student_id<span style="color: #666666">+</span><span style="color: #BA2121">&#39;&quot;]&#39;</span>).parents(<span style="color: #BA2121">&#39;tr&#39;</span>).remove()
    }).fail(<span style="color: #008000; font-weight: bold">function</span>(){
      <span style="color: #408080; font-style: italic">// Show error message if there is a server error</span>
      alert(<span style="color: #BA2121">&#39;Error deleting Student&#39;</span>)
    });
  }
});
$(<span style="color: #BA2121">&#39;input[type=&quot;button&quot;][id*=&quot;del-graph&quot;]&#39;</span>).on(<span style="color: #BA2121">&#39;click&#39;</span>,<span style="color: #008000; font-weight: bold">function</span>(){
  <span style="color: #008000; font-weight: bold">if</span> (confirm(<span style="color: #BA2121">&#39;Are you sure&#39;</span>)) {
    graph_id <span style="color: #666666">=</span> $(<span style="color: #008000; font-weight: bold">this</span>).attr(<span style="color: #BA2121">&#39;id&#39;</span>).replace(<span style="color: #BA2121">&#39;del-graph&#39;</span>,<span style="color: #BA2121">&#39;&#39;</span>);
    <span style="color: #408080; font-style: italic">// Send data of student to be deleted to server</span>
    $.post($SCRIPT_ROOT <span style="color: #666666">+</span> <span style="color: #BA2121">&#39;/_delete_graph&#39;</span>,{
      graph_id<span style="color: #666666">:</span>graph_id
    },<span style="color: #008000; font-weight: bold">function</span>(data){
      $(<span style="color: #BA2121">&#39;option[value=&quot;&#39;</span><span style="color: #666666">+</span>graph_id<span style="color: #666666">+</span><span style="color: #BA2121">&#39;&quot;]&#39;</span>).remove()
      $(<span style="color: #BA2121">&#39;#graph-select&#39;</span>).imagepicker({show_label<span style="color: #666666">:</span><span style="color: #008000; font-weight: bold">true</span>})
    }).fail(<span style="color: #008000; font-weight: bold">function</span>(){
      <span style="color: #408080; font-style: italic">// Show error message if there is a server error</span>
      alert(<span style="color: #BA2121">&#39;Error Deleting Graph&#39;</span>)
    });
  }
});
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/static/styles/account.css</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>.<span style="color: #0000FF; font-weight: bold">affix</span> {
    <span style="color: #008000; font-weight: bold">top</span>: <span style="color: #666666">20</span><span style="color: #B00040">px</span>;
    <span style="color: #008000; font-weight: bold">width</span>: <span style="color: #666666">213</span><span style="color: #B00040">px</span>;
}

<span style="color: #008000; font-weight: bold">section</span> {
    <span style="color: #008000; font-weight: bold">border</span>: <span style="color: #666666">1</span> px <span style="color: #008000; font-weight: bold">solid</span> <span style="color: #008000; font-weight: bold">black</span>;
    <span style="color: #008000; font-weight: bold">width</span>: <span style="color: #666666">100</span><span style="color: #B00040">%</span>
}

.<span style="color: #0000FF; font-weight: bold">title</span> {
    <span style="color: #008000; font-weight: bold">text-align</span>: <span style="color: #008000; font-weight: bold">center</span>;
    <span style="color: #008000; font-weight: bold">font-size</span>: <span style="color: #666666">30</span><span style="color: #B00040">pt</span>;
}

@<span style="color: #008000; font-weight: bold">media</span> <span style="color: #666666">(</span><span style="color: #008000; font-weight: bold">min-width</span><span style="color: #666666">:</span> <span style="color: #008000; font-weight: bold">1200px</span><span style="color: #666666">)</span> {
    .<span style="color: #0000FF; font-weight: bold">affix</span> {
        <span style="color: #008000; font-weight: bold">width</span>: <span style="color: #666666">263</span><span style="color: #B00040">px</span>;
    }
}

.<span style="color: #0000FF; font-weight: bold">affix-bottom</span> {
    <span style="color: #008000; font-weight: bold">position</span>: <span style="color: #008000; font-weight: bold">absolute</span>;
    <span style="color: #008000; font-weight: bold">width</span>: <span style="color: #666666">213</span><span style="color: #B00040">px</span>;
}

@<span style="color: #008000; font-weight: bold">media</span> <span style="color: #666666">(</span><span style="color: #008000; font-weight: bold">min-width</span><span style="color: #666666">:</span> <span style="color: #008000; font-weight: bold">1200px</span><span style="color: #666666">)</span> {
    .<span style="color: #0000FF; font-weight: bold">affix-bottom</span> {
        <span style="color: #008000; font-weight: bold">width</span>: <span style="color: #666666">263</span><span style="color: #B00040">px</span>;
    }
}

<span style="color: #408080; font-style: italic">/*** custom checkboxes ***/</span>

<span style="color: #008000; font-weight: bold">input</span><span style="color: #666666">[</span><span style="color: #008000; font-weight: bold">type</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">checkbox</span><span style="color: #666666">]</span> { <span style="color: #008000; font-weight: bold">display</span>:<span style="color: #008000; font-weight: bold">none</span>; } <span style="color: #408080; font-style: italic">/* to hide the checkbox itself */</span>
<span style="color: #008000; font-weight: bold">input</span><span style="color: #666666">[</span><span style="color: #008000; font-weight: bold">type</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">checkbox</span><span style="color: #666666">]</span> <span style="color: #666666">+</span> <span style="color: #008000; font-weight: bold">label</span>:<span style="color: #AA22FF">before</span> {
  <span style="color: #008000; font-weight: bold">font-family</span>: FontAwesome;
  <span style="color: #008000; font-weight: bold">display</span>: <span style="color: #008000; font-weight: bold">inline-block</span>;
}

<span style="color: #008000; font-weight: bold">input</span><span style="color: #666666">[</span><span style="color: #008000; font-weight: bold">type</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">checkbox</span><span style="color: #666666">]</span> <span style="color: #666666">+</span> <span style="color: #008000; font-weight: bold">label</span>:<span style="color: #AA22FF">before</span> { <span style="color: #008000; font-weight: bold">content</span>: <span style="color: #BA2121">&quot;\f096&quot;</span>; } <span style="color: #408080; font-style: italic">/* unchecked icon */</span>
<span style="color: #008000; font-weight: bold">input</span><span style="color: #666666">[</span><span style="color: #008000; font-weight: bold">type</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">checkbox</span><span style="color: #666666">]</span> <span style="color: #666666">+</span> <span style="color: #008000; font-weight: bold">label</span>:<span style="color: #AA22FF">before</span> { <span style="color: #008000; font-weight: bold">letter-spacing</span>: <span style="color: #666666">10</span><span style="color: #B00040">px</span>; } <span style="color: #408080; font-style: italic">/* space between checkbox and label */</span>

<span style="color: #008000; font-weight: bold">input</span><span style="color: #666666">[</span><span style="color: #008000; font-weight: bold">type</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">checkbox</span><span style="color: #666666">]</span>:<span style="color: #AA22FF">checked</span> <span style="color: #666666">+</span> <span style="color: #008000; font-weight: bold">label</span>:<span style="color: #AA22FF">before</span> { <span style="color: #008000; font-weight: bold">content</span>: <span style="color: #BA2121">&quot;\f046&quot;</span>; } <span style="color: #408080; font-style: italic">/* checked icon */</span>
<span style="color: #008000; font-weight: bold">input</span><span style="color: #666666">[</span><span style="color: #008000; font-weight: bold">type</span><span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">checkbox</span><span style="color: #666666">]</span>:<span style="color: #AA22FF">checked</span> <span style="color: #666666">+</span> <span style="color: #008000; font-weight: bold">label</span>:<span style="color: #AA22FF">before</span> { <span style="color: #008000; font-weight: bold">letter-spacing</span>: <span style="color: #666666">5</span><span style="color: #B00040">px</span>; } <span style="color: #408080; font-style: italic">/* allow space for check mark */</span>
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/static/styles/complex_q.css</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>.<span style="color: #0000FF; font-weight: bold">out_question</span>{
    <span style="color: #008000; font-weight: bold">width</span>: <span style="color: #666666">100</span><span style="color: #B00040">%</span>;
    <span style="color: #008000; font-weight: bold">padding</span>: <span style="color: #666666">10</span><span style="color: #B00040">px</span>;
    <span style="color: #008000; font-weight: bold">text-align</span>: <span style="color: #008000; font-weight: bold">center</span>;
}

.<span style="color: #0000FF; font-weight: bold">input</span>{
    <span style="color: #008000; font-weight: bold">width</span>: <span style="color: #666666">50</span><span style="color: #B00040">px</span>;
    <span style="color: #008000; font-weight: bold">height</span>: <span style="color: #666666">30</span><span style="color: #B00040">px</span>;
    <span style="color: #008000; font-weight: bold">text-align</span>: <span style="color: #008000; font-weight: bold">center</span>;
    <span style="color: #008000; font-weight: bold">padding</span>: <span style="color: #666666">5</span><span style="color: #B00040">px</span>;
}

.<span style="color: #0000FF; font-weight: bold">answer</span>{
    <span style="color: #008000; font-weight: bold">display</span>:<span style="color: #008000; font-weight: bold">inline-block</span>;
    <span style="color: #008000; font-weight: bold">width</span>:<span style="color: #666666">50</span><span style="color: #B00040">%</span>;
    <span style="color: #008000; font-weight: bold">margin</span>:<span style="color: #666666">0</span> <span style="color: #008000; font-weight: bold">auto</span>;
    <span style="color: #008000; font-weight: bold">padding</span>: <span style="color: #666666">10</span><span style="color: #B00040">px</span>;
}

.<span style="color: #0000FF; font-weight: bold">question</span>{
    <span style="color: #008000; font-weight: bold">padding</span>: <span style="color: #666666">10</span><span style="color: #B00040">px</span>;
}
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/static/styles/main.css</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">html</span> {
  <span style="color: #008000; font-weight: bold">position</span>: <span style="color: #008000; font-weight: bold">relative</span>;
  <span style="color: #008000; font-weight: bold">min-height</span>: <span style="color: #666666">100</span><span style="color: #B00040">%</span>;
}
<span style="color: #008000; font-weight: bold">body</span> {
  <span style="color: #008000; font-weight: bold">margin-bottom</span>: <span style="color: #666666">60</span><span style="color: #B00040">px</span>;
}
.<span style="color: #0000FF; font-weight: bold">footer</span> {
  <span style="color: #008000; font-weight: bold">position</span>: <span style="color: #008000; font-weight: bold">absolute</span>;
  <span style="color: #008000; font-weight: bold">bottom</span>: <span style="color: #666666">0</span>;
  <span style="color: #008000; font-weight: bold">width</span>: <span style="color: #666666">100</span><span style="color: #B00040">%</span>;
  <span style="color: #008000; font-weight: bold">height</span>: <span style="color: #666666">60</span><span style="color: #B00040">px</span>;
  <span style="color: #008000; font-weight: bold">background-color</span>: <span style="color: #666666">#f5f5f5</span>;
  <span style="color: #008000; font-weight: bold">padding</span>: <span style="color: #666666">0</span> <span style="color: #666666">20</span><span style="color: #B00040">px</span>;

}
.<span style="color: #0000FF; font-weight: bold">content</span> {
  <span style="color: #008000; font-weight: bold">width</span>: <span style="color: #666666">100</span><span style="color: #B00040">%</span>;
  <span style="color: #008000; font-weight: bold">padding</span>: <span style="color: #666666">0</span> <span style="color: #666666">15</span><span style="color: #B00040">px</span>;
  <span style="color: #008000; font-weight: bold">overflow</span>: <span style="color: #008000; font-weight: bold">hidden</span>;
  <span style="color: #008000; font-weight: bold">min-height</span>: <span style="color: #008000">calc</span>(<span style="color: #666666">100</span><span style="color: #B00040">vh</span> <span style="color: #666666">-</span> <span style="color: #666666">70</span><span style="color: #B00040">px</span>);

}
.<span style="color: #0000FF; font-weight: bold">container</span> .<span style="color: #0000FF; font-weight: bold">text-muted</span> {
  <span style="color: #008000; font-weight: bold">margin</span>: <span style="color: #666666">20</span><span style="color: #B00040">px</span> <span style="color: #666666">0</span>;
}

.<span style="color: #0000FF; font-weight: bold">dropdown-submenu</span> {
    <span style="color: #008000; font-weight: bold">position</span>: <span style="color: #008000; font-weight: bold">relative</span>;
}

.<span style="color: #0000FF; font-weight: bold">dropdown-submenu</span><span style="color: #666666">&gt;</span>.<span style="color: #0000FF; font-weight: bold">dropdown-menu</span> {
    <span style="color: #008000; font-weight: bold">top</span>: <span style="color: #666666">0</span>;
    <span style="color: #008000; font-weight: bold">left</span>: <span style="color: #666666">100</span><span style="color: #B00040">%</span>;
    <span style="color: #008000; font-weight: bold">margin-top</span>: <span style="color: #666666">-6</span><span style="color: #B00040">px</span>;
    <span style="color: #008000; font-weight: bold">margin-left</span>: <span style="color: #666666">-1</span><span style="color: #B00040">px</span>;
    <span style="color: #008000">-webkit-</span><span style="color: #008000; font-weight: bold">border-radius</span>: <span style="color: #666666">0</span> <span style="color: #666666">6</span><span style="color: #B00040">px</span> <span style="color: #666666">6</span><span style="color: #B00040">px</span> <span style="color: #666666">6</span><span style="color: #B00040">px</span>;
    <span style="color: #008000">-moz-</span><span style="color: #008000; font-weight: bold">border-radius</span>: <span style="color: #666666">0</span> <span style="color: #666666">6</span><span style="color: #B00040">px</span> <span style="color: #666666">6</span><span style="color: #B00040">px</span>;
    <span style="color: #008000; font-weight: bold">border-radius</span>: <span style="color: #666666">0</span> <span style="color: #666666">6</span><span style="color: #B00040">px</span> <span style="color: #666666">6</span><span style="color: #B00040">px</span> <span style="color: #666666">6</span><span style="color: #B00040">px</span>;
}

.<span style="color: #0000FF; font-weight: bold">dropdown-submenu</span>:<span style="color: #AA22FF">hover</span><span style="color: #666666">&gt;</span>.<span style="color: #0000FF; font-weight: bold">dropdown-menu</span> {
    <span style="color: #008000; font-weight: bold">display</span>: <span style="color: #008000; font-weight: bold">block</span>;
}

.<span style="color: #0000FF; font-weight: bold">dropdown-submenu</span><span style="color: #666666">&gt;</span><span style="color: #008000; font-weight: bold">a</span>:<span style="color: #AA22FF">after</span> {
    <span style="color: #008000; font-weight: bold">display</span>: <span style="color: #008000; font-weight: bold">block</span>;
    <span style="color: #008000; font-weight: bold">content</span>: <span style="color: #BA2121">&quot; &quot;</span>;
    <span style="color: #008000; font-weight: bold">float</span>: <span style="color: #008000; font-weight: bold">right</span>;
    <span style="color: #008000; font-weight: bold">width</span>: <span style="color: #666666">0</span>;
    <span style="color: #008000; font-weight: bold">height</span>: <span style="color: #666666">0</span>;
    <span style="color: #008000; font-weight: bold">border-color</span>: <span style="color: #008000; font-weight: bold">transparent</span>;
    <span style="color: #008000; font-weight: bold">border-style</span>: <span style="color: #008000; font-weight: bold">solid</span>;
    <span style="color: #008000; font-weight: bold">border-width</span>: <span style="color: #666666">5</span><span style="color: #B00040">px</span> <span style="color: #666666">0</span> <span style="color: #666666">5</span><span style="color: #B00040">px</span> <span style="color: #666666">5</span><span style="color: #B00040">px</span>;
    <span style="color: #008000; font-weight: bold">border-left-color</span>: <span style="color: #666666">#ccc</span>;
    <span style="color: #008000; font-weight: bold">margin-top</span>: <span style="color: #666666">5</span><span style="color: #B00040">px</span>;
    <span style="color: #008000; font-weight: bold">margin-right</span>: <span style="color: #666666">-10</span><span style="color: #B00040">px</span>;
}

.<span style="color: #0000FF; font-weight: bold">dropdown-submenu</span>:<span style="color: #AA22FF">hover</span><span style="color: #666666">&gt;</span><span style="color: #008000; font-weight: bold">a</span>:<span style="color: #AA22FF">after</span> {
    <span style="color: #008000; font-weight: bold">border-left-color</span>: <span style="color: #666666">#fff</span>;
}

.<span style="color: #0000FF; font-weight: bold">dropdown-submenu</span>.<span style="color: #0000FF; font-weight: bold">pull-left</span> {
    <span style="color: #008000; font-weight: bold">float</span>: <span style="color: #008000; font-weight: bold">none</span>;
}

.<span style="color: #0000FF; font-weight: bold">dropdown-submenu</span>.<span style="color: #0000FF; font-weight: bold">pull-left</span><span style="color: #666666">&gt;</span>.<span style="color: #0000FF; font-weight: bold">dropdown-menu</span> {
    <span style="color: #008000; font-weight: bold">left</span>: <span style="color: #666666">-100</span><span style="color: #B00040">%</span>;
    <span style="color: #008000; font-weight: bold">margin-left</span>: <span style="color: #666666">10</span><span style="color: #B00040">px</span>;
    <span style="color: #008000">-webkit-</span><span style="color: #008000; font-weight: bold">border-radius</span>: <span style="color: #666666">6</span><span style="color: #B00040">px</span> <span style="color: #666666">0</span> <span style="color: #666666">6</span><span style="color: #B00040">px</span> <span style="color: #666666">6</span><span style="color: #B00040">px</span>;
    <span style="color: #008000">-moz-</span><span style="color: #008000; font-weight: bold">border-radius</span>: <span style="color: #666666">6</span><span style="color: #B00040">px</span> <span style="color: #666666">0</span> <span style="color: #666666">6</span><span style="color: #B00040">px</span> <span style="color: #666666">6</span><span style="color: #B00040">px</span>;
    <span style="color: #008000; font-weight: bold">border-radius</span>: <span style="color: #666666">6</span><span style="color: #B00040">px</span> <span style="color: #666666">0</span> <span style="color: #666666">6</span><span style="color: #B00040">px</span> <span style="color: #666666">6</span><span style="color: #B00040">px</span>;
}
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/static/styles/matrix.css</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>.<span style="color: #0000FF; font-weight: bold">in</span> {
    <span style="color: #008000; font-weight: bold">width</span>: <span style="color: #666666">50</span><span style="color: #B00040">px</span>;
    <span style="color: #008000; font-weight: bold">height</span>: <span style="color: #666666">50</span><span style="color: #B00040">px</span>;
    <span style="color: #008000; font-weight: bold">text-align</span>: <span style="color: #008000; font-weight: bold">center</span>;
}

.<span style="color: #0000FF; font-weight: bold">pure-button</span> {
    <span style="color: #008000; font-weight: bold">width</span>: <span style="color: #666666">180</span><span style="color: #B00040">px</span>;
    <span style="color: #008000; font-weight: bold">margin-top</span>: <span style="color: #666666">5</span><span style="color: #B00040">px</span>;
}

.<span style="color: #0000FF; font-weight: bold">op-btn</span> {
    <span style="color: #008000; font-weight: bold">width</span>: <span style="color: #666666">40</span><span style="color: #B00040">px</span>;
}

.<span style="color: #0000FF; font-weight: bold">clear-btn</span> {
    <span style="color: #008000; font-weight: bold">color</span>: <span style="color: #008000; font-weight: bold">red</span>;
    <span style="color: #008000; font-weight: bold">width</span>: <span style="color: #666666">100</span><span style="color: #B00040">px</span>;
}

.<span style="color: #0000FF; font-weight: bold">matrix</span> {
    <span style="color: #008000; font-weight: bold">position</span>: <span style="color: #008000; font-weight: bold">relative</span>;
}

.<span style="color: #0000FF; font-weight: bold">matrix</span>:<span style="color: #AA22FF">before</span><span style="color: #666666">,</span> .<span style="color: #0000FF; font-weight: bold">matrix</span>:<span style="color: #AA22FF">after</span> {
    <span style="color: #008000; font-weight: bold">content</span>: <span style="color: #BA2121">&quot;&quot;</span>;
    <span style="color: #008000; font-weight: bold">position</span>: <span style="color: #008000; font-weight: bold">absolute</span>;
    <span style="color: #008000; font-weight: bold">top</span>: <span style="color: #666666">0</span>;
    <span style="color: #008000; font-weight: bold">border</span>: <span style="color: #666666">1</span><span style="color: #B00040">px</span> <span style="color: #008000; font-weight: bold">solid</span> <span style="color: #666666">#000</span>;
    <span style="color: #008000; font-weight: bold">width</span>: <span style="color: #666666">6</span><span style="color: #B00040">px</span>;
    <span style="color: #008000; font-weight: bold">height</span>: <span style="color: #666666">100</span><span style="color: #B00040">%</span>;
}

.<span style="color: #0000FF; font-weight: bold">matrix</span>:<span style="color: #AA22FF">before</span> {
    <span style="color: #008000; font-weight: bold">left</span>: <span style="color: #666666">-6</span><span style="color: #B00040">px</span>;
    <span style="color: #008000; font-weight: bold">border-right</span>: <span style="color: #666666">0</span><span style="color: #B00040">px</span>;
}

.<span style="color: #0000FF; font-weight: bold">matrix</span>:<span style="color: #AA22FF">after</span> {
    <span style="color: #008000; font-weight: bold">right</span>: <span style="color: #666666">-6</span><span style="color: #B00040">px</span>;
    <span style="color: #008000; font-weight: bold">border-left</span>: <span style="color: #666666">0</span><span style="color: #B00040">px</span>;
}

.<span style="color: #0000FF; font-weight: bold">matrix</span> <span style="color: #008000; font-weight: bold">td</span> {
    <span style="color: #008000; font-weight: bold">padding</span>: <span style="color: #666666">5</span><span style="color: #B00040">px</span>;
    <span style="color: #008000; font-weight: bold">text-align</span>: <span style="color: #008000; font-weight: bold">center</span>;
}

#<span style="color: #0000FF; font-weight: bold">outer</span> {
    <span style="color: #008000; font-weight: bold">display</span>: <span style="color: #008000; font-weight: bold">table</span>;
    <span style="color: #008000; font-weight: bold">width</span>: <span style="color: #666666">100</span><span style="color: #B00040">%</span>;
    <span style="color: #008000; font-weight: bold">height</span>: <span style="color: #666666">100</span><span style="color: #B00040">%</span>;
}

#<span style="color: #0000FF; font-weight: bold">inner</span> {
    <span style="color: #008000; font-weight: bold">display</span>: <span style="color: #008000; font-weight: bold">table-cell</span>;
    <span style="color: #008000; font-weight: bold">vertical-align</span>: <span style="color: #008000; font-weight: bold">middle</span>;
    <span style="color: #008000; font-weight: bold">text-align</span>: <span style="color: #008000; font-weight: bold">center</span>;
}

#<span style="color: #0000FF; font-weight: bold">matrices</span> {
    <span style="color: #008000; font-weight: bold">display</span>: <span style="color: #008000; font-weight: bold">inline-block</span>;
    <span style="color: #008000; font-weight: bold">margin-left</span>: <span style="color: #008000; font-weight: bold">auto</span>;
    <span style="color: #008000; font-weight: bold">margin-right</span>: <span style="color: #008000; font-weight: bold">auto</span>;
    <span style="color: #008000; font-weight: bold">margin-top</span>: <span style="color: #666666">10</span><span style="color: #B00040">px</span>;
}

#<span style="color: #0000FF; font-weight: bold">answers</span> {
    <span style="color: #008000; font-weight: bold">float</span>: <span style="color: #008000; font-weight: bold">bottom</span>;
    <span style="color: #008000; font-weight: bold">width</span>: <span style="color: #666666">100</span><span style="color: #B00040">%</span>;
}

#<span style="color: #0000FF; font-weight: bold">A-input</span> {
    <span style="color: #008000; font-weight: bold">float</span>: <span style="color: #008000; font-weight: bold">left</span>;
    <span style="color: #008000; font-weight: bold">margin-right</span>: <span style="color: #666666">20</span><span style="color: #B00040">px</span>;
}

#<span style="color: #0000FF; font-weight: bold">B-input</span> {
    <span style="color: #008000; font-weight: bold">float</span>: <span style="color: #008000; font-weight: bold">left</span>;
}

#<span style="color: #0000FF; font-weight: bold">operators</span> {
    <span style="color: #008000; font-weight: bold">float</span>: <span style="color: #008000; font-weight: bold">left</span>;
    <span style="color: #008000; font-weight: bold">margin-right</span>: <span style="color: #666666">20</span><span style="color: #B00040">px</span>;
    <span style="color: #008000; font-weight: bold">margin-top</span>: <span style="color: #666666">100</span><span style="color: #B00040">px</span>;
    <span style="color: #008000; font-weight: bold">margin-bottom</span>: <span style="color: #666666">100</span><span style="color: #B00040">px</span>;
}
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/static/styles/questions.css</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>.<span style="color: #0000FF; font-weight: bold">out_question</span>{
    <span style="color: #008000; font-weight: bold">width</span>: <span style="color: #666666">100</span><span style="color: #B00040">%</span>;
    <span style="color: #008000; font-weight: bold">padding</span>: <span style="color: #666666">10</span><span style="color: #B00040">px</span>;
    <span style="color: #008000; font-weight: bold">text-align</span>: <span style="color: #008000; font-weight: bold">center</span>;
}

.<span style="color: #0000FF; font-weight: bold">input</span>{
    <span style="color: #008000; font-weight: bold">width</span>: <span style="color: #666666">50</span><span style="color: #B00040">px</span>;
    <span style="color: #008000; font-weight: bold">height</span>: <span style="color: #666666">50</span><span style="color: #B00040">px</span>;
    <span style="color: #008000; font-weight: bold">text-align</span>: <span style="color: #008000; font-weight: bold">center</span>;
}

.<span style="color: #0000FF; font-weight: bold">answer</span>{
    <span style="color: #008000; font-weight: bold">display</span>:<span style="color: #008000; font-weight: bold">inline-block</span>;
    <span style="color: #008000; font-weight: bold">width</span>:<span style="color: #666666">50</span><span style="color: #B00040">%</span>;
    <span style="color: #008000; font-weight: bold">margin</span>:<span style="color: #666666">0</span> <span style="color: #008000; font-weight: bold">auto</span>;
    <span style="color: #008000; font-weight: bold">padding</span>: <span style="color: #666666">10</span><span style="color: #B00040">px</span>;
}

.<span style="color: #0000FF; font-weight: bold">question</span>{
    <span style="color: #008000; font-weight: bold">padding</span>: <span style="color: #666666">10</span><span style="color: #B00040">px</span>;
}
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/templates/help.html</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">extends</span> <span style="color: #BA2121">&quot;layout.html&quot;</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">title</span> <span style="color: #BC7A00">%}</span>Help<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">head</span> <span style="color: #BC7A00">%}</span>
<span style="color: #BC7A00">{{</span> <span style="color: #008000">super</span><span style="color: #666666">()</span> <span style="color: #BC7A00">}}</span>
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">main</span> <span style="color: #BC7A00">%}</span>
<span style="color: #BC7A00">{{</span> <span style="color: #008000">super</span><span style="color: #666666">()</span> <span style="color: #BC7A00">}}</span>
&lt;<span style="color: #008000; font-weight: bold">p</span>&gt; This is the help page &lt;/<span style="color: #008000; font-weight: bold">p</span>&gt;
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/templates/index.html</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">extends</span> <span style="color: #BA2121">&quot;layout.html&quot;</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">title</span> <span style="color: #BC7A00">%}</span>Home Page<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">head</span> <span style="color: #BC7A00">%}</span>
<span style="color: #BC7A00">{{</span> <span style="color: #008000">super</span><span style="color: #666666">()</span> <span style="color: #BC7A00">}}</span>
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">nav</span> <span style="color: #BC7A00">%}</span>
<span style="color: #408080; font-style: italic">{# home page does not need navigation bar, all the links are on this page#}</span>
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">main</span> <span style="color: #BC7A00">%}</span>
    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-lg-12&quot;</span> <span style="color: #7D9029">style</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;margin-top:15px;&quot;</span>&gt;
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">current_user.is_authenticated</span> <span style="color: #BC7A00">%}</span>
        Logged in as <span style="color: #BC7A00">{{</span> <span style="color: #19177C">current_user.fname</span> <span style="color: #BC7A00">}}</span><span style="color: #999999; font-weight: bold">&amp;nbsp;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">current_user.lname</span> <span style="color: #BC7A00">}}</span>
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endif</span> <span style="color: #BC7A00">%}</span>

        <span style="color: #408080; font-style: italic">&lt;!--Links to all other pages--&gt;</span>
        &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary btn-lg btn-block&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;loci.loci&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Loci Plotter&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary btn-lg btn-block&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;loci.operations&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Complex Number Operations&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary btn-lg btn-block&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;matrix_blueprint.matrix&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Matrix Calculator&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary btn-lg btn-block&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;questions.questions&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Questions&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary btn-lg btn-block&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;help&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Help&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">br</span>&gt;

        &lt;<span style="color: #008000; font-weight: bold">div</span>&gt;
        <span style="color: #408080; font-style: italic">{# Show log in buttons if user isnt logged in, else show other buttons #}</span>
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000; font-weight: bold">not</span> <span style="color: #19177C">current_user.is_authenticated</span> <span style="color: #BC7A00">%}</span>
          &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class </span><span style="color: #666666">=</span> <span style="color: #BA2121">&quot;col-sm-6&quot;</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary btn-lg btn-block&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;user.login&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Log In&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
          &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class </span><span style="color: #666666">=</span> <span style="color: #BA2121">&quot;col-sm-6&quot;</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary btn-lg btn-block&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;user.register&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Sign Up&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
          &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">else</span> <span style="color: #BC7A00">%}</span>
          &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class </span><span style="color: #666666">=</span> <span style="color: #BA2121">&quot;col-sm-6&quot;</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary btn-lg btn-block&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;user.logout&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Log Out&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
          &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class </span><span style="color: #666666">=</span> <span style="color: #BA2121">&quot;col-sm-6&quot;</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary btn-lg btn-block&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;user.account&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Account&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
          &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endif</span> <span style="color: #BC7A00">%}</span>
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
        <span style="color: #408080; font-style: italic">{# show all flashed messages #}</span>
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">with</span> <span style="color: #19177C">messages</span> <span style="color: #666666">=</span> <span style="color: #19177C">get_flashed_messages</span><span style="color: #666666">()</span> <span style="color: #BC7A00">%}</span>
            <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">messages</span> <span style="color: #BC7A00">%}</span>
                <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">message</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">messages</span> <span style="color: #BC7A00">%}</span>
                &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;alert alert-info alert-dismissable fade in&quot;</span> <span style="color: #7D9029">style</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;margin-top:55px&quot;</span>&gt;
                  &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;#&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;close&quot;</span> <span style="color: #7D9029">data-dismiss</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;alert&quot;</span> <span style="color: #7D9029">aria-label</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;close&quot;</span>&gt;<span style="color: #999999; font-weight: bold">&amp;times;</span>&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
                  <span style="color: #BC7A00">{{</span> <span style="color: #19177C">message</span> <span style="color: #BC7A00">}}</span>
                &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
            <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endif</span> <span style="color: #BC7A00">%}</span>
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endwith</span> <span style="color: #BC7A00">%}</span>

    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/templates/layout.html</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #BC7A00">&lt;!DOCTYPE html&gt;</span>
<span style="color: #408080; font-style: italic">{# Jinja 2 Template which all other templates will inherit from #}</span>
<span style="color: #408080; font-style: italic">{# Contains blocks which are overridden by child templates #}</span>
<span style="color: #408080; font-style: italic">{# Child blocks call super() to get the common elements #}</span>

&lt;<span style="color: #008000; font-weight: bold">html</span>&gt;
&lt;<span style="color: #008000; font-weight: bold">head</span>&gt;
  <span style="color: #408080; font-style: italic">&lt;!-- load all common libraries and css in head, can be overidden --&gt;</span>
  <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">head</span> <span style="color: #BC7A00">%}</span>
  &lt;<span style="color: #008000; font-weight: bold">meta</span> <span style="color: #7D9029">charset</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;utf-8&quot;</span>&gt;
  &lt;<span style="color: #008000; font-weight: bold">title</span>&gt;<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">title</span> <span style="color: #BC7A00">%}</span> A2 Project Website<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>&lt;/<span style="color: #008000; font-weight: bold">title</span>&gt;
  <span style="color: #408080; font-style: italic">&lt;!-- load jquery --&gt;</span>
  &lt;<span style="color: #008000; font-weight: bold">script</span> <span style="color: #7D9029">src</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js&quot;</span>&gt;
  &lt;/<span style="color: #008000; font-weight: bold">script</span>&gt;
  <span style="color: #408080; font-style: italic">&lt;!-- bootstrap css and js --&gt;</span>
  &lt;<span style="color: #008000; font-weight: bold">link</span> <span style="color: #7D9029">rel</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;stylesheet&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css&quot;</span>&gt;
  &lt;<span style="color: #008000; font-weight: bold">script</span> <span style="color: #7D9029">src</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js&quot;</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">script</span>&gt;
  &lt;<span style="color: #008000; font-weight: bold">link</span> <span style="color: #7D9029">rel</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;stylesheet&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;static&#39;</span><span style="color: #666666">,</span> <span style="color: #19177C">filename</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;styles/main.css&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;
  <span style="color: #408080; font-style: italic">&lt;!-- All pages have the same favicon --&gt;</span>
  &lt;<span style="color: #008000; font-weight: bold">link</span> <span style="color: #7D9029">rel</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;shortcut icon&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;static&#39;</span><span style="color: #666666">,</span> <span style="color: #19177C">filename</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;favicon.ico&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;
  <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>
&lt;/<span style="color: #008000; font-weight: bold">head</span>&gt;
&lt;<span style="color: #008000; font-weight: bold">body</span>&gt;
  <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">nav</span> <span style="color: #BC7A00">%}</span>
  &lt;<span style="color: #008000; font-weight: bold">nav</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;navbar navbar-default&quot;</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;container-fluid&quot;</span>&gt;
      <span style="color: #408080; font-style: italic">&lt;!-- Brand and toggle get grouped for better mobile display --&gt;</span>
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;navbar-header&quot;</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">button</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;button&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;navbar-toggle collapsed&quot;</span> <span style="color: #7D9029">data-toggle</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;collapse&quot;</span> <span style="color: #7D9029">data-target</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;#bs-example-navbar-collapse-1&quot;</span> <span style="color: #7D9029">aria-expanded</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;false&quot;</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">span</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;icon-bar&quot;</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">span</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">span</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;icon-bar&quot;</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">span</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">span</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;icon-bar&quot;</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">span</span>&gt;
        &lt;/<span style="color: #008000; font-weight: bold">button</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;navbar-brand&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;main&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;A2 Project&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;

      <span style="color: #408080; font-style: italic">&lt;!-- Collect the nav links, forms, and other content for toggling --&gt;</span>
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;collapse navbar-collapse&quot;</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;bs-example-navbar-collapse-1&quot;</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">ul</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;nav navbar-nav&quot;</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;loci.loci&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Loci Plotter&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;matrix_blueprint.matrix&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Matrix Calculator&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;loci.operations&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Complex Number Operations&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;help&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Help&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;#&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;dropdown-toggle&quot;</span> <span style="color: #7D9029">data-toggle</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;dropdown&quot;</span>&gt;Questions &lt;<span style="color: #008000; font-weight: bold">b</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;caret&quot;</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">b</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
            <span style="color: #408080; font-style: italic">&lt;!-- dropdown link list --&gt;</span>
            &lt;<span style="color: #008000; font-weight: bold">ul</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;dropdown-menu multi-level&quot;</span>&gt;
              &lt;<span style="color: #008000; font-weight: bold">li</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;dropdown-submenu&quot;</span>&gt;
                &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;questions.questions&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;dropdown-toggle&quot;</span> <span style="color: #7D9029">data-toggle</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;dropdown&quot;</span>&gt;Matrix&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
                &lt;<span style="color: #008000; font-weight: bold">ul</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;dropdown-menu&quot;</span>&gt;
                  &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;questions.show_questions&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">topic</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;matrix&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">q_type</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;add_sub&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Addition and Subtraction&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
                  &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;questions.show_questions&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">topic</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;matrix&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">q_type</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;mult&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Multiplication&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
                  &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;questions.show_questions&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">topic</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;matrix&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">q_type</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;inv&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Inverse&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
                  &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;questions.show_questions&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">topic</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;matrix&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">q_type</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;det&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Determinant&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
                &lt;/<span style="color: #008000; font-weight: bold">ul</span>&gt;
              &lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
              &lt;<span style="color: #008000; font-weight: bold">li</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;dropdown-submenu&quot;</span>&gt;
                &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;questions.questions&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>  <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;dropdown-toggle&quot;</span> <span style="color: #7D9029">data-toggle</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;dropdown&quot;</span>&gt;Complex numbers&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
                &lt;<span style="color: #008000; font-weight: bold">ul</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;dropdown-menu&quot;</span>&gt;
                  &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;questions.show_questions&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">topic</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;complex&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">q_type</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;add_sub&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Addition and Subtraction&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
                  &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;questions.show_questions&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">topic</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;complex&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">q_type</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;mult&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Multiplication&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
                  &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;questions.show_questions&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">topic</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;complex&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">q_type</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;div&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Division&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
                  &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;questions.show_questions&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">topic</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;complex&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">q_type</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;mod_arg&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Modulus and Argument&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
                &lt;/<span style="color: #008000; font-weight: bold">ul</span>&gt;
              &lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
            &lt;/<span style="color: #008000; font-weight: bold">ul</span>&gt; <span style="color: #408080; font-style: italic">&lt;!--end left links--&gt;</span>
          &lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
            <span style="color: #408080; font-style: italic">&lt;!--right links--&gt;</span>
            &lt;<span style="color: #008000; font-weight: bold">ul</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;nav navbar-nav navbar-right&quot;</span>&gt;
              <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">current_user.is_authenticated</span> <span style="color: #BC7A00">%}</span>
              &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;user.account&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Account&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
              &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;user.logout&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Log Out&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
              <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">else</span> <span style="color: #BC7A00">%}</span>
              &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;user.login&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Log In&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
              &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;user.register&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Register&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
              <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endif</span> <span style="color: #BC7A00">%}</span>
            &lt;/<span style="color: #008000; font-weight: bold">ul</span>&gt;<span style="color: #408080; font-style: italic">&lt;!--end right links--&gt;</span>
          &lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
        &lt;/<span style="color: #008000; font-weight: bold">ul</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;<span style="color: #408080; font-style: italic">&lt;!-- /.navbar-collapse --&gt;</span>
    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;<span style="color: #408080; font-style: italic">&lt;!-- /.container-fluid --&gt;</span>
  &lt;/<span style="color: #008000; font-weight: bold">nav</span>&gt;
  <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

  &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;container-fluid content&quot;</span>&gt;
    <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">main</span> <span style="color: #BC7A00">%}</span>
    <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>
  &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
  &lt;<span style="color: #008000; font-weight: bold">footer</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;footer&quot;</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;container&quot;</span>&gt;
    <span style="color: #408080; font-style: italic">&lt;!-- Same footer for all pages, but can be overridden --&gt;</span>
    <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">footer</span> <span style="color: #BC7A00">%}</span>
      &lt;<span style="color: #008000; font-weight: bold">p</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;text-muted&quot;</span>&gt; Anik Roy 2017 &lt;/<span style="color: #008000; font-weight: bold">p</span>&gt;
    <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>
    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
  &lt;/<span style="color: #008000; font-weight: bold">footer</span>&gt;
  <span style="color: #408080; font-style: italic">&lt;!-- Block for other javascript at end of document --&gt;</span>
  <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">endscripts</span> <span style="color: #BC7A00">%}</span>
  <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>
&lt;/<span style="color: #008000; font-weight: bold">body</span>&gt;

&lt;/<span style="color: #008000; font-weight: bold">html</span>&gt;
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/templates/loci.html</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">extends</span> <span style="color: #BA2121">&quot;layout.html&quot;</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">title</span> <span style="color: #BC7A00">%}</span> Loci Plotter <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">head</span> <span style="color: #BC7A00">%}</span>
<span style="color: #BC7A00">{{</span> <span style="color: #008000">super</span><span style="color: #666666">()</span> <span style="color: #BC7A00">}}</span>
&lt;<span style="color: #008000; font-weight: bold">link</span> <span style="color: #7D9029">rel</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;stylesheet&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;static&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">filename</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;image-picker/image-picker.css&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;
<span style="color: #408080; font-style: italic">&lt;!--Load desmos and image-picker javascript--&gt;</span>
&lt;<span style="color: #008000; font-weight: bold">script</span> <span style="color: #7D9029">src</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;https://www.desmos.com/api/v0.7/calculator.js?apiKey=dcb31709b452b1cf9dc26972add0fda6&quot;</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">script</span>&gt;
&lt;<span style="color: #008000; font-weight: bold">script</span> <span style="color: #7D9029">src</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;static&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">filename</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;image-picker/image-picker.min.js&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">script</span>&gt;

&lt;<span style="color: #008000; font-weight: bold">script</span>&gt;
    <span style="color: #408080; font-style: italic">// Initialize MathJax and typesetting</span>
    <span style="color: #008000">window</span>.MathJax <span style="color: #666666">=</span> {
        AuthorInit<span style="color: #666666">:</span> <span style="color: #008000; font-weight: bold">function</span>() {
            MathJax.Hub.Register.StartupHook(<span style="color: #BA2121">&#39;End&#39;</span>, <span style="color: #008000; font-weight: bold">function</span>() {
                MathJax.Hub.processSectionDelay <span style="color: #666666">=</span> <span style="color: #666666">0</span>
                <span style="color: #008000; font-weight: bold">var</span> eq_in <span style="color: #666666">=</span> <span style="color: #008000">document</span>.getElementById(<span style="color: #BA2121">&#39;eq_in&#39;</span>)
                <span style="color: #008000; font-weight: bold">var</span> MathPreview <span style="color: #666666">=</span> <span style="color: #008000">document</span>.getElementById(<span style="color: #BA2121">&#39;MathPreview&#39;</span>)
                <span style="color: #008000; font-weight: bold">var</span> math <span style="color: #666666">=</span> MathJax.Hub.getAllJax(<span style="color: #BA2121">&#39;MathPreview&#39;</span>)[<span style="color: #666666">0</span>]
                eq_in.addEventListener(<span style="color: #BA2121">&#39;input&#39;</span>, <span style="color: #008000; font-weight: bold">function</span>() {
                    MathJax.Hub.Queue([<span style="color: #BA2121">&#39;Text&#39;</span>, math, eq_in.value])
                })
            })
        }
    }
&lt;/<span style="color: #008000; font-weight: bold">script</span>&gt;
<span style="color: #408080; font-style: italic">&lt;!--Load MathJax library--&gt;</span>
&lt;<span style="color: #008000; font-weight: bold">script</span> <span style="color: #7D9029">src</span><span style="color: #666666">=</span><span style="color: #BA2121">https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=AM_HTMLorMML-full.js</span>&gt;
&lt;/<span style="color: #008000; font-weight: bold">script</span>&gt;
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">main</span> <span style="color: #BC7A00">%}</span>
  &lt;<span style="color: #008000; font-weight: bold">row</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-lg-12&quot;</span>&gt;
        <span style="color: #408080; font-style: italic">&lt;!-- equation input group --&gt;</span>
          &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;input-group&quot;</span> <span style="color: #7D9029">style</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;margin-top:10px;margin-bottom:10px&quot;</span>&gt;
              &lt;<span style="color: #008000; font-weight: bold">span</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;input-group-btn&quot;</span>&gt;
                  &lt;<span style="color: #008000; font-weight: bold">button</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary&quot;</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;button&quot;</span> <span style="color: #7D9029">data-toggle</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal&quot;</span> <span style="color: #7D9029">data-target</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;#help-modal&quot;</span>&gt;Help&lt;/<span style="color: #008000; font-weight: bold">button</span>&gt;
              &lt;/<span style="color: #008000; font-weight: bold">span</span>&gt;
              &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;text&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span> <span style="color: #7D9029">placeholder</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Enter Equation...&quot;</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;eq_in&#39;</span> <span style="color: #7D9029">name</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;in&quot;</span>&gt;
              <span style="color: #408080; font-style: italic">&lt;!-- inline button to right of text input--&gt;</span>
              &lt;<span style="color: #008000; font-weight: bold">span</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;input-group-btn&quot;</span>&gt;
                  &lt;<span style="color: #008000; font-weight: bold">button</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;go&quot;</span>  <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-success&quot;</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;button&quot;</span>&gt;Go&lt;/<span style="color: #008000; font-weight: bold">button</span>&gt;
              &lt;/<span style="color: #008000; font-weight: bold">span</span>&gt;
          &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
          <span style="color: #408080; font-style: italic">&lt;!-- end input-group --&gt;</span>
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
  &lt;/<span style="color: #008000; font-weight: bold">row</span>&gt;
  &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-sm-4&quot;</span>&gt;
    <span style="color: #408080; font-style: italic">&lt;!-- math typesetting preview box--&gt;</span>
      &lt;<span style="color: #008000; font-weight: bold">div</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">MathPreview</span> <span style="color: #7D9029">style</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;padding: 3px; width:100%; margin-top:5px;&quot;</span>&gt;``&lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;MathBuffer&quot;</span> <span style="color: #7D9029">style</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;padding: 3px; width:100%; margin-top:5px; visibility:hidden; position:absolute; top:0; left: 0&quot;</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">div</span>&gt;
        <span style="color: #408080; font-style: italic">&lt;!-- empty table to be filled in by javascript--&gt;</span>
          &lt;<span style="color: #008000; font-weight: bold">table</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;expressions&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;table&quot;</span>&gt;
              &lt;<span style="color: #008000; font-weight: bold">thead</span>&gt;
                  &lt;<span style="color: #008000; font-weight: bold">tr</span>&gt;
                      &lt;<span style="color: #008000; font-weight: bold">th</span>&gt;Plot&lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
                      &lt;<span style="color: #008000; font-weight: bold">th</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
                      &lt;<span style="color: #008000; font-weight: bold">th</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
                  &lt;/<span style="color: #008000; font-weight: bold">tr</span>&gt;
              &lt;/<span style="color: #008000; font-weight: bold">thead</span>&gt;
              &lt;<span style="color: #008000; font-weight: bold">tbody</span>&gt; &lt;/<span style="color: #008000; font-weight: bold">tbody</span>&gt;
          &lt;/<span style="color: #008000; font-weight: bold">table</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">div</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">button</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;button&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-block&quot;</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;clear&quot;</span>&gt;Clear All&lt;/<span style="color: #008000; font-weight: bold">button</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
  &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;

  &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-sm-8&quot;</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;calculator&quot;</span> <span style="color: #7D9029">style</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;width:100%; height:600px;&quot;</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">div</span>&gt;
      <span style="color: #408080; font-style: italic">{# only show save/load graphs if user is logged in #}</span>
      <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">current_user.is_authenticated</span> <span style="color: #BC7A00">%}</span>
        &lt;<span style="color: #008000; font-weight: bold">button</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;button&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-block&quot;</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;save-btn&quot;</span> <span style="color: #7D9029">data-toggle</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal&quot;</span> <span style="color: #7D9029">data-target</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;#save-modal&quot;</span>&gt;Save Graph&lt;/<span style="color: #008000; font-weight: bold">button</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">button</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;button&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-block&quot;</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;load-btn&quot;</span> <span style="color: #7D9029">data-toggle</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal&quot;</span> <span style="color: #7D9029">data-target</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;#load-modal&quot;</span>&gt;Load Graph&lt;/<span style="color: #008000; font-weight: bold">button</span>&gt;
      <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endif</span> <span style="color: #BC7A00">%}</span>
    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
    <span style="color: #408080; font-style: italic">&lt;!-- save-modal--&gt;</span>
    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;save-modal&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal fade&quot;</span> <span style="color: #7D9029">role</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;dialog&quot;</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal-dialog&quot;</span>&gt;
        <span style="color: #408080; font-style: italic">&lt;!-- Modal content--&gt;</span>
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal-content&quot;</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal-header&quot;</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">button</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;button&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;close&quot;</span> <span style="color: #7D9029">data-dismiss</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal&quot;</span>&gt;<span style="color: #999999; font-weight: bold">&amp;times;</span>&lt;/<span style="color: #008000; font-weight: bold">button</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">h4</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal-title&quot;</span>&gt;Save Graph&lt;/<span style="color: #008000; font-weight: bold">h4</span>&gt;
          &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
          <span style="color: #408080; font-style: italic">&lt;!-- form for saving graphs --&gt;</span>
          &lt;<span style="color: #008000; font-weight: bold">form</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form&quot;</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;save-form&quot;</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal-body&quot;</span>&gt;
              &lt;<span style="color: #008000; font-weight: bold">label</span> <span style="color: #7D9029">for</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;title&quot;</span>&gt;Title&lt;/<span style="color: #008000; font-weight: bold">label</span>&gt;
              &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;title&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;text&quot;</span>&gt;
              &lt;<span style="color: #008000; font-weight: bold">label</span> <span style="color: #7D9029">for</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;desc&quot;</span>&gt;Description&lt;/<span style="color: #008000; font-weight: bold">label</span>&gt;
              &lt;<span style="color: #008000; font-weight: bold">textarea</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;desc&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span> <span style="color: #7D9029">form</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;save-form&quot;</span> &gt;&lt;/<span style="color: #008000; font-weight: bold">textarea</span>&gt;
            &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal-footer&quot;</span>&gt;
              &lt;<span style="color: #008000; font-weight: bold">button</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;button&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-default&quot;</span> <span style="color: #7D9029">data-dismiss</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal&quot;</span>&gt;Cancel&lt;/<span style="color: #008000; font-weight: bold">button</span>&gt;
              &lt;<span style="color: #008000; font-weight: bold">button</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;button&quot;</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;submit-graph&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary&quot;</span>&gt;Save&lt;/<span style="color: #008000; font-weight: bold">button</span>&gt;
            &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
          &lt;/<span style="color: #008000; font-weight: bold">form</span>&gt;
          <span style="color: #408080; font-style: italic">&lt;!-- end form --&gt;</span>
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
        <span style="color: #408080; font-style: italic">&lt;!-- end modal content--&gt;</span>
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
    <span style="color: #408080; font-style: italic">&lt;!-- end save-modal--&gt;</span>
    <span style="color: #408080; font-style: italic">&lt;!--load-modal--&gt;</span>
    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;load-modal&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal fade&quot;</span> <span style="color: #7D9029">role</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;dialog&quot;</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal-dialog&quot;</span>&gt;
        <span style="color: #408080; font-style: italic">&lt;!-- Modal content--&gt;</span>
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal-content&quot;</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal-header&quot;</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">button</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;button&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;close&quot;</span> <span style="color: #7D9029">data-dismiss</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal&quot;</span>&gt;<span style="color: #999999; font-weight: bold">&amp;times;</span>&lt;/<span style="color: #008000; font-weight: bold">button</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">h4</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal-title&quot;</span>&gt;Load Graph&lt;/<span style="color: #008000; font-weight: bold">h4</span>&gt;
          &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">form</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form&quot;</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;load-form&quot;</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal-body&quot;</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">label</span> <span style="color: #7D9029">for</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;title&quot;</span>&gt;Select Graph&lt;/<span style="color: #008000; font-weight: bold">label</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">select</span> <span style="color: #7D9029">size</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;5&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;image-picker show-html&quot;</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;graph-select&quot;</span>&gt;
              <span style="color: #408080; font-style: italic">{# load all user_graphs into gallery for users to select from #}</span>
              <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">user_graphs</span> <span style="color: #BC7A00">%}</span>
              <span style="color: #408080; font-style: italic">{# only do this is the user has any graphs at all #}</span>
                <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">g</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">user_graphs</span> <span style="color: #BC7A00">%}</span>
                  <span style="color: #408080; font-style: italic">{# create option in select box for each graph with appropriate image url #}</span>
                  &lt;<span style="color: #008000; font-weight: bold">option</span> <span style="color: #7D9029">data-img-src</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">g.image_url</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span> <span style="color: #7D9029">value</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">g.graph_id</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">g.title</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">option</span>&gt;
                <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
              <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endif</span> <span style="color: #BC7A00">%}</span>
            &lt;/<span style="color: #008000; font-weight: bold">select</span>&gt;
          &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal-footer&quot;</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">button</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;button&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-default&quot;</span> <span style="color: #7D9029">data-dismiss</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal&quot;</span>&gt;Cancel&lt;/<span style="color: #008000; font-weight: bold">button</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">button</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;button&quot;</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;load-graph&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary&quot;</span>&gt;Load&lt;/<span style="color: #008000; font-weight: bold">button</span>&gt;
          &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
          &lt;/<span style="color: #008000; font-weight: bold">form</span>&gt;
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
        <span style="color: #408080; font-style: italic">&lt;!-- end modal content--&gt;</span>
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
    <span style="color: #408080; font-style: italic">&lt;!--end load-modal--&gt;</span>
    <span style="color: #408080; font-style: italic">&lt;!-- help modal --&gt;</span>
    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal fade&quot;</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;help-modal&quot;</span> <span style="color: #7D9029">tabindex</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;-1&quot;</span> <span style="color: #7D9029">role</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;dialog&quot;</span> <span style="color: #7D9029">aria-labelledby</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;exampleModalLabel&quot;</span> <span style="color: #7D9029">aria-hidden</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;true&quot;</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal-dialog&quot;</span> <span style="color: #7D9029">role</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;document&quot;</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal-content&quot;</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal-header&quot;</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">button</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;button&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;close&quot;</span> <span style="color: #7D9029">data-dismiss</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal&quot;</span>&gt;<span style="color: #999999; font-weight: bold">&amp;times;</span>&lt;/<span style="color: #008000; font-weight: bold">button</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">h4</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal-title&quot;</span>&gt;Load Graph&lt;/<span style="color: #008000; font-weight: bold">h4</span>&gt;
          &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
          <span style="color: #408080; font-style: italic">&lt;!-- help modal content --&gt;</span>
          &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal-body&quot;</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">h5</span>&gt;Loci Plotter&lt;/<span style="color: #008000; font-weight: bold">h5</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">p</span>&gt;
              &lt;<span style="color: #008000; font-weight: bold">b</span>&gt;You must use the variable z for equations &lt;/<span style="color: #008000; font-weight: bold">b</span>&gt;&lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
              Use the | symbol for modulus&lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
              Use arg(...) for the argument function&lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
              You can use pi by typing &#39;pi&#39; into the input bar&lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
              You must enter an equation or an inequality&lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
              Press the Go button to plot the equation&lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
              You can also save graphs (only if logged in) by pressing the button under the graph&lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
              Examples:
                |z|=5
                |z+3+i|=2
                arg(z-i)=pi/2
            &lt;/<span style="color: #008000; font-weight: bold">p</span>&gt;
          &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
          <span style="color: #408080; font-style: italic">&lt;!-- end content --&gt;</span>
          &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal-footer&quot;</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">button</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;button&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-secondary&quot;</span> <span style="color: #7D9029">data-dismiss</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal&quot;</span>&gt;Close&lt;/<span style="color: #008000; font-weight: bold">button</span>&gt;
          &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
  &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
  <span style="color: #408080; font-style: italic">&lt;!-- end help modal --&gt;</span>
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">endscripts</span> <span style="color: #BC7A00">%}</span>
    &lt;<span style="color: #008000; font-weight: bold">script</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">text/javascript</span>&gt;
        $SCRIPT_ROOT <span style="color: #666666">=</span> <span style="color: #BC7A00">{{</span> <span style="color: #19177C">request.script_root</span> <span style="color: #666666">|</span> <span style="color: #0000FF">tojson</span> <span style="color: #666666">|</span> <span style="color: #0000FF">safe</span> <span style="color: #BC7A00">}}</span>;
    &lt;/<span style="color: #008000; font-weight: bold">script</span>&gt;

    &lt;<span style="color: #008000; font-weight: bold">script</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;text/javascript&quot;</span> <span style="color: #7D9029">src</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;static&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">filename</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;scripts/loci_plot.js&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">script</span>&gt;
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/templates/matrix.html</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">extends</span> <span style="color: #BA2121">&quot;layout.html&quot;</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">title</span> <span style="color: #BC7A00">%}</span>Matrix Calculator<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">head</span> <span style="color: #BC7A00">%}</span>
<span style="color: #BC7A00">{{</span> <span style="color: #008000">super</span><span style="color: #666666">()</span> <span style="color: #BC7A00">}}</span>
<span style="color: #408080; font-style: italic">&lt;!-- load css --&gt;</span>
&lt;<span style="color: #008000; font-weight: bold">link</span> <span style="color: #7D9029">rel</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;stylesheet&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;http://yui.yahooapis.com/pure/0.6.0/pure-min.css&quot;</span>&gt;
&lt;<span style="color: #008000; font-weight: bold">link</span> <span style="color: #7D9029">rel</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;stylesheet&quot;</span> <span style="color: #7D9029">media</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;screen&quot;</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;text/css&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;static&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">filename</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;styles/matrix.css&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">main</span> <span style="color: #BC7A00">%}</span>
&lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;outer&quot;</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;inner&quot;</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">align</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;center&quot;</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;matrices&quot;</span>&gt;
                &lt;<span style="color: #008000; font-weight: bold">form</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;pure-form&quot;</span> <span style="color: #7D9029">method</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;post&quot;</span> <span style="color: #7D9029">action</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;matrix&quot;</span>&gt;
                    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;A-input&quot;</span>&gt;
                      <span style="color: #408080; font-style: italic">{# Create 3x3 matrix of inputs with names corresponding to their position #}</span>
                        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">x</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #666666">[</span><span style="color: #BA2121">&#39;0&#39;</span><span style="color: #666666">,</span><span style="color: #BA2121">&#39;1&#39;</span><span style="color: #666666">,</span><span style="color: #BA2121">&#39;2&#39;</span><span style="color: #666666">]</span> <span style="color: #BC7A00">%}</span>
                            <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">y</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #666666">[</span><span style="color: #BA2121">&#39;0&#39;</span><span style="color: #666666">,</span><span style="color: #BA2121">&#39;1&#39;</span><span style="color: #666666">,</span><span style="color: #BA2121">&#39;2&#39;</span><span style="color: #666666">]</span> <span style="color: #BC7A00">%}</span>                      
                            &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;text&quot;</span> <span style="color: #7D9029">name</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span>  <span style="color: #BA2121">&#39;A&#39;</span><span style="color: #666666">+</span><span style="color: #19177C">x</span><span style="color: #666666">+</span><span style="color: #19177C">y</span>  <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span> <span style="color: #7D9029">size</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;3&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;in&quot;</span> <span style="color: #7D9029">value</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">request.form</span><span style="color: #666666">[</span><span style="color: #BA2121">&#39;A&#39;</span><span style="color: #666666">+</span><span style="color: #19177C">x</span><span style="color: #666666">+</span><span style="color: #19177C">y</span><span style="color: #666666">]</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;

                            <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
                            &lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
                        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>

                        &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;submit&quot;</span> <span style="color: #7D9029">value</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Determinant&quot;</span> <span style="color: #7D9029">name</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;a-submit&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;pure-button&quot;</span>&gt;
                        &lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
                        &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;submit&quot;</span> <span style="color: #7D9029">value</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Inverse&quot;</span> <span style="color: #7D9029">name</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;a-submit&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;pure-button&quot;</span>&gt;
                        &lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
                        &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;submit&quot;</span> <span style="color: #7D9029">value</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Transpose&quot;</span> <span style="color: #7D9029">name</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;a-submit&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;pure-button&quot;</span>&gt;
                        &lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
                        &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;submit&quot;</span> <span style="color: #7D9029">value</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Triangle&quot;</span> <span style="color: #7D9029">name</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;a-submit&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;pure-button&quot;</span>&gt;
                        &lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
                    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;

                    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;operators&quot;</span>&gt;
                        &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;submit&quot;</span> <span style="color: #7D9029">value</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;X&quot;</span> <span style="color: #7D9029">name</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;submit&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;pure-button op-btn&quot;</span>&gt;
                        &lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
                        &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;submit&quot;</span> <span style="color: #7D9029">value</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;+&quot;</span> <span style="color: #7D9029">name</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;submit&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;pure-button op-btn&quot;</span>&gt;
                        &lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
                        &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;submit&quot;</span> <span style="color: #7D9029">value</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;-&quot;</span> <span style="color: #7D9029">name</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;submit&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;pure-button op-btn&quot;</span>&gt;
                        &lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
                        &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;button&quot;</span> <span style="color: #7D9029">value</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Clear All&quot;</span> <span style="color: #7D9029">onclick</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;window.location.reload()&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;pure-button clear-btn&quot;</span>&gt;
                    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;

                    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;B-input&quot;</span>&gt;
                      <span style="color: #408080; font-style: italic">{# Create 3x3 matrix of inputs with names corresponding to their position #}</span>
                        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">x</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #666666">[</span><span style="color: #BA2121">&#39;0&#39;</span><span style="color: #666666">,</span><span style="color: #BA2121">&#39;1&#39;</span><span style="color: #666666">,</span><span style="color: #BA2121">&#39;2&#39;</span><span style="color: #666666">]</span> <span style="color: #BC7A00">%}</span>
                            <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">y</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #666666">[</span><span style="color: #BA2121">&#39;0&#39;</span><span style="color: #666666">,</span><span style="color: #BA2121">&#39;1&#39;</span><span style="color: #666666">,</span><span style="color: #BA2121">&#39;2&#39;</span><span style="color: #666666">]</span> <span style="color: #BC7A00">%}</span>
                            &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;text&quot;</span> <span style="color: #7D9029">name</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span>  <span style="color: #BA2121">&#39;B&#39;</span><span style="color: #666666">+</span><span style="color: #19177C">x</span><span style="color: #666666">+</span><span style="color: #19177C">y</span>  <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span> <span style="color: #7D9029">size</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;3&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;in&quot;</span> <span style="color: #7D9029">value</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">request.form</span><span style="color: #666666">[</span><span style="color: #BA2121">&#39;B&#39;</span><span style="color: #666666">+</span><span style="color: #19177C">x</span><span style="color: #666666">+</span><span style="color: #19177C">y</span><span style="color: #666666">]</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;

                            <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
                            &lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
                        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
                        &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;submit&quot;</span> <span style="color: #7D9029">value</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Determinant&quot;</span> <span style="color: #7D9029">name</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;b-submit&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;pure-button&quot;</span>&gt;
                        &lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
                        &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;submit&quot;</span> <span style="color: #7D9029">value</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Inverse&quot;</span> <span style="color: #7D9029">name</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;b-submit&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;pure-button&quot;</span>&gt;
                        &lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
                        &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;submit&quot;</span> <span style="color: #7D9029">value</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Transpose&quot;</span> <span style="color: #7D9029">name</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;b-submit&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;pure-button&quot;</span>&gt;
                        &lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
                        &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;submit&quot;</span> <span style="color: #7D9029">value</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Triangle&quot;</span> <span style="color: #7D9029">name</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;b-submit&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;pure-button&quot;</span>&gt;
                        &lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
                    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                &lt;/<span style="color: #008000; font-weight: bold">form</span>&gt;
            &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
            <span style="color: #408080; font-style: italic">&lt;!-- anwer display div--&gt;</span>
            &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;answer&quot;</span> <span style="color: #7D9029">align</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;center&quot;</span>&gt;
            <span style="color: #408080; font-style: italic">{# div displays different things depending on result passed to template #}</span>
                <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">det_result</span> <span style="color: #BC7A00">%}</span>
                  &lt;<span style="color: #008000; font-weight: bold">p</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;det&quot;</span>&gt; Determinant: <span style="color: #BC7A00">{{</span> <span style="color: #19177C">det_result</span> <span style="color: #BC7A00">}}</span> &lt;/<span style="color: #008000; font-weight: bold">p</span>&gt;
                <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endif</span> <span style="color: #BC7A00">%}</span>
                <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">Error</span> <span style="color: #BC7A00">%}</span>
                  &lt;<span style="color: #008000; font-weight: bold">p</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;error&quot;</span>&gt; <span style="color: #BC7A00">{{</span> <span style="color: #19177C">Error</span> <span style="color: #BC7A00">}}</span> &lt;/<span style="color: #008000; font-weight: bold">p</span>&gt;
                <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endif</span> <span style="color: #BC7A00">%}</span>
                <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">matrix_result</span> <span style="color: #BC7A00">%}</span>
                  &lt;<span style="color: #008000; font-weight: bold">p</span>&gt;Result:&lt;/<span style="color: #008000; font-weight: bold">p</span>&gt;
                  &lt;<span style="color: #008000; font-weight: bold">table</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;matrix&quot;</span>&gt;
                      <span style="color: #408080; font-style: italic">{#  #}</span>
                      <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">row</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">matrix_result</span> <span style="color: #BC7A00">%}</span>
                      &lt;<span style="color: #008000; font-weight: bold">tr</span>&gt;
                          <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">value</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">row</span> <span style="color: #BC7A00">%}</span>
                            &lt;<span style="color: #008000; font-weight: bold">td</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">value</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">td</span>&gt;
                          <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
                        &lt;/<span style="color: #008000; font-weight: bold">tr</span>&gt;
                        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
                      &lt;/<span style="color: #008000; font-weight: bold">table</span>&gt;
                <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endif</span> <span style="color: #BC7A00">%}</span>
            &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/templates/operations.html</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">extends</span> <span style="color: #BA2121">&quot;layout.html&quot;</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">title</span> <span style="color: #BC7A00">%}</span> Argand Diagram <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">head</span> <span style="color: #BC7A00">%}</span>
<span style="color: #BC7A00">{{</span> <span style="color: #008000">super</span><span style="color: #666666">()</span> <span style="color: #BC7A00">}}</span>
&lt;<span style="color: #008000; font-weight: bold">link</span> <span style="color: #7D9029">rel</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;stylesheet&quot;</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;text/css&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;http://jsxgraph.uni-bayreuth.de/distrib/jsxgraph.css&quot;</span> &gt;

&lt;<span style="color: #008000; font-weight: bold">script</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;text/javascript&quot;</span> <span style="color: #7D9029">src</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;http://jsxgraph.uni-bayreuth.de/distrib/jsxgraphcore.js&quot;</span>&gt;
&lt;/<span style="color: #008000; font-weight: bold">script</span>&gt;
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">main</span> <span style="color: #BC7A00">%}</span>
  &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-sm-4&quot;</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">div</span>&gt;
      <span style="color: #408080; font-style: italic">&lt;!--empty table to be filled in by javascript--&gt;</span>
      &lt;<span style="color: #008000; font-weight: bold">table</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;expressions&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;table&quot;</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">thead</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">tr</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">th</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">th</span> <span style="color: #7D9029">colspan</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;2&quot;</span>&gt;Point&lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">th</span>&gt;Show&lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">th</span>&gt;Line&lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">th</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
          &lt;/<span style="color: #008000; font-weight: bold">tr</span>&gt;
        &lt;/<span style="color: #008000; font-weight: bold">thead</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">tbody</span>&gt;
          <span style="color: #408080; font-style: italic">&lt;!--empty tbody--&gt;</span>
        &lt;/<span style="color: #008000; font-weight: bold">tbody</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">table</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
    <span style="color: #408080; font-style: italic">&lt;!--add moveable point button--&gt;</span>
    &lt;<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">button</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;addpoint&quot;</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;button&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-block btn-primary&quot;</span>&gt;Add Moveable point&lt;/<span style="color: #008000; font-weight: bold">button</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">div</span>&gt;
      <span style="color: #408080; font-style: italic">&lt;!--add calculated point input--&gt;</span>
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;input-group&quot;</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;calc_in&quot;</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;text&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span> <span style="color: #7D9029">placeholder</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Enter Calculation&quot;</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">span</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;input-group-btn&quot;</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">button</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;addcalc&quot;</span>  <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary&quot;</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;button&quot;</span>&gt;Add Calculated point&lt;/<span style="color: #008000; font-weight: bold">button</span>&gt;
          &lt;/<span style="color: #008000; font-weight: bold">span</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt; <span style="color: #408080; font-style: italic">&lt;!-- end input group--&gt;</span>
    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
    <span style="color: #408080; font-style: italic">&lt;!--clear all button--&gt;</span>
    &lt;<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">button</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;button&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-block&quot;</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;clear&quot;</span>&gt;Clear All&lt;/<span style="color: #008000; font-weight: bold">button</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
  &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt; <span style="color: #408080; font-style: italic">&lt;!--end left column--&gt;</span>
  &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-sm-8&quot;</span>&gt; <span style="color: #408080; font-style: italic">&lt;!--right column--&gt;</span>
    <span style="color: #408080; font-style: italic">&lt;!--graphing area--&gt;</span>
    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;box&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;jxgbox&quot;</span> <span style="color: #7D9029">style</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;width:100%; height:600px;&quot;</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">button</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary btn-block  &quot;</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;button&quot;</span> <span style="color: #7D9029">data-toggle</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal&quot;</span> <span style="color: #7D9029">data-target</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;#help-modal&quot;</span>&gt;Help&lt;/<span style="color: #008000; font-weight: bold">button</span>&gt;
  &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;

  <span style="color: #408080; font-style: italic">&lt;!-- help modal --&gt;</span>
  &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal fade&quot;</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;help-modal&quot;</span> <span style="color: #7D9029">tabindex</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;-1&quot;</span> <span style="color: #7D9029">role</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;dialog&quot;</span> <span style="color: #7D9029">aria-labelledby</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;exampleModalLabel&quot;</span> <span style="color: #7D9029">aria-hidden</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;true&quot;</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal-dialog&quot;</span> <span style="color: #7D9029">role</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;document&quot;</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal-content&quot;</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal-header&quot;</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">button</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;button&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;close&quot;</span> <span style="color: #7D9029">data-dismiss</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal&quot;</span>&gt;<span style="color: #999999; font-weight: bold">&amp;times;</span>&lt;/<span style="color: #008000; font-weight: bold">button</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">h4</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal-title&quot;</span>&gt;Load Graph&lt;/<span style="color: #008000; font-weight: bold">h4</span>&gt;
          &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
          <span style="color: #408080; font-style: italic">&lt;!-- help modal content --&gt;</span>
          &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal-body&quot;</span>&gt;
            Add a moveable point on argand diagram&lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
            Add calculated point by inputting calculation&lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
          &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
          <span style="color: #408080; font-style: italic">&lt;!-- end content --&gt;</span>
          &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal-footer&quot;</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">button</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;button&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-secondary&quot;</span> <span style="color: #7D9029">data-dismiss</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;modal&quot;</span>&gt;Close&lt;/<span style="color: #008000; font-weight: bold">button</span>&gt;
          &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;<span style="color: #408080; font-style: italic">&lt;!-- end help modal --&gt;</span>
  &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">endscripts</span> <span style="color: #BC7A00">%}</span>
    &lt;<span style="color: #008000; font-weight: bold">script</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">text/javascript</span>&gt;
        $SCRIPT_ROOT <span style="color: #666666">=</span> <span style="color: #BC7A00">{{</span> <span style="color: #19177C">request.script_root</span> <span style="color: #666666">|</span> <span style="color: #0000FF">tojson</span> <span style="color: #666666">|</span> <span style="color: #0000FF">safe</span> <span style="color: #BC7A00">}}</span>;
    &lt;/<span style="color: #008000; font-weight: bold">script</span>&gt;

    &lt;<span style="color: #008000; font-weight: bold">script</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;text/javascript&quot;</span> <span style="color: #7D9029">src</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;static&#39;</span><span style="color: #666666">,</span> <span style="color: #19177C">filename</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;scripts/operations.js&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">script</span>&gt;
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/templates/emails/confirm_email.html</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>&lt;<span style="color: #008000; font-weight: bold">html</span>&gt;
&lt;<span style="color: #008000; font-weight: bold">body</span>&gt;
&lt;<span style="color: #008000; font-weight: bold">p</span>&gt;Hi&lt;/<span style="color: #008000; font-weight: bold">p</span>&gt;
&lt;<span style="color: #008000; font-weight: bold">p</span>&gt;Confirm Here: &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">confirm_url</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">confirm_url</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">p</span>&gt;
&lt;/<span style="color: #008000; font-weight: bold">body</span>&gt;
&lt;/<span style="color: #008000; font-weight: bold">html</span>&gt;
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/templates/emails/recover_email.html</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>&lt;<span style="color: #008000; font-weight: bold">html</span>&gt;

&lt;<span style="color: #008000; font-weight: bold">body</span>&gt;
&lt;<span style="color: #008000; font-weight: bold">p</span>&gt;Hi&lt;/<span style="color: #008000; font-weight: bold">p</span>&gt;
&lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
&lt;<span style="color: #008000; font-weight: bold">p</span>&gt;Reset Password Here: &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">recover_url</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">recover_url</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">p</span>&gt;
&lt;/<span style="color: #008000; font-weight: bold">body</span>&gt;
&lt;/<span style="color: #008000; font-weight: bold">html</span>&gt;
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/templates/questions/complex_questions.html</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">extends</span> <span style="color: #BA2121">&quot;layout.html&quot;</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">title</span> <span style="color: #BC7A00">%}</span> Complex Numbers <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">head</span> <span style="color: #BC7A00">%}</span>
<span style="color: #BC7A00">{{</span> <span style="color: #008000">super</span><span style="color: #666666">()</span> <span style="color: #BC7A00">}}</span>
&lt;<span style="color: #008000; font-weight: bold">script</span> <span style="color: #7D9029">src</span><span style="color: #666666">=</span><span style="color: #BA2121">https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=AM_HTMLorMML-full.js</span>&gt;
&lt;/<span style="color: #008000; font-weight: bold">script</span>&gt;

&lt;<span style="color: #008000; font-weight: bold">link</span> <span style="color: #7D9029">rel</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;stylesheet&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;static&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">filename</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;styles/questions.css&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">main</span> <span style="color: #BC7A00">%}</span>
  &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;main&quot;</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">form</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;questions&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-inline&quot;</span>&gt;
        <span style="color: #408080; font-style: italic">{# loop over all questions #}</span>
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">n</span><span style="color: #666666">,</span><span style="color: #19177C">q</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">questions</span> <span style="color: #BC7A00">%}</span>
          &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;out_question&quot;</span>&gt;
            <span style="color: #408080; font-style: italic">&lt;!--question--&gt;</span>
            &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;question&quot;</span>&gt;
              <span style="color: #BC7A00">{{</span> <span style="color: #19177C">q.get_q</span><span style="color: #666666">()</span><span style="color: #19177C">.replace</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;(1i&#39;</span><span style="color: #666666">,</span><span style="color: #BA2121">&#39;(i&#39;</span><span style="color: #666666">)</span><span style="color: #19177C">.replace</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;+1i&#39;</span><span style="color: #666666">,</span><span style="color: #BA2121">&#39;+i&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
            &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
            <span style="color: #408080; font-style: italic">&lt;!--answer--&gt;</span>
            &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;answer&quot;</span>&gt;
              <span style="color: #408080; font-style: italic">{# Different formatting for modulus and argument question #}</span>
              <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000; font-weight: bold">not</span> <span style="color: #19177C">q.is_mod_arg</span><span style="color: #666666">()</span> <span style="color: #BC7A00">%}</span>
                &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;text&quot;</span> <span style="color: #7D9029">name</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">n</span><span style="color: #666666">|</span><span style="color: #0000FF">string</span><span style="color: #666666">+</span><span style="color: #BA2121">&#39;re&#39;</span><span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control input&quot;</span>&gt; `+` <span style="color: #999999; font-weight: bold">&amp;nbsp;</span>
                &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;text&quot;</span> <span style="color: #7D9029">name</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">n</span><span style="color: #666666">|</span><span style="color: #0000FF">string</span><span style="color: #666666">+</span><span style="color: #BA2121">&#39;im&#39;</span><span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control input&quot;</span>&gt; `i`
              <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">else</span> <span style="color: #BC7A00">%}</span>
                mod: &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;text&quot;</span> <span style="color: #7D9029">name</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">n</span><span style="color: #666666">|</span><span style="color: #0000FF">string</span><span style="color: #666666">+</span><span style="color: #BA2121">&#39;mod&#39;</span><span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control input&quot;</span>&gt;
                arg: &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;text&quot;</span> <span style="color: #7D9029">name</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">n</span><span style="color: #666666">|</span><span style="color: #0000FF">string</span><span style="color: #666666">+</span><span style="color: #BA2121">&#39;arg&#39;</span><span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control input&quot;</span>&gt;
              <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endif</span> <span style="color: #BC7A00">%}</span>
            &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
          &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
        <span style="color: #408080; font-style: italic">&lt;!--Submit button--&gt;</span>
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;row&quot;</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-lg-12&quot;</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;submit&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary btn-lg btn-block submit&quot;</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;button&quot;</span> <span style="color: #7D9029">value</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Submit Answers&quot;</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
          &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">form</span>&gt;
  &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">endscripts</span> <span style="color: #BC7A00">%}</span>
    &lt;<span style="color: #008000; font-weight: bold">script</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">text/javascript</span>&gt;
        <span style="color: #408080; font-style: italic">// Variables for the js script</span>
        $SCRIPT_ROOT <span style="color: #666666">=</span> <span style="color: #BC7A00">{{</span> <span style="color: #19177C">request.script_root</span> <span style="color: #666666">|</span> <span style="color: #0000FF">tojson</span> <span style="color: #666666">|</span> <span style="color: #0000FF">safe</span> <span style="color: #BC7A00">}}</span>;
        q_type <span style="color: #666666">=</span> <span style="color: #BC7A00">{{</span> <span style="color: #19177C">q_type</span> <span style="color: #666666">|</span> <span style="color: #0000FF">tojson</span> <span style="color: #666666">|</span> <span style="color: #0000FF">safe</span> <span style="color: #BC7A00">}}</span>
        topic <span style="color: #666666">=</span> <span style="color: #BC7A00">{{</span> <span style="color: #19177C">topic</span> <span style="color: #666666">|</span> <span style="color: #0000FF">tojson</span> <span style="color: #666666">|</span> <span style="color: #0000FF">safe</span> <span style="color: #BC7A00">}}</span>
    &lt;/<span style="color: #008000; font-weight: bold">script</span>&gt;

    &lt;<span style="color: #008000; font-weight: bold">script</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;text/javascript&quot;</span> <span style="color: #7D9029">src</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;static&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">filename</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;scripts/questions.js&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">script</span>&gt;
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/templates/questions/mat_questions.html</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">extends</span> <span style="color: #BA2121">&quot;layout.html&quot;</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">title</span> <span style="color: #BC7A00">%}</span> Complex Numbers <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">head</span> <span style="color: #BC7A00">%}</span>
<span style="color: #BC7A00">{{</span> <span style="color: #008000">super</span><span style="color: #666666">()</span> <span style="color: #BC7A00">}}</span>
&lt;<span style="color: #008000; font-weight: bold">script</span> <span style="color: #7D9029">src</span><span style="color: #666666">=</span><span style="color: #BA2121">https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=AM_HTMLorMML-full.js</span>&gt;
&lt;/<span style="color: #008000; font-weight: bold">script</span>&gt;

&lt;<span style="color: #008000; font-weight: bold">link</span> <span style="color: #7D9029">rel</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;stylesheet&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;static&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">filename</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;styles/questions.css&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">main</span> <span style="color: #BC7A00">%}</span>
  &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;main&quot;</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">form</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;questions&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-inline&quot;</span>&gt;
      <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">n</span><span style="color: #666666">,</span><span style="color: #19177C">q</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">questions</span> <span style="color: #BC7A00">%}</span>
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;out_question&quot;</span>&gt;
          <span style="color: #408080; font-style: italic">&lt;!--question--&gt;</span>
          &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;question&quot;</span>&gt;
            <span style="color: #BC7A00">{{</span> <span style="color: #19177C">q.get_q</span><span style="color: #666666">()</span><span style="color: #19177C">.replace</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;[&#39;</span><span style="color: #666666">,</span><span style="color: #BA2121">&#39;(&#39;</span><span style="color: #666666">)</span><span style="color: #19177C">.replace</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;]&#39;</span><span style="color: #666666">,</span><span style="color: #BA2121">&#39;)&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
          &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
          <span style="color: #408080; font-style: italic">&lt;!--answer--&gt;</span>
          &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;answer&quot;</span>&gt;
            <span style="color: #408080; font-style: italic">{# Display correct type of inputs for the answer type #}</span>
            <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">mat_ans</span> <span style="color: #BC7A00">%}</span>
              <span style="color: #408080; font-style: italic">{# Use answer dimensions to make correct size matrix of inputs #}</span>
              <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">a</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">range</span><span style="color: #666666">(</span><span style="color: #19177C">q.get_ans_dim</span><span style="color: #666666">()[0])</span> <span style="color: #BC7A00">%}</span>
                <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">b</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">range</span><span style="color: #666666">(</span><span style="color: #19177C">q.get_ans_dim</span><span style="color: #666666">()[1])</span> <span style="color: #BC7A00">%}</span>
                  &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">name</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">n</span><span style="color: #666666">|</span><span style="color: #0000FF">string</span><span style="color: #666666">+</span><span style="color: #19177C">a</span><span style="color: #666666">|</span><span style="color: #0000FF">string</span><span style="color: #666666">+</span><span style="color: #19177C">b</span><span style="color: #666666">|</span><span style="color: #0000FF">string</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;text&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control input&quot;</span> <span style="color: #7D9029">size</span><span style="color: #666666">=</span><span style="color: #BA2121">3</span>&gt;
                <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
                &lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
              <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
            <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">else</span> <span style="color: #BC7A00">%}</span>
              &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">name</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">n</span><span style="color: #666666">|</span><span style="color: #0000FF">string</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;text&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control input&quot;</span> <span style="color: #7D9029">size</span><span style="color: #666666">=</span><span style="color: #BA2121">3</span>&gt;
            <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endif</span> <span style="color: #BC7A00">%}</span>
          &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
      <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
      <span style="color: #408080; font-style: italic">&lt;!--Submit button--&gt;</span>
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;row&quot;</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-lg-12&quot;</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;submit&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary btn-lg btn-block submit&quot;</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;button&quot;</span> <span style="color: #7D9029">value</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Submit Answers&quot;</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">br</span>&gt;
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">form</span>&gt;
  &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">endscripts</span> <span style="color: #BC7A00">%}</span>
    &lt;<span style="color: #008000; font-weight: bold">script</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">text/javascript</span>&gt;
        <span style="color: #408080; font-style: italic">// Variables used in javascript</span>
        $SCRIPT_ROOT <span style="color: #666666">=</span> <span style="color: #BC7A00">{{</span> <span style="color: #19177C">request.script_root</span> <span style="color: #666666">|</span> <span style="color: #0000FF">tojson</span> <span style="color: #666666">|</span> <span style="color: #0000FF">safe</span> <span style="color: #BC7A00">}}</span>;
        q_type <span style="color: #666666">=</span> <span style="color: #BC7A00">{{</span> <span style="color: #19177C">q_type</span> <span style="color: #666666">|</span> <span style="color: #0000FF">tojson</span> <span style="color: #666666">|</span> <span style="color: #0000FF">safe</span><span style="color: #BC7A00">}}</span>
        topic <span style="color: #666666">=</span> <span style="color: #BC7A00">{{</span> <span style="color: #19177C">topic</span> <span style="color: #666666">|</span> <span style="color: #0000FF">tojson</span> <span style="color: #666666">|</span> <span style="color: #0000FF">safe</span><span style="color: #BC7A00">}}</span>
    &lt;/<span style="color: #008000; font-weight: bold">script</span>&gt;

    &lt;<span style="color: #008000; font-weight: bold">script</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;text/javascript&quot;</span> <span style="color: #7D9029">src</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;static&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">filename</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;scripts/questions.js&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">script</span>&gt;
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/templates/questions/questions.html</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">extends</span> <span style="color: #BA2121">&quot;layout.html&quot;</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">title</span> <span style="color: #BC7A00">%}</span> Questions <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">head</span> <span style="color: #BC7A00">%}</span>
<span style="color: #BC7A00">{{</span> <span style="color: #008000">super</span><span style="color: #666666">()</span> <span style="color: #BC7A00">}}</span>
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">main</span> <span style="color: #BC7A00">%}</span>
  <span style="color: #408080; font-style: italic">&lt;!--List of links to questions--&gt;</span>
  &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-lg-6&quot;</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">b</span>&gt;Matrix Questions&lt;/<span style="color: #008000; font-weight: bold">b</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary btn-lg btn-block&quot;</span> <span style="color: #7D9029">href </span><span style="color: #666666">=</span> <span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;questions.show_questions&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">topic</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;matrix&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">q_type</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;add_sub&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Addition and Subtraction&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary btn-lg btn-block&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;questions.show_questions&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">topic</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;matrix&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">q_type</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;mult&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Multiplication&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary btn-lg btn-block&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;questions.show_questions&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">topic</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;matrix&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">q_type</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;det&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Determinant&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary btn-lg btn-block&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;questions.show_questions&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">topic</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;matrix&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">q_type</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;inv&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Inverse&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
  &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;

  &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-lg-6&quot;</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">b</span>&gt;Complex Number Questions&lt;/<span style="color: #008000; font-weight: bold">b</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary btn-lg btn-block&quot;</span> <span style="color: #7D9029">href </span><span style="color: #666666">=</span> <span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;questions.show_questions&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">topic</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;complex&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">q_type</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;add_sub&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Addition and Subtraction&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary btn-lg btn-block&quot;</span> <span style="color: #7D9029">href </span><span style="color: #666666">=</span> <span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;questions.show_questions&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">topic</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;complex&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">q_type</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;mult&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Multiplication&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary btn-lg btn-block&quot;</span> <span style="color: #7D9029">href </span><span style="color: #666666">=</span> <span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;questions.show_questions&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">topic</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;complex&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">q_type</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;div&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Division&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary btn-lg btn-block&quot;</span> <span style="color: #7D9029">href </span><span style="color: #666666">=</span> <span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;questions.show_questions&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">topic</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;complex&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">q_type</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;mod_arg&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Argument and Modulus&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
  &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/templates/user/login.html</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">extends</span> <span style="color: #BA2121">&quot;layout.html&quot;</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">title</span> <span style="color: #BC7A00">%}</span> Log In <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">head</span> <span style="color: #BC7A00">%}</span>
<span style="color: #BC7A00">{{</span> <span style="color: #008000">super</span><span style="color: #666666">()</span> <span style="color: #BC7A00">}}</span>
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">main</span> <span style="color: #BC7A00">%}</span>
    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;container&quot;</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;loginbox&quot;</span> <span style="color: #7D9029">style</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;margin-top:50px;&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;mainbox col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2&quot;</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;panel panel-info&quot;</span>&gt;
                &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;panel-heading&quot;</span>&gt;
                    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;panel-title&quot;</span>&gt;Sign In&lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                    <span style="color: #408080; font-style: italic">&lt;!--forgot password link--&gt;</span>
                    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">style</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;float:right; font-size: 80%; position: relative; top:-10px&quot;</span>&gt;&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;user.reset&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;Forgot password?&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">style</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;padding-top:30px&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;panel-body&quot;</span>&gt;

                    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">style</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;display:none&quot;</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;login-alert&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;alert alert-danger col-sm-12&quot;</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                    <span style="color: #408080; font-style: italic">&lt;!--login form --&gt;</span>
                    &lt;<span style="color: #008000; font-weight: bold">form</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;loginform&quot;</span> <span style="color: #7D9029">name</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;loginform&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-horizontal&quot;</span> <span style="color: #7D9029">role</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form&quot;</span> <span style="color: #7D9029">action</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;user.login&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span> <span style="color: #7D9029">method</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;post&quot;</span>&gt;
                        <span style="color: #BC7A00">{{</span> <span style="color: #19177C">loginform.hidden_tag</span><span style="color: #666666">()</span> <span style="color: #BC7A00">}}</span>
                        <span style="color: #408080; font-style: italic">&lt;!-- email field --&gt;</span>
                        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">style</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;margin-bottom: 25px&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;input-group&quot;</span>&gt;
                            &lt;<span style="color: #008000; font-weight: bold">span</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;input-group-addon&quot;</span>&gt;&lt;<span style="color: #008000; font-weight: bold">i</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;glyphicon glyphicon-user&quot;</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">i</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">span</span>&gt; <span style="color: #BC7A00">{{</span> <span style="color: #19177C">loginform.email</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span><span style="color: #666666">,</span><span style="color: #19177C">placeholder</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Username&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
                        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                        <span style="color: #408080; font-style: italic">&lt;!-- password field --&gt;</span>
                        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">style</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;margin-bottom: 25px&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;input-group&quot;</span>&gt;
                            &lt;<span style="color: #008000; font-weight: bold">span</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;input-group-addon&quot;</span>&gt;&lt;<span style="color: #008000; font-weight: bold">i</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;glyphicon glyphicon-lock&quot;</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">i</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">span</span>&gt; <span style="color: #BC7A00">{{</span> <span style="color: #19177C">loginform.password</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span><span style="color: #666666">,</span><span style="color: #19177C">placeholder</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Password&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
                        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                        <span style="color: #408080; font-style: italic">&lt;!-- remember me checkbox--&gt;</span>
                        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;input-group&quot;</span>&gt;
                            &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;checkbox&quot;</span>&gt;
                                &lt;<span style="color: #008000; font-weight: bold">label</span>&gt;
                                        <span style="color: #BC7A00">{{</span> <span style="color: #19177C">loginform.remember</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
                                        Remember Me
                                    &lt;/<span style="color: #008000; font-weight: bold">label</span>&gt;
                            &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">style</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;margin-top:10px&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
                            <span style="color: #408080; font-style: italic">&lt;!-- Submit button --&gt;</span>
                            &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-sm-12 controls&quot;</span>&gt;
                                &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;submit&quot;</span> <span style="color: #7D9029">value</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Login&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-success&quot;</span>&gt;
                            &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                        <span style="color: #408080; font-style: italic">&lt;!-- link to register form page --&gt;</span>
                        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
                            &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-md-12 control&quot;</span>&gt;
                                &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">style</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;border-top: 1px solid#888; padding-top:15px; font-size:85%&quot;</span>&gt;
                                    Don&#39;t have an account?
                                    &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;user.register&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;
                                        Sign Up Here
                                    &lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
                                &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                            &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                    &lt;/<span style="color: #008000; font-weight: bold">form</span>&gt;
                    <span style="color: #408080; font-style: italic">&lt;!-- end form --&gt;</span>
                    <span style="color: #408080; font-style: italic">{# display form validation errors in list under form #}</span>
                    <span style="color: #408080; font-style: italic">{# e.g. password not entered #}</span>
                    <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">loginform.errors</span> <span style="color: #BC7A00">%}</span>
                    &lt;<span style="color: #008000; font-weight: bold">ul</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;errors&quot;</span>&gt;
                        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">field_name</span><span style="color: #666666">,</span> <span style="color: #19177C">field_errors</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">loginform.errors</span><span style="color: #666666">|</span><span style="color: #0000FF">dictsort</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">field_errors</span> <span style="color: #BC7A00">%}</span>
                            <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">error</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">field_errors</span> <span style="color: #BC7A00">%}</span>
                                &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">loginform</span><span style="color: #666666">[</span><span style="color: #19177C">field_name</span><span style="color: #666666">]</span><span style="color: #19177C">.label</span> <span style="color: #BC7A00">}}</span>: <span style="color: #BC7A00">{{</span> <span style="color: #19177C">error</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
                            <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
                        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
                    &lt;/<span style="color: #008000; font-weight: bold">ul</span>&gt;
                    <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endif</span> <span style="color: #BC7A00">%}</span>
                    <span style="color: #408080; font-style: italic">{# display other messages (success/failure) #}</span>
                    <span style="color: #408080; font-style: italic">{# e.g. incorrect credentials #}</span>
                    <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">with</span> <span style="color: #19177C">messages</span> <span style="color: #666666">=</span> <span style="color: #19177C">get_flashed_messages</span><span style="color: #666666">()</span> <span style="color: #BC7A00">%}</span>
                        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">messages</span> <span style="color: #BC7A00">%}</span>
                            &lt;<span style="color: #008000; font-weight: bold">ul</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">flashes</span>&gt;
                                <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">message</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">messages</span> <span style="color: #BC7A00">%}</span>
                                    &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">message</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
                                <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
                            &lt;/<span style="color: #008000; font-weight: bold">ul</span>&gt;
                        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endif</span> <span style="color: #BC7A00">%}</span>
                    <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endwith</span> <span style="color: #BC7A00">%}</span>

                &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
            &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/templates/user/reset.html</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">extends</span> <span style="color: #BA2121">&quot;layout.html&quot;</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">title</span> <span style="color: #BC7A00">%}</span>Forgot Password<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>


<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">head</span> <span style="color: #BC7A00">%}</span>
<span style="color: #BC7A00">{{</span> <span style="color: #008000">super</span><span style="color: #666666">()</span> <span style="color: #BC7A00">}}</span>
&lt;<span style="color: #008000; font-weight: bold">link</span> <span style="color: #7D9029">rel</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;stylesheet&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css&quot;</span>&gt;
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>


<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">main</span> <span style="color: #BC7A00">%}</span>
&lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-gap&quot;</span> <span style="color: #7D9029">style</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;padding-top:70px&quot;</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
&lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;container&quot;</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;row&quot;</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-md-4 col-md-offset-4&quot;</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;panel panel-default&quot;</span>&gt;
                &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;panel-body&quot;</span>&gt;
                    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;text-center&quot;</span>&gt;
                        &lt;<span style="color: #008000; font-weight: bold">h3</span>&gt;&lt;<span style="color: #008000; font-weight: bold">i</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;fa fa-lock fa-4x&quot;</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">i</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">h3</span>&gt;
                        &lt;<span style="color: #008000; font-weight: bold">h2</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;text-center&quot;</span>&gt;Forgot Password?&lt;/<span style="color: #008000; font-weight: bold">h2</span>&gt;
                        &lt;<span style="color: #008000; font-weight: bold">p</span>&gt;Enter your email address&lt;/<span style="color: #008000; font-weight: bold">p</span>&gt;
                        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;panel-body&quot;</span>&gt;
                            <span style="color: #408080; font-style: italic">&lt;!-- form --&gt;</span>
                            &lt;<span style="color: #008000; font-weight: bold">form</span> <span style="color: #7D9029">action</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;user.reset&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form&quot;</span> <span style="color: #7D9029">method</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;POST&quot;</span>&gt;
                                <span style="color: #BC7A00">{{</span> <span style="color: #19177C">form.hidden_tag</span><span style="color: #666666">()</span> <span style="color: #BC7A00">}}</span>
                                <span style="color: #408080; font-style: italic">&lt;!--Email field--&gt;</span>
                                &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
                                    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;input-group&quot;</span>&gt;
                                        &lt;<span style="color: #008000; font-weight: bold">span</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;input-group-addon&quot;</span>&gt;&lt;<span style="color: #008000; font-weight: bold">i</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;glyphicon glyphicon-envelope color-blue&quot;</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">i</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">span</span>&gt;
                                        <span style="color: #BC7A00">{{</span> <span style="color: #19177C">form.email</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span><span style="color: #666666">,</span><span style="color: #19177C">placeholder</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;email address&quot;</span><span style="color: #666666">,</span><span style="color: #19177C">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;email&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
                                    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                                &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                                <span style="color: #408080; font-style: italic">&lt;!-- Submit button --&gt;</span>
                                &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
                                    &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">name</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;recover-submit&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-lg btn-primary btn-block&quot;</span> <span style="color: #7D9029">value</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Reset Password&quot;</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;submit&quot;</span>&gt;
                                &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                            &lt;/<span style="color: #008000; font-weight: bold">form</span>&gt;
                            <span style="color: #408080; font-style: italic">&lt;!-- form --&gt;</span>
                        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                    <span style="color: #408080; font-style: italic">{# Show flashed messages (for form validation errors) #}</span>
                    <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">with</span> <span style="color: #19177C">messages</span> <span style="color: #666666">=</span> <span style="color: #19177C">get_flashed_messages</span><span style="color: #666666">()</span> <span style="color: #BC7A00">%}</span>
                        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">messages</span> <span style="color: #BC7A00">%}</span>
                            &lt;<span style="color: #008000; font-weight: bold">ul</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">flashes</span>&gt;
                                <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">message</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">messages</span> <span style="color: #BC7A00">%}</span>
                                    &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">message</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
                                <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
                            &lt;/<span style="color: #008000; font-weight: bold">ul</span>&gt;
                        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endif</span> <span style="color: #BC7A00">%}</span>
                    <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endwith</span> <span style="color: #BC7A00">%}</span>
                &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
            &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
&lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/templates/user/reset_with_token.html</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">extends</span> <span style="color: #BA2121">&quot;layout.html&quot;</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">title</span> <span style="color: #BC7A00">%}</span>Reset Password<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">head</span> <span style="color: #BC7A00">%}</span>
  <span style="color: #BC7A00">{{</span> <span style="color: #008000">super</span><span style="color: #666666">()</span> <span style="color: #BC7A00">}}</span>
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">main</span> <span style="color: #BC7A00">%}</span>
&lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;container&quot;</span>&gt;
&lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;resetbox&quot;</span> <span style="color: #7D9029">style</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;margin-top:50px&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;mainbox col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2&quot;</span>&gt;
  <span style="color: #408080; font-style: italic">&lt;!-- whole form is within a panel --&gt;</span>
    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;panel panel-info&quot;</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;panel-heading&quot;</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;panel-title&quot;</span>&gt;Change Password&lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;panel-body&quot;</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">form</span> <span style="color: #7D9029">action</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;user.reset_with_token&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">token</span><span style="color: #666666">=</span><span style="color: #19177C">token</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span> <span style="color: #7D9029">method</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;POST&quot;</span>&gt;
                <span style="color: #408080; font-style: italic">&lt;!-- password field --&gt;</span>
                &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
                    &lt;<span style="color: #008000; font-weight: bold">label</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-md-3 control-label&quot;</span>&gt;Password&lt;/<span style="color: #008000; font-weight: bold">label</span>&gt;
                    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-md-9&quot;</span>&gt;
                        <span style="color: #BC7A00">{{</span> <span style="color: #19177C">form.password</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
                    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                <span style="color: #408080; font-style: italic">&lt;!-- confirm password field --&gt;</span>
                &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
                    &lt;<span style="color: #008000; font-weight: bold">label</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-md-3 control-label&quot;</span>&gt;Confirm Password&lt;/<span style="color: #008000; font-weight: bold">label</span>&gt;
                    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-md-9&quot;</span>&gt;
                        <span style="color: #BC7A00">{{</span> <span style="color: #19177C">form.confirm_password</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
                    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
                <span style="color: #408080; font-style: italic">&lt;!-- Submit button --&gt;</span>
              &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-md-offset-3 col-md-9&quot;</span>&gt;
                    &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;submit&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-info btn-block&quot;</span> <span style="color: #7D9029">value</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Change Password&quot;</span>&gt;
            &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
          &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">form</span>&gt;
      <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">form.errors</span> <span style="color: #BC7A00">%}</span>
      &lt;<span style="color: #008000; font-weight: bold">ul</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;errors&quot;</span>&gt;
          <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">field_name</span><span style="color: #666666">,</span> <span style="color: #19177C">field_errors</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">form.errors</span><span style="color: #666666">|</span><span style="color: #0000FF">dictsort</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">field_errors</span> <span style="color: #BC7A00">%}</span>
              <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">error</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">field_errors</span> <span style="color: #BC7A00">%}</span>
                  &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">form</span><span style="color: #666666">[</span><span style="color: #19177C">field_name</span><span style="color: #666666">]</span><span style="color: #19177C">.label</span> <span style="color: #BC7A00">}}</span>: <span style="color: #BC7A00">{{</span> <span style="color: #19177C">error</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
              <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
          <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
      &lt;/<span style="color: #008000; font-weight: bold">ul</span>&gt;
      <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endif</span> <span style="color: #BC7A00">%}</span>

    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
  &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
&lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/templates/user/signup.html</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">extends</span> <span style="color: #BA2121">&quot;layout.html&quot;</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">title</span> <span style="color: #BC7A00">%}</span> Sign Up <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">head</span> <span style="color: #BC7A00">%}</span>
<span style="color: #BC7A00">{{</span> <span style="color: #008000">super</span><span style="color: #666666">()</span> <span style="color: #BC7A00">}}</span>
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>


<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">main</span> <span style="color: #BC7A00">%}</span>
    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;container&quot;</span>&gt;

        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;signupbox&quot;</span> <span style="color: #7D9029">style</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;margin-top:50px&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;mainbox col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2&quot;</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;panel panel-info&quot;</span>&gt;
                &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;panel-heading&quot;</span>&gt;
                    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;panel-title&quot;</span>&gt;Sign Up&lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;panel-body&quot;</span>&gt;
                    &lt;<span style="color: #008000; font-weight: bold">form</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;signupform&quot;</span> <span style="color: #7D9029">name</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;regform&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-horizontal&quot;</span> <span style="color: #7D9029">role</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form&quot;</span> <span style="color: #7D9029">action</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;user.register&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span> <span style="color: #7D9029">method</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;post&quot;</span>&gt;
                        <span style="color: #BC7A00">{{</span> <span style="color: #19177C">regform.hidden_tag</span><span style="color: #666666">()</span> <span style="color: #BC7A00">}}</span>
                        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;signupalert&quot;</span> <span style="color: #7D9029">style</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;display:none&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;alert alert-danger&quot;</span>&gt;
                            &lt;<span style="color: #008000; font-weight: bold">p</span>&gt;Error:&lt;/<span style="color: #008000; font-weight: bold">p</span>&gt;
                            &lt;<span style="color: #008000; font-weight: bold">span</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">span</span>&gt;
                        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                        <span style="color: #408080; font-style: italic">&lt;!-- email field--&gt;</span>
                        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
                            &lt;<span style="color: #008000; font-weight: bold">label</span> <span style="color: #7D9029">for</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;email&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-md-3 control-label&quot;</span>&gt;Email&lt;/<span style="color: #008000; font-weight: bold">label</span>&gt;
                            &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-md-9&quot;</span>&gt;
                                <span style="color: #BC7A00">{{</span> <span style="color: #19177C">regform.email</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span><span style="color: #666666">,</span><span style="color: #19177C">placeholder</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Email&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
                            &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                        <span style="color: #408080; font-style: italic">&lt;!--first name field--&gt;</span>
                        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
                            &lt;<span style="color: #008000; font-weight: bold">label</span> <span style="color: #7D9029">for</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;firstname&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-md-3 control-label&quot;</span>&gt;First Name&lt;/<span style="color: #008000; font-weight: bold">label</span>&gt;
                            &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-md-9&quot;</span>&gt;
                                <span style="color: #BC7A00">{{</span> <span style="color: #19177C">regform.fname</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span><span style="color: #666666">,</span><span style="color: #19177C">placeholder</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;First Name&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
                            &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                        <span style="color: #408080; font-style: italic">&lt;!--last name field--&gt;</span>
                        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
                            &lt;<span style="color: #008000; font-weight: bold">label</span> <span style="color: #7D9029">for</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;lastname&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-md-3 control-label&quot;</span>&gt;Last Name&lt;/<span style="color: #008000; font-weight: bold">label</span>&gt;
                            &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-md-9&quot;</span>&gt;
                                <span style="color: #BC7A00">{{</span> <span style="color: #19177C">regform.lname</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span><span style="color: #666666">,</span><span style="color: #19177C">placeholder</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Last Name&quot;</span><span style="color: #666666">,</span><span style="color: #19177C">placeholder</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Last Name&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
                            &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                        <span style="color: #408080; font-style: italic">&lt;!--password field--&gt;</span>
                        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
                            &lt;<span style="color: #008000; font-weight: bold">label</span> <span style="color: #7D9029">for</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;password&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-md-3 control-label&quot;</span>&gt;Password&lt;/<span style="color: #008000; font-weight: bold">label</span>&gt;
                            &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-md-9&quot;</span>&gt;
                                <span style="color: #BC7A00">{{</span> <span style="color: #19177C">regform.password</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span><span style="color: #666666">,</span><span style="color: #19177C">placeholder</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Password&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
                            &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                        <span style="color: #408080; font-style: italic">&lt;!--confirm password field--&gt;</span>
                        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
                            &lt;<span style="color: #008000; font-weight: bold">label</span> <span style="color: #7D9029">for</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;password&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-md-3 control-label&quot;</span>&gt;Confirm Password&lt;/<span style="color: #008000; font-weight: bold">label</span>&gt;
                            &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-md-9&quot;</span>&gt;
                                <span style="color: #BC7A00">{{</span> <span style="color: #19177C">regform.confirm_password</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span><span style="color: #666666">,</span><span style="color: #19177C">placeholder</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Confirm Password&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
                            &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
                            <span style="color: #408080; font-style: italic">&lt;!-- Submit button --&gt;</span>
                            &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-md-offset-3 col-md-9&quot;</span>&gt;
                                &lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;submit&quot;</span> <span style="color: #7D9029">value</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Sign Up&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-info&quot;</span>&gt;
                            &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                        <span style="color: #408080; font-style: italic">&lt;!--Link to login page--&gt;</span>
                        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
                            &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-md-12 control&quot;</span>&gt;
                                &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">style</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;border-top: 1px solid#888; padding-top:15px; font-size:85%&quot;</span>&gt;
                                    Have an account?
                                    &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;user.login&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;
                                    Sign In Here
                                &lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
                                &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                            &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
                    &lt;/<span style="color: #008000; font-weight: bold">form</span>&gt;
                    <span style="color: #408080; font-style: italic">{# Simple form validation errors get passed to this #}</span>
                    <span style="color: #408080; font-style: italic">{# e.g. first name not entered #}</span>
                    <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">regform.errors</span> <span style="color: #BC7A00">%}</span>
                    &lt;<span style="color: #008000; font-weight: bold">ul</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;errors&quot;</span>&gt;
                        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">field_name</span><span style="color: #666666">,</span> <span style="color: #19177C">field_errors</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">regform.errors</span><span style="color: #666666">|</span><span style="color: #0000FF">dictsort</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">field_errors</span> <span style="color: #BC7A00">%}</span> <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">error</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">field_errors</span> <span style="color: #BC7A00">%}</span>
                        &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">regform</span><span style="color: #666666">[</span><span style="color: #19177C">field_name</span><span style="color: #666666">]</span><span style="color: #19177C">.label</span> <span style="color: #BC7A00">}}</span>: <span style="color: #BC7A00">{{</span> <span style="color: #19177C">error</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
                        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span> <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
                    &lt;/<span style="color: #008000; font-weight: bold">ul</span>&gt;
                    <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endif</span> <span style="color: #BC7A00">%}</span>
                    <span style="color: #408080; font-style: italic">{# Flashed messages for other form validation errors #}</span>
                    <span style="color: #408080; font-style: italic">{# e.g. user already exists #}</span>
                    <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">with</span> <span style="color: #19177C">messages</span> <span style="color: #666666">=</span> <span style="color: #19177C">get_flashed_messages</span><span style="color: #666666">()</span> <span style="color: #BC7A00">%}</span>
                        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">messages</span> <span style="color: #BC7A00">%}</span>
                            &lt;<span style="color: #008000; font-weight: bold">ul</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">flashes</span>&gt;
                                <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">message</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">messages</span> <span style="color: #BC7A00">%}</span>
                                    &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">message</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
                                <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
                            &lt;/<span style="color: #008000; font-weight: bold">ul</span>&gt;
                        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endif</span> <span style="color: #BC7A00">%}</span>
                    <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endwith</span> <span style="color: #BC7A00">%}</span>
                &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
            &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/templates/user/student_account.html</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">extends</span> <span style="color: #BA2121">&quot;layout.html&quot;</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">title</span> <span style="color: #BC7A00">%}</span> Account <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">head</span> <span style="color: #BC7A00">%}</span>
<span style="color: #BC7A00">{{</span> <span style="color: #008000">super</span><span style="color: #666666">()</span> <span style="color: #BC7A00">}}</span>

&lt;<span style="color: #008000; font-weight: bold">script</span> <span style="color: #7D9029">src</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;static&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">filename</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;image-picker/image-picker.min.js&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">script</span>&gt;

&lt;<span style="color: #008000; font-weight: bold">link</span> <span style="color: #7D9029">rel</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;stylesheet&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;static&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">filename</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;styles/account.css&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;

&lt;<span style="color: #008000; font-weight: bold">link</span> <span style="color: #7D9029">rel</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;stylesheet&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;static&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">filename</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;image-picker/image-picker.css&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">main</span> <span style="color: #BC7A00">%}</span>
&lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;title&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;row&quot;</span>&gt;
  &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-sm-12&quot;</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;alert alert-info title&quot;</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">strong</span>&gt;Your Account&lt;/<span style="color: #008000; font-weight: bold">strong</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
  &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
&lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
&lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">data-spy</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;scroll&quot;</span> <span style="color: #7D9029">data-target</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;.scrollspy&quot;</span> <span style="color: #7D9029">style</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;position:relative&quot;</span>&gt;
&lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-md-3 scrollspy&quot;</span>&gt;
  &lt;<span style="color: #008000; font-weight: bold">ul</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;nav&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;nav hidden-xs hidden-sm affix-top&quot;</span> <span style="color: #7D9029">data-spy</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;affix&quot;</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;#links&quot;</span>&gt;Links&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;#set&quot;</span>&gt;Set Tasks&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;#graphs&quot;</span>&gt;Graphs&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;#scores&quot;</span>&gt;Scores&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;#settings&quot;</span>&gt;Settings&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">ul</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;nav&quot;</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;#change-details&quot;</span>&gt;Details&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
        &lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;#pwd&quot;</span>&gt;Password&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
        &lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">ul</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
  &lt;/<span style="color: #008000; font-weight: bold">ul</span>&gt;
&lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;

&lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-md-9&quot;</span>&gt;
  <span style="color: #408080; font-style: italic">{# Show flashed messages #}</span>
  <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">with</span> <span style="color: #19177C">messages</span> <span style="color: #666666">=</span> <span style="color: #19177C">get_flashed_messages</span><span style="color: #666666">()</span> <span style="color: #BC7A00">%}</span>
    <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">messages</span> <span style="color: #BC7A00">%}</span>
      <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">message</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">messages</span> <span style="color: #BC7A00">%}</span>
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;alert alert-info alert-dismissable fade in&quot;</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;#&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;close&quot;</span> <span style="color: #7D9029">data-dismiss</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;alert&quot;</span> <span style="color: #7D9029">aria-label</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;close&quot;</span>&gt;<span style="color: #999999; font-weight: bold">&amp;times;</span>&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
        <span style="color: #BC7A00">{{</span> <span style="color: #19177C">message</span> <span style="color: #BC7A00">}}</span>
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
    <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endif</span> <span style="color: #BC7A00">%}</span>
  <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endwith</span> <span style="color: #BC7A00">%}</span>
  <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">changeform.errors</span> <span style="color: #BC7A00">%}</span>
  &lt;<span style="color: #008000; font-weight: bold">ul</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;errors&quot;</span>&gt;
      <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">field_name</span><span style="color: #666666">,</span> <span style="color: #19177C">field_errors</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">changeform.errors</span><span style="color: #666666">|</span><span style="color: #0000FF">dictsort</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">field_errors</span> <span style="color: #BC7A00">%}</span>
          <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">error</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">field_errors</span> <span style="color: #BC7A00">%}</span>
              &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">changeform</span><span style="color: #666666">[</span><span style="color: #19177C">field_name</span><span style="color: #666666">]</span><span style="color: #19177C">.label</span> <span style="color: #BC7A00">}}</span>: <span style="color: #BC7A00">{{</span> <span style="color: #19177C">error</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
          <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
      <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
  &lt;/<span style="color: #008000; font-weight: bold">ul</span>&gt;
  <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endif</span> <span style="color: #BC7A00">%}</span>

  <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">pwform.errors</span> <span style="color: #BC7A00">%}</span>
  &lt;<span style="color: #008000; font-weight: bold">ul</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;errors&quot;</span>&gt;
      <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">field_name</span><span style="color: #666666">,</span> <span style="color: #19177C">field_errors</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">pwform.errors</span><span style="color: #666666">|</span><span style="color: #0000FF">dictsort</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">field_errors</span> <span style="color: #BC7A00">%}</span>
          <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">error</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">field_errors</span> <span style="color: #BC7A00">%}</span>
              &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">pwform</span><span style="color: #666666">[</span><span style="color: #19177C">field_name</span><span style="color: #666666">]</span><span style="color: #19177C">.label</span> <span style="color: #BC7A00">}}</span>: <span style="color: #BC7A00">{{</span> <span style="color: #19177C">error</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
          <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
      <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
  &lt;/<span style="color: #008000; font-weight: bold">ul</span>&gt;
  <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endif</span> <span style="color: #BC7A00">%}</span>


  &lt;<span style="color: #008000; font-weight: bold">section</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;links&quot;</span>&gt;
  <span style="color: #408080; font-style: italic">&lt;!-- Form for students to link to teachers --&gt;</span>
    &lt;<span style="color: #008000; font-weight: bold">h1</span>&gt;Links&lt;/<span style="color: #008000; font-weight: bold">h1</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">h2</span>&gt;Add Teacher&lt;/<span style="color: #008000; font-weight: bold">h2</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">form</span> <span style="color: #7D9029">method</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;post&quot;</span> <span style="color: #7D9029">action</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;user.account&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;
    <span style="color: #BC7A00">{{</span> <span style="color: #19177C">linkform.hidden_tag</span><span style="color: #666666">()</span> <span style="color: #BC7A00">}}</span>
    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
      <span style="color: #BC7A00">{{</span> <span style="color: #19177C">linkform.link_code</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control form-control-lg&quot;</span><span style="color: #666666">,</span><span style="color: #19177C">placeholder</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Enter Code...&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
      <span style="color: #BC7A00">{{</span> <span style="color: #19177C">linkform.link_submit</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">form</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">h2</span>&gt;Existing Links:&lt;/<span style="color: #008000; font-weight: bold">h2</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">table</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;links-table&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;table&quot;</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">thead</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">th</span>&gt;Fname&lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">th</span>&gt;Lname&lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">th</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">thead</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">tbody</span>&gt;
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">t</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">student.teachers.all</span><span style="color: #666666">()</span> <span style="color: #BC7A00">%}</span>
        &lt;<span style="color: #008000; font-weight: bold">tr</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;link-row</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">t.teacher_id</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">td</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">t.fname</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">td</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">td</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">t.lname</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">td</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">td</span>&gt;&lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;button&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-danger&quot;</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">t.teacher_id</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span> <span style="color: #7D9029">value</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Delete&quot;</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">td</span>&gt;
        &lt;/<span style="color: #008000; font-weight: bold">tr</span>&gt;
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
      &lt;/<span style="color: #008000; font-weight: bold">tbody</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">table</span>&gt;
  &lt;/<span style="color: #008000; font-weight: bold">section</span>&gt;

  &lt;<span style="color: #008000; font-weight: bold">section</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;set&quot;</span>&gt;
  <span style="color: #408080; font-style: italic">&lt;!-- Display tasks which are set--&gt;</span>
    &lt;<span style="color: #008000; font-weight: bold">h1</span>&gt;Set Tasks&lt;/<span style="color: #008000; font-weight: bold">h1</span>&gt;
    <span style="color: #408080; font-style: italic">{# Show tasks table if there any set tasks #}</span>
    <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">student.tasks.first</span><span style="color: #666666">()</span> <span style="color: #BC7A00">%}</span>
    &lt;<span style="color: #008000; font-weight: bold">table</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;table&quot;</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">thead</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">th</span>&gt;Topic&lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">th</span>&gt;Task Name&lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">th</span>&gt;Completed&lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">th</span>&gt;Mark&lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">th</span>&gt;Percent&lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">th</span>&gt;Date Completed&lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">th</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">thead</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">tbody</span>&gt;
      <span style="color: #408080; font-style: italic">{# Loop though all tasks and render information in table #}</span>
      <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">t</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">student.tasks.all</span><span style="color: #666666">()</span> <span style="color: #BC7A00">%}</span>
        &lt;<span style="color: #008000; font-weight: bold">tr</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">td</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">qs</span><span style="color: #666666">[</span><span style="color: #19177C">t.question_id</span><span style="color: #666666">][</span><span style="color: #BA2121">&#39;topic&#39;</span><span style="color: #666666">]</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">td</span>&gt;
          <span style="color: #408080; font-style: italic">&lt;!-- Link to relevant questions --&gt;</span>
          &lt;<span style="color: #008000; font-weight: bold">td</span>&gt;&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;questions.show_questions&#39;</span><span style="color: #666666">,</span>  <span style="color: #19177C">topic</span><span style="color: #666666">=</span><span style="color: #19177C">qs</span><span style="color: #666666">[</span><span style="color: #19177C">t.question_id</span><span style="color: #666666">][</span><span style="color: #BA2121">&#39;topic&#39;</span><span style="color: #666666">]</span><span style="color: #19177C">.lower</span><span style="color: #666666">(),</span> <span style="color: #19177C">q_type</span><span style="color: #666666">=</span><span style="color: #19177C">qs</span><span style="color: #666666">[</span><span style="color: #19177C">t.question_id</span><span style="color: #666666">][</span><span style="color: #BA2121">&#39;q_type&#39;</span><span style="color: #666666">])</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;
          <span style="color: #BC7A00">{{</span> <span style="color: #19177C">qs</span><span style="color: #666666">[</span><span style="color: #19177C">t.question_id</span><span style="color: #666666">][</span><span style="color: #BA2121">&#39;name&#39;</span><span style="color: #666666">]</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">td</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">td</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">t.completed</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">td</span>&gt;

          <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">t.mark</span> <span style="color: #BC7A00">%}</span>
            &lt;<span style="color: #008000; font-weight: bold">td</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">t.mark.score</span> <span style="color: #BC7A00">}}</span>/<span style="color: #BC7A00">{{</span> <span style="color: #19177C">t.mark.out_of</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">td</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">td</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">t.mark.score</span><span style="color: #666666">/</span><span style="color: #19177C">t.mark.out_of</span><span style="color: #666666">*100</span> <span style="color: #BC7A00">}}</span>%&lt;/<span style="color: #008000; font-weight: bold">td</span>&gt;
            &lt;<span style="color: #008000; font-weight: bold">td</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">t.mark.date</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">td</span>&gt;
          <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endif</span> <span style="color: #BC7A00">%}</span>
        &lt;/<span style="color: #008000; font-weight: bold">tr</span>&gt;
      <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
      &lt;/<span style="color: #008000; font-weight: bold">tbody</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">table</span>&gt;
    <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endif</span> <span style="color: #BC7A00">%}</span>
  &lt;/<span style="color: #008000; font-weight: bold">section</span>&gt;

  &lt;<span style="color: #008000; font-weight: bold">section</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;graphs&quot;</span>&gt;
  <span style="color: #408080; font-style: italic">&lt;!-- Gallery shows saved graphs--&gt;</span>
  <span style="color: #408080; font-style: italic">&lt;!-- Each graph also link to the loci plotter page (form posts to that url with a graph id)--&gt;</span>
    &lt;<span style="color: #008000; font-weight: bold">h1</span>&gt;Graphs&lt;/<span style="color: #008000; font-weight: bold">h1</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">form</span> <span style="color: #7D9029">action</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;loci.loci&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span> <span style="color: #7D9029">method</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;get&quot;</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;graphform&quot;</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">select</span> <span style="color: #7D9029">size</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;5&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;image-picker show-html&quot;</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;graph-select&quot;</span> <span style="color: #7D9029">form</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;graphform&quot;</span> <span style="color: #7D9029">name</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;id&quot;</span>&gt;
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">g</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">student.graphs.all</span><span style="color: #666666">()</span> <span style="color: #BC7A00">%}</span>
          &lt;<span style="color: #008000; font-weight: bold">option</span> <span style="color: #7D9029">data-img-label</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">g.title</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&lt;br&gt;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">g.description</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&lt;br&gt;&lt;button class=&#39;btn btn-block&#39;&gt;Load&lt;/button&gt;&lt;br&gt;&lt;input type=&#39;button&#39; value=&#39;Delete&#39; id=&#39;del-graph</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">g.graph_id</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&#39; class=&#39;btn btn-block&#39;&gt;&quot;</span> <span style="color: #7D9029">data-img-src</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">g.image_url</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span> <span style="color: #7D9029">value</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">g.graph_id</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">option</span>&gt;
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
      &lt;/<span style="color: #008000; font-weight: bold">select</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">form</span>&gt;
  &lt;/<span style="color: #008000; font-weight: bold">section</span>&gt;


  &lt;<span style="color: #008000; font-weight: bold">section</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;scores&quot;</span>&gt;
  &lt;<span style="color: #008000; font-weight: bold">h1</span>&gt;Task Scores&lt;/<span style="color: #008000; font-weight: bold">h1</span>&gt;
  <span style="color: #408080; font-style: italic">&lt;!--Show scores on previous tasks and completed questions--&gt;</span>
    &lt;<span style="color: #008000; font-weight: bold">table</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;table&quot;</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">thead</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">th</span>&gt; Topic &lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">th</span>&gt; Score &lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">th</span>&gt; Percentage &lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">thead</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">tbody</span>&gt;
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">mark</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">student.marks.all</span><span style="color: #666666">()</span> <span style="color: #BC7A00">%}</span>
        &lt;<span style="color: #008000; font-weight: bold">tr</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">td</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">qs</span><span style="color: #666666">[</span><span style="color: #19177C">mark.question_id</span><span style="color: #666666">][</span><span style="color: #BA2121">&quot;topic&quot;</span><span style="color: #666666">]</span> <span style="color: #BC7A00">}}</span><span style="color: #999999; font-weight: bold">&amp;nbsp;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">qs</span><span style="color: #666666">[</span><span style="color: #19177C">mark.question_id</span><span style="color: #666666">][</span><span style="color: #BA2121">&quot;name&quot;</span><span style="color: #666666">]</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">td</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">td</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">mark.score</span> <span style="color: #BC7A00">}}</span>/<span style="color: #BC7A00">{{</span> <span style="color: #19177C">mark.out_of</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">td</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">td</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">mark.score</span><span style="color: #666666">/</span><span style="color: #19177C">mark.out_of</span><span style="color: #666666">*100</span> <span style="color: #BC7A00">}}</span>%&lt;/<span style="color: #008000; font-weight: bold">td</span>&gt;
        &lt;/<span style="color: #008000; font-weight: bold">tr</span>&gt;
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
      &lt;/<span style="color: #008000; font-weight: bold">tbody</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">table</span>&gt;
  &lt;/<span style="color: #008000; font-weight: bold">section</span>&gt;

  &lt;<span style="color: #008000; font-weight: bold">section</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;settings&quot;</span>&gt;
    <span style="color: #408080; font-style: italic">&lt;!--Forms for changing details--&gt;</span>
  &lt;<span style="color: #008000; font-weight: bold">h1</span>&gt;Settings&lt;/<span style="color: #008000; font-weight: bold">h1</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">h2</span>&gt;Change Details&lt;/<span style="color: #008000; font-weight: bold">h2</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;change-details&quot;</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">form</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;change-details&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-horizontal&quot;</span> <span style="color: #7D9029">method</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;post&quot;</span><span style="border: 1px solid #FF0000">,</span> <span style="color: #7D9029">action</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;user.account&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;
      <span style="color: #BC7A00">{{</span> <span style="color: #19177C">changeform.hidden_tag</span><span style="color: #666666">()</span> <span style="color: #BC7A00">}}</span>
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
        <span style="color: #BC7A00">{{</span> <span style="color: #19177C">changeform.fname.label</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-2 control-label&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-10&quot;</span>&gt;
          <span style="color: #BC7A00">{{</span> <span style="color: #19177C">changeform.fname</span><span style="color: #666666">(</span><span style="color: #19177C">value</span><span style="color: #666666">=</span><span style="color: #19177C">student.fname</span><span style="color: #666666">,</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
        <span style="color: #BC7A00">{{</span> <span style="color: #19177C">changeform.lname.label</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-2 control-label&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-10&quot;</span>&gt;
          <span style="color: #BC7A00">{{</span> <span style="color: #19177C">changeform.lname</span><span style="color: #666666">(</span><span style="color: #19177C">value</span><span style="color: #666666">=</span><span style="color: #19177C">student.lname</span><span style="color: #666666">,</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
        <span style="color: #BC7A00">{{</span> <span style="color: #19177C">changeform.email.label</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-2 control-label&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-10&quot;</span>&gt;
          <span style="color: #BC7A00">{{</span> <span style="color: #19177C">changeform.email</span><span style="color: #666666">(</span><span style="color: #19177C">value</span><span style="color: #666666">=</span><span style="color: #19177C">student.email</span><span style="color: #666666">,</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
        <span style="color: #BC7A00">{{</span> <span style="color: #19177C">changeform.password.label</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-2 control-label&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-10&quot;</span>&gt;
          <span style="color: #BC7A00">{{</span> <span style="color: #19177C">changeform.password</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-offset-2 col-xs-10&quot;</span>&gt;
          <span style="color: #BC7A00">{{</span> <span style="color: #19177C">changeform.change_submit</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">form</span>&gt;

    &lt;<span style="color: #008000; font-weight: bold">h2</span>&gt;Password change&lt;/<span style="color: #008000; font-weight: bold">h2</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">form</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;pwd&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-horizontal&quot;</span> <span style="color: #7D9029">method</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;post&quot;</span><span style="border: 1px solid #FF0000">,</span> <span style="color: #7D9029">action</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;user.account&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;
      <span style="color: #BC7A00">{{</span> <span style="color: #19177C">pwform.hidden_tag</span><span style="color: #666666">()</span> <span style="color: #BC7A00">}}</span>
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
        <span style="color: #BC7A00">{{</span> <span style="color: #19177C">pwform.old_password.label</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-2 control-label&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-10&quot;</span>&gt;
          <span style="color: #BC7A00">{{</span> <span style="color: #19177C">pwform.old_password</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
        <span style="color: #BC7A00">{{</span> <span style="color: #19177C">pwform.password.label</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-2 control-label&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-10&quot;</span>&gt;
          <span style="color: #BC7A00">{{</span> <span style="color: #19177C">pwform.password</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
        <span style="color: #BC7A00">{{</span> <span style="color: #19177C">pwform.confirm_password.label</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-2 control-label&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-10&quot;</span>&gt;
          <span style="color: #BC7A00">{{</span> <span style="color: #19177C">pwform.confirm_password</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-offset-2 col-xs-10&quot;</span>&gt;
          <span style="color: #BC7A00">{{</span> <span style="color: #19177C">pwform.pw_submit</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">form</span>&gt;
  &lt;/<span style="color: #008000; font-weight: bold">section</span>&gt;
&lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
&lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
&lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">endscripts</span> <span style="color: #BC7A00">%}</span>
&lt;<span style="color: #008000; font-weight: bold">script</span>&gt;
    $SCRIPT_ROOT <span style="color: #666666">=</span> <span style="color: #BC7A00">{{</span> <span style="color: #19177C">request.script_root</span> <span style="color: #666666">|</span> <span style="color: #0000FF">tojson</span> <span style="color: #666666">|</span> <span style="color: #0000FF">safe</span> <span style="color: #BC7A00">}}</span>;
&lt;/<span style="color: #008000; font-weight: bold">script</span>&gt;
&lt;<span style="color: #008000; font-weight: bold">script</span> <span style="color: #7D9029">src</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;static&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">filename</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;scripts/student_account.js&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">script</span>&gt;
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>
</pre></div>
<br><p style="font-size:14pt;font-family:sans-serif"><strong>./app/templates/user/teacher_account.html</strong></p><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">extends</span> <span style="color: #BA2121">&quot;layout.html&quot;</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">title</span> <span style="color: #BC7A00">%}</span> Account <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">head</span> <span style="color: #BC7A00">%}</span>
<span style="color: #BC7A00">{{</span> <span style="color: #008000">super</span><span style="color: #666666">()</span> <span style="color: #BC7A00">}}</span>

&lt;<span style="color: #008000; font-weight: bold">script</span> <span style="color: #7D9029">src</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;static&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">filename</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;image-picker/image-picker.min.js&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">script</span>&gt;

&lt;<span style="color: #008000; font-weight: bold">link</span> <span style="color: #7D9029">rel</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;stylesheet&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;static&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">filename</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;styles/account.css&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;

&lt;<span style="color: #008000; font-weight: bold">link</span> <span style="color: #7D9029">rel</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;stylesheet&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;static&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">filename</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;image-picker/image-picker.css&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;

&lt;<span style="color: #008000; font-weight: bold">link</span> <span style="color: #7D9029">rel</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;stylesheet&quot;</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;http://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css&quot;</span>&gt;
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">main</span> <span style="color: #BC7A00">%}</span>
&lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;title&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;row&quot;</span>&gt;
  &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-sm-12&quot;</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;alert alert-info title&quot;</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">strong</span>&gt;Your Account&lt;/<span style="color: #008000; font-weight: bold">strong</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
  &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
&lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
&lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">data-spy</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;scroll&quot;</span> <span style="color: #7D9029">data-target</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;.scrollspy&quot;</span> <span style="color: #7D9029">style</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;position:relative&quot;</span>&gt;
&lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-md-3 scrollspy&quot;</span>&gt;
  &lt;<span style="color: #008000; font-weight: bold">ul</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;nav&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;nav hidden-xs hidden-sm affix-top&quot;</span> <span style="color: #7D9029">data-spy</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;affix&quot;</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;#links&quot;</span>&gt;Links&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;#set&quot;</span>&gt;Set Tasks&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;#graphs&quot;</span>&gt;Graphs&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;&lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;#settings&quot;</span>&gt;Settings&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">ul</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;nav&quot;</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;#change-details&quot;</span>&gt;Details&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
        &lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;#pwd&quot;</span>&gt;Password&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
        &lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">ul</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
  &lt;/<span style="color: #008000; font-weight: bold">ul</span>&gt;
&lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
&lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-md-9&quot;</span>&gt;
    <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">with</span> <span style="color: #19177C">messages</span> <span style="color: #666666">=</span> <span style="color: #19177C">get_flashed_messages</span><span style="color: #666666">()</span> <span style="color: #BC7A00">%}</span>
      <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">messages</span> <span style="color: #BC7A00">%}</span>
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">message</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">messages</span> <span style="color: #BC7A00">%}</span>
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;alert alert-info alert-dismissable fade in&quot;</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">a</span> <span style="color: #7D9029">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;#&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;close&quot;</span> <span style="color: #7D9029">data-dismiss</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;alert&quot;</span> <span style="color: #7D9029">aria-label</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;close&quot;</span>&gt;<span style="color: #999999; font-weight: bold">&amp;times;</span>&lt;/<span style="color: #008000; font-weight: bold">a</span>&gt;
          <span style="color: #BC7A00">{{</span> <span style="color: #19177C">message</span> <span style="color: #BC7A00">}}</span>
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
      <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endif</span> <span style="color: #BC7A00">%}</span>
    <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endwith</span> <span style="color: #BC7A00">%}</span>

    <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">changeform.errors</span> <span style="color: #BC7A00">%}</span>
    &lt;<span style="color: #008000; font-weight: bold">ul</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;errors&quot;</span>&gt;
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">field_name</span><span style="color: #666666">,</span> <span style="color: #19177C">field_errors</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">changeform.errors</span><span style="color: #666666">|</span><span style="color: #0000FF">dictsort</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">field_errors</span> <span style="color: #BC7A00">%}</span>
            <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">error</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">field_errors</span> <span style="color: #BC7A00">%}</span>
                &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">changeform</span><span style="color: #666666">[</span><span style="color: #19177C">field_name</span><span style="color: #666666">]</span><span style="color: #19177C">.label</span> <span style="color: #BC7A00">}}</span>: <span style="color: #BC7A00">{{</span> <span style="color: #19177C">error</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
            <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
    &lt;/<span style="color: #008000; font-weight: bold">ul</span>&gt;
    <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endif</span> <span style="color: #BC7A00">%}</span>

    <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">pwform.errors</span> <span style="color: #BC7A00">%}</span>
    &lt;<span style="color: #008000; font-weight: bold">ul</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;errors&quot;</span>&gt;
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">field_name</span><span style="color: #666666">,</span> <span style="color: #19177C">field_errors</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">pwform.errors</span><span style="color: #666666">|</span><span style="color: #0000FF">dictsort</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">field_errors</span> <span style="color: #BC7A00">%}</span>
            <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">error</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">field_errors</span> <span style="color: #BC7A00">%}</span>
                &lt;<span style="color: #008000; font-weight: bold">li</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">pwform</span><span style="color: #666666">[</span><span style="color: #19177C">field_name</span><span style="color: #666666">]</span><span style="color: #19177C">.label</span> <span style="color: #BC7A00">}}</span>: <span style="color: #BC7A00">{{</span> <span style="color: #19177C">error</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
            <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
    &lt;/<span style="color: #008000; font-weight: bold">ul</span>&gt;
    <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endif</span> <span style="color: #BC7A00">%}</span>


  &lt;<span style="color: #008000; font-weight: bold">section</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;links&quot;</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">h1</span>&gt;Links&lt;/<span style="color: #008000; font-weight: bold">h1</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">p</span>&gt;&lt;<span style="color: #008000; font-weight: bold">strong</span>&gt;Your Code&lt;/<span style="color: #008000; font-weight: bold">strong</span>&gt;:<span style="color: #999999; font-weight: bold">&amp;nbsp;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">teacher.code</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">p</span>&gt;

    &lt;<span style="color: #008000; font-weight: bold">table</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;links-table&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;table&quot;</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">thead</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">th</span>&gt;Name&lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">th</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">thead</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">tbody</span>&gt;
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">s</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">teacher.students.all</span><span style="color: #666666">()</span> <span style="color: #BC7A00">%}</span>
        &lt;<span style="color: #008000; font-weight: bold">tr</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;link-row</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">s.student_id</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">td</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">s.fname</span> <span style="color: #BC7A00">}}</span><span style="color: #999999; font-weight: bold">&amp;nbsp;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">s.lname</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">td</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">td</span>&gt;&lt;<span style="color: #008000; font-weight: bold">input</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">s.student_id</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span> <span style="color: #7D9029">type</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;button&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-danger&quot;</span>
            <span style="color: #7D9029">value</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;Delete&quot;</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">td</span>&gt;
        &lt;/<span style="color: #008000; font-weight: bold">tr</span>&gt;
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
      &lt;/<span style="color: #008000; font-weight: bold">tbody</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">table</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">h2</span>&gt;Current Tasks&lt;/<span style="color: #008000; font-weight: bold">h2</span>&gt;
    <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">s</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">students</span> <span style="color: #BC7A00">%}</span>
      &lt;<span style="color: #008000; font-weight: bold">ul</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">li</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;task-row</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">s.student_id</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">s.fname</span> <span style="color: #BC7A00">}}</span><span style="color: #999999; font-weight: bold">&amp;nbsp;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">s.lname</span> <span style="color: #BC7A00">}}</span>
          <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">s.tasks.first</span><span style="color: #666666">()</span> <span style="color: #BC7A00">%}</span>
            &lt;<span style="color: #008000; font-weight: bold">table</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;table&quot;</span>&gt;
              &lt;<span style="color: #008000; font-weight: bold">thead</span>&gt;
                &lt;<span style="color: #008000; font-weight: bold">th</span>&gt;Topic&lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
                &lt;<span style="color: #008000; font-weight: bold">th</span>&gt;Task Name&lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
                &lt;<span style="color: #008000; font-weight: bold">th</span>&gt;Completed&lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
                &lt;<span style="color: #008000; font-weight: bold">th</span>&gt;Mark&lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
                &lt;<span style="color: #008000; font-weight: bold">th</span>&gt;Percent&lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
                &lt;<span style="color: #008000; font-weight: bold">th</span>&gt;Date Completed&lt;/<span style="color: #008000; font-weight: bold">th</span>&gt;
              &lt;/<span style="color: #008000; font-weight: bold">thead</span>&gt;
              &lt;<span style="color: #008000; font-weight: bold">tbody</span>&gt;
              <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">t</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">s.tasks.all</span><span style="color: #666666">()</span> <span style="color: #BC7A00">%}</span>
                &lt;<span style="color: #008000; font-weight: bold">tr</span>&gt;
                  &lt;<span style="color: #008000; font-weight: bold">td</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">qs</span><span style="color: #666666">[</span><span style="color: #19177C">t.question_id</span><span style="color: #666666">][</span><span style="color: #BA2121">&#39;topic&#39;</span><span style="color: #666666">]</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">td</span>&gt;
                  &lt;<span style="color: #008000; font-weight: bold">td</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">qs</span><span style="color: #666666">[</span><span style="color: #19177C">t.question_id</span><span style="color: #666666">][</span><span style="color: #BA2121">&#39;name&#39;</span><span style="color: #666666">]</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">td</span>&gt;
                  &lt;<span style="color: #008000; font-weight: bold">td</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">t.completed</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">td</span>&gt;
                  <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">t.mark</span> <span style="color: #BC7A00">%}</span>
                  &lt;<span style="color: #008000; font-weight: bold">td</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">t.mark.score</span> <span style="color: #BC7A00">}}</span>/<span style="color: #BC7A00">{{</span> <span style="color: #19177C">t.mark.out_of</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">td</span>&gt;
                  &lt;<span style="color: #008000; font-weight: bold">td</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">t.mark.score</span><span style="color: #666666">/</span><span style="color: #19177C">t.mark.out_of</span><span style="color: #666666">*100</span> <span style="color: #BC7A00">}}</span>%&lt;/<span style="color: #008000; font-weight: bold">td</span>&gt;
                  &lt;<span style="color: #008000; font-weight: bold">td</span>&gt;<span style="color: #BC7A00">{{</span> <span style="color: #19177C">t.mark.date</span> <span style="color: #BC7A00">}}</span>&lt;/<span style="color: #008000; font-weight: bold">td</span>&gt;
                  <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endif</span> <span style="color: #BC7A00">%}</span>
                &lt;/<span style="color: #008000; font-weight: bold">tr</span>&gt;
              <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
              &lt;/<span style="color: #008000; font-weight: bold">tbody</span>&gt;
            &lt;/<span style="color: #008000; font-weight: bold">table</span>&gt;
            <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endif</span> <span style="color: #BC7A00">%}</span>
          &lt;/<span style="color: #008000; font-weight: bold">li</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">ul</span>&gt;
    <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
  &lt;/<span style="color: #008000; font-weight: bold">section</span>&gt;

  &lt;<span style="color: #008000; font-weight: bold">section</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;set&quot;</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">h1</span>&gt;Set Tasks&lt;/<span style="color: #008000; font-weight: bold">h1</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">form</span> <span style="color: #7D9029">method</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;post&quot;</span><span style="border: 1px solid #FF0000">,</span> <span style="color: #7D9029">action</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;user.account&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-6&quot;</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">h3</span>&gt;Students&lt;/<span style="color: #008000; font-weight: bold">h3</span>&gt;
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">student</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">setform.student_select</span> <span style="color: #BC7A00">%}</span>
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-check&quot;</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">label</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-check-label&quot;</span>&gt;
              <span style="color: #BC7A00">{{</span> <span style="color: #19177C">student</span> <span style="color: #BC7A00">}}</span>
              <span style="color: #BC7A00">{{</span> <span style="color: #19177C">student.label</span> <span style="color: #BC7A00">}}</span>
          &lt;/<span style="color: #008000; font-weight: bold">label</span>&gt;
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>

      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-6&quot;</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">h3</span>&gt;Tasks&lt;/<span style="color: #008000; font-weight: bold">h3</span>&gt;
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">task</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">setform.task_select</span> <span style="color: #BC7A00">%}</span>
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-check&quot;</span>&gt;
          &lt;<span style="color: #008000; font-weight: bold">label</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-check-label&quot;</span>&gt;
            <span style="color: #BC7A00">{{</span> <span style="color: #19177C">task</span> <span style="color: #BC7A00">}}</span>
            <span style="color: #BC7A00">{{</span> <span style="color: #19177C">task.label</span> <span style="color: #BC7A00">}}</span>
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">div</span>&gt;
        <span style="color: #BC7A00">{{</span> <span style="color: #19177C">setform.set_submit</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary&quot;</span><span style="color: #666666">,</span><span style="color: #19177C">value</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;Set&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">form</span>&gt;
  &lt;/<span style="color: #008000; font-weight: bold">section</span>&gt;

  &lt;<span style="color: #008000; font-weight: bold">section</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;graphs&quot;</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">h1</span>&gt;Graphs&lt;/<span style="color: #008000; font-weight: bold">h1</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">form</span> <span style="color: #7D9029">action</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;loci.loci&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span> <span style="color: #7D9029">method</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;get&quot;</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;graphform&quot;</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">select</span> <span style="color: #7D9029">size</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;5&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;image-picker show-html&quot;</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;graph-select&quot;</span> <span style="color: #7D9029">form</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;graphform&quot;</span> <span style="color: #7D9029">name</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;id&quot;</span>&gt;
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">for</span> <span style="color: #19177C">g</span> <span style="color: #008000; font-weight: bold">in</span> <span style="color: #19177C">teacher.graphs.all</span><span style="color: #666666">()</span> <span style="color: #BC7A00">%}</span>
            &lt;<span style="color: #008000; font-weight: bold">option</span> <span style="color: #7D9029">data-img-label</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">g.title</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&lt;br&gt;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">g.description</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&lt;br&gt;&lt;button class=&#39;btn btn-block&#39;&gt;Load&lt;/button&gt;&lt;br&gt;&lt;input type=&#39;button&#39; value=&#39;Delete&#39; id=&#39;del-graph</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">g.graph_id</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&#39; class=&#39;btn btn-block&#39;&gt;&quot;</span> <span style="color: #7D9029">data-img-src</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">g.image_url</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span> <span style="color: #7D9029">value</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">g.graph_id</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">option</span>&gt;
        <span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endfor</span> <span style="color: #BC7A00">%}</span>
      &lt;/<span style="color: #008000; font-weight: bold">select</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">form</span>&gt;
  &lt;/<span style="color: #008000; font-weight: bold">section</span>&gt;

  &lt;<span style="color: #008000; font-weight: bold">section</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;settings&quot;</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">h1</span>&gt;Settings&lt;/<span style="color: #008000; font-weight: bold">h1</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">h2</span>&gt;Change Details&lt;/<span style="color: #008000; font-weight: bold">h2</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">form</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;change-details&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-horizontal&quot;</span> <span style="color: #7D9029">method</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;post&quot;</span><span style="border: 1px solid #FF0000">,</span> <span style="color: #7D9029">action</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;user.account&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;
      <span style="color: #BC7A00">{{</span> <span style="color: #19177C">changeform.hidden_tag</span><span style="color: #666666">()</span> <span style="color: #BC7A00">}}</span>
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
        <span style="color: #BC7A00">{{</span> <span style="color: #19177C">changeform.fname.label</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-2 control-label&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-10&quot;</span>&gt;
          <span style="color: #BC7A00">{{</span> <span style="color: #19177C">changeform.fname</span><span style="color: #666666">(</span><span style="color: #19177C">value</span><span style="color: #666666">=</span><span style="color: #19177C">teacher.fname</span><span style="color: #666666">,</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
        <span style="color: #BC7A00">{{</span> <span style="color: #19177C">changeform.lname.label</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-2 control-label&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-10&quot;</span>&gt;
          <span style="color: #BC7A00">{{</span> <span style="color: #19177C">changeform.lname</span><span style="color: #666666">(</span><span style="color: #19177C">value</span><span style="color: #666666">=</span><span style="color: #19177C">teacher.lname</span><span style="color: #666666">,</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
        <span style="color: #BC7A00">{{</span> <span style="color: #19177C">changeform.email.label</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-2 control-label&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-10&quot;</span>&gt;
          <span style="color: #BC7A00">{{</span> <span style="color: #19177C">changeform.email</span><span style="color: #666666">(</span><span style="color: #19177C">value</span><span style="color: #666666">=</span><span style="color: #19177C">teacher.email</span><span style="color: #666666">,</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
        <span style="color: #BC7A00">{{</span> <span style="color: #19177C">changeform.password.label</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-2 control-label&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-10&quot;</span>&gt;
          <span style="color: #BC7A00">{{</span> <span style="color: #19177C">changeform.password</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-offset-2 col-xs-10&quot;</span>&gt;
          <span style="color: #BC7A00">{{</span> <span style="color: #19177C">changeform.change_submit</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">form</span>&gt;

    &lt;<span style="color: #008000; font-weight: bold">h2</span>&gt;Password change&lt;/<span style="color: #008000; font-weight: bold">h2</span>&gt;
    &lt;<span style="color: #008000; font-weight: bold">form</span> <span style="color: #7D9029">id</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;pwd&quot;</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-horizontal&quot;</span> <span style="color: #7D9029">method</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;post&quot;</span><span style="border: 1px solid #FF0000">,</span> <span style="color: #7D9029">action</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;user.account&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;
      <span style="color: #BC7A00">{{</span> <span style="color: #19177C">pwform.hidden_tag</span><span style="color: #666666">()</span> <span style="color: #BC7A00">}}</span>
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
        <span style="color: #BC7A00">{{</span> <span style="color: #19177C">pwform.old_password.label</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-2 control-label&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-10&quot;</span>&gt;
          <span style="color: #BC7A00">{{</span> <span style="color: #19177C">pwform.old_password</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
        <span style="color: #BC7A00">{{</span> <span style="color: #19177C">pwform.password.label</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-2 control-label&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-10&quot;</span>&gt;
          <span style="color: #BC7A00">{{</span> <span style="color: #19177C">pwform.password</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
        <span style="color: #BC7A00">{{</span> <span style="color: #19177C">pwform.confirm_password.label</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-2 control-label&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-10&quot;</span>&gt;
          <span style="color: #BC7A00">{{</span> <span style="color: #19177C">pwform.confirm_password</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-control&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;form-group&quot;</span>&gt;
        &lt;<span style="color: #008000; font-weight: bold">div</span> <span style="color: #7D9029">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;col-xs-offset-2 col-xs-10&quot;</span>&gt;
          <span style="color: #BC7A00">{{</span> <span style="color: #19177C">pwform.pw_submit</span><span style="color: #666666">(</span><span style="color: #19177C">class</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;btn btn-primary&quot;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span>
        &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
      &lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
    &lt;/<span style="color: #008000; font-weight: bold">form</span>&gt;
  &lt;/<span style="color: #008000; font-weight: bold">section</span>&gt;
&lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
&lt;/<span style="color: #008000; font-weight: bold">div</span>&gt;
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>

<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">block</span> <span style="color: #19177C">endscripts</span> <span style="color: #BC7A00">%}</span>
&lt;<span style="color: #008000; font-weight: bold">script</span>&gt;
    $SCRIPT_ROOT <span style="color: #666666">=</span> <span style="color: #BC7A00">{{</span> <span style="color: #19177C">request.script_root</span> <span style="color: #666666">|</span> <span style="color: #0000FF">tojson</span> <span style="color: #666666">|</span> <span style="color: #0000FF">safe</span> <span style="color: #BC7A00">}}</span>;
&lt;/<span style="color: #008000; font-weight: bold">script</span>&gt;
&lt;<span style="color: #008000; font-weight: bold">script</span> <span style="color: #7D9029">src</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">{{</span> <span style="color: #19177C">url_for</span><span style="color: #666666">(</span><span style="color: #BA2121">&#39;static&#39;</span><span style="color: #666666">,</span><span style="color: #19177C">filename</span><span style="color: #666666">=</span><span style="color: #BA2121">&#39;scripts/teacher_account.js&#39;</span><span style="color: #666666">)</span> <span style="color: #BC7A00">}}</span><span style="color: #BA2121">&quot;</span>&gt;&lt;/<span style="color: #008000; font-weight: bold">script</span>&gt;
<span style="color: #BC7A00">{%</span> <span style="color: #008000; font-weight: bold">endblock</span> <span style="color: #BC7A00">%}</span>
</pre></div>
<br>